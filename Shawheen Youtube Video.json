{
    "updatedAt":  "2026-01-17T04:17:27.094Z",
    "createdAt":  "2026-01-13T23:28:53.820Z",
    "id":  "Qo2sirL0cDI2fVNQMJ5Eq",
    "name":  "Shawheen Youtube Video",
    "description":  null,
    "active":  true,
    "isArchived":  false,
    "nodes":  [
                  {
                      "parameters":  {
                                         "content":  "## Generate Video\n",
                                         "height":  80,
                                         "width":  320
                                     },
                      "type":  "n8n-nodes-base.stickyNote",
                      "position":  [
                                       43968,
                                       15184
                                   ],
                      "typeVersion":  1,
                      "id":  "aca2c070-b9e1-40de-bac4-1485972163e7",
                      "name":  "Sticky Note2"
                  },
                  {
                      "parameters":  {
                                         "assignments":  {
                                                             "assignments":  [
                                                                                 {
                                                                                     "id":  "c7ce3d37-6455-407a-bf57-286d91c16f97",
                                                                                     "name":  "video_url",
                                                                                     "value":  "={{ $json.movie.url }}",
                                                                                     "type":  "string"
                                                                                 }
                                                                             ]
                                                         },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.set",
                      "typeVersion":  3.4,
                      "position":  [
                                       88048,
                                       29648
                                   ],
                      "id":  "71aafb98-7f4c-477b-a0fe-c8a8544bbdb1",
                      "name":  "Output final video"
                  },
                  {
                      "parameters":  {
                                         "resource":  "message",
                                         "operation":  "send",
                                         "sendTo":  "={{ $(\u0027Webhook\u0027).first().json.body[0].email }}",
                                         "subject":  "Your Property Video is Ready!",
                                         "message":  "=Hi there!\n\nGreat news - your property video has been generated successfully!\n\nYou can view and download your video here:\n{{ $json.movie.url }}\n\nThank you for using our service!\n\nBest regards,\nEdge AI Video Team",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.gmail",
                      "typeVersion":  2.1,
                      "position":  [
                                       88272,
                                       29824
                                   ],
                      "id":  "1c55a048-e89b-405d-8436-330d7c59dc20",
                      "name":  "ðŸŽ‰ Send video URL",
                      "webhookId":  "a4fb50cc-107d-4525-b37e-94b4abd7f0e3",
                      "credentials":  {
                                          "gmailOAuth2":  {
                                                              "id":  "LgTVoHWwrV9qYrJH",
                                                              "name":  "Gmail account"
                                                          }
                                      }
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/videos/complete",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Content-Type",
                                                                                         "value":  "application/json"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={{ JSON.stringify({ video_id: $(\u0027Webhook\u0027).first().json.body[0].videoId, video_url: $json.video_url, status: \u0027completed\u0027, execution_id: $execution.id }) }}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       88272,
                                       29472
                                   ],
                      "id":  "1c3cda16-6a4b-49be-9132-ffe8d8ef28cf",
                      "name":  "HTTP Request"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://backend.edgeairealty.com/api/video/track-execution",
                                         "sendBody":  true,
                                         "bodyParameters":  {
                                                                "parameters":  [
                                                                                   {
                                                                                       "name":  "executionId",
                                                                                       "value":  "={{ $execution.id }}"
                                                                                   },
                                                                                   {
                                                                                       "name":  "email",
                                                                                       "value":  "={{ $json.body[0].email }}"
                                                                                   }
                                                                               ]
                                                            },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       77472,
                                       29504
                                   ],
                      "id":  "ff161925-d657-4644-bc9f-08b49368c274",
                      "name":  "save execution id to db",
                      "disabled":  true
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.json2video.com/v2/movies",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "contentType":  "raw",
                                         "rawContentType":  "application/json",
                                         "body":  "={\n  \"comment\": \"Final video with overlay end card\",\n  \"resolution\": \"custom\",\n  \"width\": 1080,\n  \"height\": 1920,\n  \"quality\": \"high\",\n  \"scenes\": [\n    {\n      \"comment\": \"Full video with end card overlay\",\n      \"duration\": {{ Number($json.video_duration) || 100 }},\n      \"elements\": [\n        {\n          \"type\": \"video\",\n          \"src\": \"{{ $json.video }}\"\n        },\n        {\n          \"type\": \"subtitles\",\n          \"start\": 0,\n          \"duration\": {{ Number($json.video_duration) - 6 }},\n          \"settings\": {\n            \"style\": \"boxed-word\",\n            \"position\": \"bottom-center\",\n            \"y\": 1300,\n            \"font-family\": \"Montserrat\",\n            \"font-size\": 90,\n            \"font-weight\": \"800\",\n            \"line-color\": \"#FFFFFF\",\n            \"word-color\": \"#E1306C\",\n            \"outline-color\": \"#000000\",\n            \"outline-width\": 4\n          }\n        },\n        {\n          \"type\": \"html\",\n          \"tailwindcss\": true,\n          \"html\": \"\u003cdiv class=\u0027w-full h-full bg-white flex flex-col items-center justify-center\u0027\u003e\u003cimg src=\u0027{{ $json.headshot_url }}\u0027 class=\u0027w-72 h-72 rounded-full object-cover mb-8 shadow-lg\u0027 /\u003e\u003ch1 class=\u0027text-5xl font-bold text-gray-900 mb-2\u0027\u003e{{ $json.agent_name }}\u003c/h1\u003e\u003cp class=\u0027text-2xl text-gray-500 mb-8\u0027\u003e{{ $json.brand_name }}\u003c/p\u003e\u003cp class=\u0027text-3xl font-medium text-gray-800 mb-2\u0027\u003e{{ $json.phone }}\u003c/p\u003e\u003cp class=\u0027text-xl text-gray-500\u0027\u003e{{ $json.email }}\u003c/p\u003e\u003c/div\u003e\",\n          \"start\": {{ Number($json.video_duration) - 6 }},\n          \"duration\": 6,\n          \"x\": 540,\n          \"y\": 960,\n          \"width\": 1080,\n          \"fade-in\": 0.5\n        }\n      ]\n    }\n  ]\n}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       87152,
                                       29648
                                   ],
                      "id":  "6662028a-d554-44dc-b420-506a5c0c4372",
                      "name":  "json2video - Edit video1",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "strict"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "2643b070-cbb2-4562-9269-a61389e0c242",
                                                                                   "leftValue":  "={{ $json.movie.status }}",
                                                                                   "rightValue":  "done",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "and"
                                                        },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       87824,
                                       29648
                                   ],
                      "id":  "401c7c69-f249-4364-a079-4daedbded16b",
                      "name":  "Check Errors "
                  },
                  {
                      "parameters":  {
                                         "assignments":  {
                                                             "assignments":  [
                                                                                 {
                                                                                     "id":  "var-video",
                                                                                     "name":  "video",
                                                                                     "value":  "={{ $json.movie.url }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-video-duration",
                                                                                     "name":  "video_duration",
                                                                                     "value":  "={{ $json.movie.duration }}",
                                                                                     "type":  "number"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-headshot",
                                                                                     "name":  "headshot_url",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].headshotUrl }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-agent-name",
                                                                                     "name":  "agent_name",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentName }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-brand-name",
                                                                                     "name":  "brand_name",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].brandName || $(\u0027Webhook\u0027).first().json.body[0].agentName + \u0027 Real Estate\u0027 }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-phone",
                                                                                     "name":  "phone",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentPhone }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-email",
                                                                                     "name":  "email",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentEmail || $(\u0027Webhook\u0027).first().json.body[0].email }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-logo",
                                                                                     "name":  "logo_url",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].logoUrl }}",
                                                                                     "type":  "string"
                                                                                 },
                                                                                 {
                                                                                     "id":  "var-captions",
                                                                                     "name":  "show_captions",
                                                                                     "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].showCaptions || \u0027true\u0027 }}",
                                                                                     "type":  "string"
                                                                                 }
                                                                             ]
                                                         },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.set",
                      "typeVersion":  3.4,
                      "position":  [
                                       86928,
                                       29648
                                   ],
                      "id":  "98ffa0db-fcad-44f5-88e0-a672372c41e8",
                      "name":  "Format variables for final editing1"
                  },
                  {
                      "parameters":  {
                                         "amount":  10
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       87376,
                                       29648
                                   ],
                      "id":  "6bfa0b28-ba19-4494-ba31-3eaf1a331674",
                      "name":  "10 sec1",
                      "webhookId":  "a26e82ce-7ce3-4c35-8c1b-d38d741e5517"
                  },
                  {
                      "parameters":  {
                                         "amount":  10
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       83792,
                                       29648
                                   ],
                      "id":  "a348d831-6f2a-4a73-86cb-d489c9b48ddc",
                      "name":  "10 sec3",
                      "webhookId":  "a785c251-3cad-4a14-8459-982605435a38"
                  },
                  {
                      "parameters":  {
                                         "amount":  1
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       78416,
                                       29648
                                   ],
                      "id":  "e377702b-07f8-407b-96d1-0d536646171a",
                      "name":  "Wait 30 sec1",
                      "webhookId":  "77b845bd-e51b-4251-be3f-0a35c9c33b73"
                  },
                  {
                      "parameters":  {
                                         "amount":  30
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       84912,
                                       29648
                                   ],
                      "id":  "6f4111b7-d6fb-43a4-afd2-4ffa133af7ca",
                      "name":  "30 sec2",
                      "webhookId":  "80f025e0-e388-4a80-8b4c-1a13950f84c7"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// Get the images array\nconst images = $input.first().json.body[0].images\n\n// Return each image as a separate item\nreturn images.map(image =\u003e ({\n  json: {\n    imageurl: image.imageurl,\n  \n  }\n}));"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       77472,
                                       29792
                                   ],
                      "id":  "9ebfc7e0-1c7d-4e8c-b5db-3610540cd1ac",
                      "name":  "Separate image data"
                  },
                  {
                      "parameters":  {
                                         "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027json2video - Edit video1\u0027).item.json.project }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       87600,
                                       29648
                                   ],
                      "id":  "b439fc41-6315-4e23-ab65-62b30d26aaf4",
                      "name":  "caption generation",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "=https://api.elevenlabs.io/v1/text-to-speech/{{ $(\u0027Webhook\u0027).first().json.body[0].voiceId }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={{ JSON.stringify({ text: $json.text, model_id: \"eleven_multilingual_v2\", voice_settings: { stability: 0.5, similarity_boost: 0.75 } }) }}",
                                         "options":  {
                                                         "response":  {
                                                                          "response":  {
                                                                                           "responseFormat":  "file"
                                                                                       }
                                                                      }
                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       80208,
                                       29648
                                   ],
                      "id":  "02687d69-da7a-4762-8e11-e651c33c6d5e",
                      "name":  "Convert text to speech",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "rKfEcb8VGDJowZG5",
                                                                 "name":  "Eleven Labs"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call jsontovideo to render\u0027).item.json.project }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       86480,
                                       29648
                                   ],
                      "id":  "dcd0b02c-2c24-4b81-808d-b6149ac0a249",
                      "name":  "Get final video status",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "amount":  30
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       86256,
                                       29648
                                   ],
                      "id":  "507cc1d2-20c2-4883-be96-f557368895c3",
                      "name":  "30 sec",
                      "webhookId":  "80f025e0-e388-4a80-8b4c-1a13950f84c7"
                  },
                  {
                      "parameters":  {
                                         "amount":  30
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       81328,
                                       29648
                                   ],
                      "id":  "61e14c86-f6b6-4473-a25d-a6c169db265f",
                      "name":  "Wait 30 sec3",
                      "webhookId":  "cecadd7e-cb24-46a8-8889-a7ddedf4e3ff"
                  },
                  {
                      "parameters":  {
                                         "amount":  30
                                     },
                      "type":  "n8n-nodes-base.wait",
                      "typeVersion":  1.1,
                      "position":  [
                                       82672,
                                       29648
                                   ],
                      "id":  "0725448f-ad1c-4411-b3f0-d27c3497e0ac",
                      "name":  "30 sec3",
                      "webhookId":  "0ef02fcf-1b28-452f-8a7f-edbecd24b004"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "const items = $input.all();\n\nconst grouped = [];\nlet groupIndex = 1;\n\nfor (let i = 0; i \u003c items.length; i += 1) {\n  const groupItems = items.slice(i, i + 1);\n\n  // Parse image URLs\n  const images = groupItems.map(item =\u003e {\n    const result = JSON.parse(item.json.data.resultJson);\n    return result.resultUrls[0];\n  });\n\n\n  grouped.push({\n    json: {\n      images: images,\n    }\n  });\n\n  groupIndex++;\n}\n\n// Return grouped items with duration\nreturn grouped;\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       79312,
                                       29648
                                   ],
                      "id":  "870ee445-139a-4ef9-99cd-bf136fb349c6",
                      "name":  "Make Optimized Images Array from Nano-banana"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// âœ… Get all items from both nodes\nconst request2Items = $input.all();\nconst request1Items = $items(\"Create task on kie to optimize images\");\n\n// Flatten their JSON data\nconst request2Data = request2Items.map(item =\u003e item.json);\nconst request1Data = request1Items.map(item =\u003e item.json);\n\n// Check states\nconst hasFailed = request2Data.some(r =\u003e r?.data?.state === \"fail\");\nconst allSuccess = request2Data.every(r =\u003e r?.data?.state === \"success\");\n\nif (hasFailed) {\n  // âŒ Terminate workflow immediately\n  throw new Error(\"âŒ One or more items have failed. Stopping execution.\");\n}\n\nif (allSuccess) {\n  // âœ… All succeeded â€” append status \"success\"\n  let successData = request2Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"success\",\n    },\n  }));\n\n  // ðŸ”¹ Duplicate the first item and add to end\n  const firstItemCopy = {\n    json: {\n      ...successData[0].json\n    }\n  };\n  successData.push(firstItemCopy);\n\n  return successData;\n} else {\n  // â³ Some still running â€” append status \"pending\"\n  return request1Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"pending\",\n    },\n  }));\n}\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       78864,
                                       29648
                                   ],
                      "id":  "7645c9ce-1e12-4694-aa27-8150878bf06a",
                      "name":  "Standerdize Response"
                  },
                  {
                      "parameters":  {
                                         "url":  "https://api.kie.ai/api/v1/jobs/recordInfo",
                                         "sendQuery":  true,
                                         "queryParameters":  {
                                                                 "parameters":  [
                                                                                    {
                                                                                        "name":  "taskId",
                                                                                        "value":  "={{ $json.data.taskId }}"
                                                                                    }
                                                                                ]
                                                             },
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                     },
                                                                                     {
                                                                                         "name":  "cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                     }
                                                                                 ]
                                                              },
                                         "options":  {
                                                         "redirect":  {
                                                                          "redirect":  {

                                                                                       }
                                                                      }
                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       78640,
                                       29648
                                   ],
                      "id":  "ca118dab-6d76-49c1-8191-408248a36d33",
                      "name":  "Get image from kie"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.kie.ai/api/v1/jobs/createTask",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={\n  \"model\": \"google/nano-banana-edit\",\n  \"input\": {\n    \"image_urls\": [\"{{ $json.imageurl }}\"],\n    \"prompt\": \"Take the provided image of any size and convert it to vertical 9:16 aspect ratio (1080Ã—1920).Keep the main subject perfectly centered.Automatically fill extra space (top, bottom, or sides) naturally to make it a full vertical HD image.Preserve all colors, textures, details, and lighting of the original image.Do not crop or distort the main subject.Output should be high definition, clean, and realistic, ready for Reels/TikTok.\",\n    \"output_format\": \"png\",\n    \"image_size\": \"9:16\"\n  }\n} ",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       77744,
                                       29648
                                   ],
                      "id":  "2ad5ad30-5a77-4306-925e-35fa0d962a4f",
                      "name":  "Create task on kie to optimize images"
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "strict"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "success-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "success",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               },
                                                                               {
                                                                                   "id":  "error-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "error",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               },
                                                                               {
                                                                                   "id":  "failed-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "failed",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "or"
                                                        },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       79088,
                                       29648
                                   ],
                      "id":  "2c66163b-9d6d-4491-8d5b-2602197bd389",
                      "name":  "If Status is Success Go Otherwise Wait",
                      "alwaysOutputData":  false
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// Get grouped data\nconst grouped = $input.all().map(item =\u003e item.json);\n\n// ---------- PROPERTY INFO ----------\nconst property = $(\u0027Webhook\u0027).first().json.body[0];\nconst propertyType = property.propertyType;\nconst city = property.city;\nconst price = `$${property.price}`;\nconst BedRoom = property.bedroomCount || \u0027\u0027;\nconst RestRoom = property.bathroomCount || \u0027\u0027;\nconst mainSellingPoints = property.mainSellingPoints || [];\nconst squareFeet = property.size || \u0027\u0027;\nconst lotSize = property.lotSize || \u0027\u0027;\nconst preferredTone = property.preferredTone || \u0027enthusiastic\u0027;\n\n// Selling points text\nconst sellingPointsText =\n  mainSellingPoints.length === 1\n    ? mainSellingPoints[0]\n    : mainSellingPoints.length === 2\n    ? `${mainSellingPoints[0]} and ${mainSellingPoints[1]}`\n    : `${mainSellingPoints.slice(0, -1).join(\u0027, \u0027)} and ${mainSellingPoints[mainSellingPoints.length - 1]}`;\n\nconst roomCountsText = lotSize\n  ? `${BedRoom} bed, ${RestRoom} bath, ${lotSize} lot size`\n  : `${BedRoom} bed, ${RestRoom} bath`;\n\n// Flatten all images for AI context\nconst allImages = grouped.flatMap(g =\u003e g.images);\n\n// Convert images to base64 via API (temp URLs not accessible to OpenAI)\nconst base64Response = await fetch(\u0027https://y-tvideo-mvp-m2dz.vercel.app/api/images/to-base64\u0027, {\n  method: \u0027POST\u0027,\n  headers: {\n    \u0027Content-Type\u0027: \u0027application/json\u0027,\n    \u0027Authorization\u0027: \u0027Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77\u0027\n  },\n  body: JSON.stringify({ urls: allImages })\n});\n\nconst base64Data = await base64Response.json();\nconst base64Images = base64Data.images || [];\n\n// Prepare images for AI analysis using base64\nconst imagesForAI = base64Images.map(img =\u003e ({\n  type: \"image_url\",\n  image_url: { url: img.base64 }\n}));\n\n// ---------- USER PROMPT WITH 5 PARTS ----------\nconst userPrompt = `\nWrite a real estate short-form script in a ${preferredTone} tone.\n\nThe property is a ${propertyType} in ${city} priced at ${price}.\nMention ${BedRoom} bedrooms, ${RestRoom} bathrooms, ${squareFeet} sq ft, ${roomCountsText},\nand key features (${sellingPointsText}).\n\nUse image cues naturally (do not say \"look at this\" or \"see that\").\n\nSTRUCTURE \u0026 OUTPUT FORMAT (VERY IMPORTANT):\n\nWrite the script as EXACTLY 5 parts â€” NO extra versions, NO alternatives.\n\nPart 1 â€” Intro (include price, city, and property type)\nPart 2 â€” Rooms \u0026 specs\nPart 3 â€” Image-based description\nPart 4 â€” Motivation â€” highlight key features and images to excite the client\nPart 5 â€” Outro call-to-action\n\nReturn the final output as:\n\n[Part 1 text]\n\\\\n\\\\n\n[Part 2 text]\n\\\\n\\\\n\n[Part 3 text]\n\\\\n\\\\n\n[Part 4 text]\n\\\\n\\\\n\n[Part 5 text]\n\nDo NOT add headings, labels, numbers, brackets, or bullet points.\nTotal length should remain around 100â€“110 words overall (all parts combined).\nKeep it human, smooth, and friendly.\n`;\n\n// ---------- OPENAI API PAYLOAD ----------\nconst apiPayload = {\n  model: \"gpt-4o\",\n  messages: [\n    {\n      role: \"system\",\n      content: `You are an expert real estate copywriter. Produce only one script and follow the exact formatting rules.`\n    },\n    {\n      role: \"user\",\n      content: [\n        ...imagesForAI,\n        { type: \"text\", text: userPrompt }\n      ]\n    }\n  ],\n  temperature: 0.9\n};\n\nreturn { json: apiPayload };\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       79536,
                                       29648
                                   ],
                      "id":  "1f9548d6-5081-47ea-9e95-fff9628e8fdd",
                      "name":  "Prepare Body for GPT To Analyze Images",
                      "disabled":  true
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.openai.com/v1/chat/completions",
                                         "authentication":  "predefinedCredentialType",
                                         "nodeCredentialType":  "openAiApi",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Content-Type",
                                                                                         "value":  "application/json"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={{ $json }}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       79760,
                                       29648
                                   ],
                      "id":  "bfdd831d-ce38-4dff-a826-0e5b2e11f5bb",
                      "name":  "Call Open AI To Analyze Images And Generate Script Accordingly",
                      "credentials":  {
                                          "openAiApi":  {
                                                            "id":  "t6s7bmAzIhZsEH0A",
                                                            "name":  "OpenAi account 2"
                                                        }
                                      },
                      "disabled":  true
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// Check if frontend provided script sections (respects user\u0027s image order)\nconst webhookResponse = $(\u0027Webhook\u0027).first().json.body[0].webhookResponse;\n\nif (webhookResponse \u0026\u0026 webhookResponse.length \u003e 0) {\n  // Use frontend\u0027s pre-generated script\n  return webhookResponse.map(text =\u003e ({\n    json: { text }\n  }));\n}\n\n// Fallback: use GPT-generated script (legacy path)\nconst content = $input.first().json.choices[0].message.content;\nconst contentArray = content.split(\u0027\\n\\n\u0027);\nreturn contentArray.map(part =\u003e ({\n  json: { text: part }\n}));\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       79984,
                                       29648
                                   ],
                      "id":  "0739a34c-0a42-43a8-881d-1c8a3bdd1370",
                      "name":  "Split the Script by double newline"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/audio/upload",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Content-Type",
                                                                                         "value":  "audio/mpeg"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "contentType":  "binaryData",
                                         "inputDataFieldName":  "data",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       80432,
                                       29648
                                   ],
                      "id":  "141e090b-e8bb-4c37-95e3-069db7cd3284",
                      "name":  "Upload Speech To S3"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/audio/duration",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Content-Type",
                                                                                         "value":  "application/json"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={{ JSON.stringify({ url: $json.Location }) }}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       80656,
                                       29648
                                   ],
                      "id":  "5541fafa-d1a3-4490-a949-46aa3a07d773",
                      "name":  "Get duration of voices"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.kie.ai/api/v1/jobs/createTask",
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                     }
                                                                                 ]
                                                              },
                                         "sendBody":  true,
                                         "specifyBody":  "json",
                                         "jsonBody":  "={\n  \"model\": \"kling-2.6/image-to-video\",\n  \"input\": {\n    \"image_urls\": [\"{{ $json.imageurl }}\"],\n    \"prompt\": \"{{ $json.prompt }}\",\n    \"negative_prompt\": \"{{ $json.negative_prompt }}\",\n    \"duration\": \"5\",\n    \"sound\": false\n  }\n}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       81104,
                                       29648
                                   ],
                      "id":  "0ef87ce6-24c6-4152-9f75-811da7fd2849",
                      "name":  "Call Kie Api Kling Model to Generate image to video"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "const images = $(\u0027Get image from kie\u0027).all();\n\n// Kling prompts optimized for real estate - avoid mirroring/reflection artifacts\nconst prompts = [\n  \"Gentle slow zoom-in, subtle forward camera motion over 5 seconds. Maintain original image integrity with no mirroring, no reflections, no distortion. Keep all edges and boundaries stable. Smooth cinematic quality with natural parallax. Preserve exact colors and lighting.\",\n  \"Very subtle left-to-right drift, barely perceptible slow pan over 5 seconds. No warping, no mirroring, no edge distortion. Maintain image fidelity throughout. Gentle ambient motion with stable framing. Keep original composition intact.\",\n  \"Slow gentle push-in with minimal camera movement over 5 seconds. Preserve image exactly as shown with no transformation or reflection effects. Subtle depth animation only. Clean professional real estate video quality.\"\n];\n\n// Negative prompt to avoid unwanted elements\nconst negativePrompt = \"ceiling fan, spinning fan, rotating blades, mirrored image, reflection, distortion, warping, duplicated elements, reversed image, split screen, kaleidoscope effect, morphing, deformation\";\n\nreturn images.map(image =\u003e {\n  const parsed = JSON.parse(image.json.data.resultJson);\n  const resultUrl = parsed.resultUrls[0];\n\n  return {\n    json: {\n      imageurl: resultUrl,\n      prompt: prompts[Math.floor(Math.random() * prompts.length)],\n      negative_prompt: negativePrompt\n    }\n  };\n});\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       80880,
                                       29648
                                   ],
                      "id":  "ca41e087-9f4f-4667-89bb-a33e65fce269",
                      "name":  "Prepare Body for Kie API (Kling model to generate video)"
                  },
                  {
                      "parameters":  {
                                         "url":  "https://api.kie.ai/api/v1/jobs/recordInfo",
                                         "sendQuery":  true,
                                         "queryParameters":  {
                                                                 "parameters":  [
                                                                                    {
                                                                                        "name":  "taskId",
                                                                                        "value":  "={{ $json.data.taskId }}"
                                                                                    }
                                                                                ]
                                                             },
                                         "sendHeaders":  true,
                                         "headerParameters":  {
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "Authorization",
                                                                                         "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                     },
                                                                                     {
                                                                                         "name":  "Cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                     },
                                                                                     {
                                                                                         "name":  "cookie",
                                                                                         "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                     }
                                                                                 ]
                                                              },
                                         "options":  {
                                                         "redirect":  {
                                                                          "redirect":  {

                                                                                       }
                                                                      }
                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       81552,
                                       29648
                                   ],
                      "id":  "52fa8d7c-ddc7-45b3-ac29-5a372970a57a",
                      "name":  "Get Kie Video Urls"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// âœ… Get all items from both nodes\nconst request2Items = $input.all();\nconst request1Items = $items(\"Call Kie Api Kling Model to Generate image to video\");\n\n// Flatten their JSON data\nconst request2Data = request2Items.map(item =\u003e item.json);\nconst request1Data = request1Items.map(item =\u003e item.json);\n\n// Check states\nconst hasFailed = request2Data.some(r =\u003e r?.data?.state === \"failed\");\nconst allSuccess = request2Data.every(r =\u003e r?.data?.state === \"success\");\n\nif (hasFailed) {\n  // âŒ Terminate workflow immediately\n  throw new Error(\"âŒ One or more items have failed. Stopping execution.\");\n}\n\nif (allSuccess) {\n  // âœ… All succeeded â€” append status \"success\"\n  return request2Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"success\",\n    },\n  }));\n} else {\n  // â³ Some still running â€” append status \"pending\"\n  return request1Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"pending\",\n    },\n  }));\n}\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       81776,
                                       29648
                                   ],
                      "id":  "9d6768de-e904-4613-af4d-05adfe528f3b",
                      "name":  "Standerdized Response"
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "strict"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "success-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "success",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               },
                                                                               {
                                                                                   "id":  "error-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "error",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               },
                                                                               {
                                                                                   "id":  "failed-condition",
                                                                                   "leftValue":  "={{ $json.status }}",
                                                                                   "rightValue":  "failed",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "or"
                                                        },
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       82000,
                                       29648
                                   ],
                      "id":  "2bc82602-b417-4fc9-ab93-ff2b8ac99717",
                      "name":  "If Status is Success Go Otherwise Wait1",
                      "alwaysOutputData":  false
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// Get all Kling video results (flattened)\nconst allItems = $input.all();\n\n// Flatten all URLs into a single array\nconst allUrls = allItems.flatMap(item =\u003e {\n  const result = JSON.parse(item.json.data.resultJson);\n  return result.resultUrls || [];\n});\n\n// Define positions (example, repeat if needed)\n\n// Map URLs to JSON output\nreturn allUrls.map((videoUrl, index) =\u003e {\n  return {\n    json: {\n      imageVideoUrl: videoUrl\n    }\n  };\n});\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       82224,
                                       29648
                                   ],
                      "id":  "837a7bd0-c5b9-450a-81b9-cbe3a64001f3",
                      "name":  "Seprate All Video Urls Generatad from Kei"
                  },
                  {
                      "parameters":  {
                                         "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Render Kie videos in json2video (full duration)\u0027).item.json.project }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       82896,
                                       29648
                                   ],
                      "id":  "d4c3bd15-0e85-4740-b0e6-d030a1ea739b",
                      "name":  "Get Video from Jsontovideo",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.json2video.com/v2/movies",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "contentType":  "raw",
                                         "rawContentType":  "application/json",
                                         "body":  "={\n  \"resolution\": \"custom\",\n  \"quality\": \"high\",\n  \"width\": 1080,\n  \"height\": 1920,\n  \"scenes\": [\n    {\n      \"elements\": [\n        {\n          \"type\": \"video\",\n          \"src\": \"{{ $json.imageVideoUrl }}\",\n          \"start\": 0,\n          \"width\": 1080,\n          \"height\": 1920\n        }\n      ]\n    }\n  ]\n}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       82448,
                                       29648
                                   ],
                      "id":  "f5c5c367-aac1-4a95-ba40-024203da1ef4",
                      "name":  "Render Kie videos in json2video (full duration)",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "loose"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "done-condition",
                                                                                   "leftValue":  "={{ $json.movie.status }}",
                                                                                   "rightValue":  "done",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               },
                                                                               {
                                                                                   "id":  "error-condition",
                                                                                   "leftValue":  "={{ $json.movie.status }}",
                                                                                   "rightValue":  "error",
                                                                                   "operator":  {
                                                                                                    "type":  "string",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "or"
                                                        },
                                         "looseTypeValidation":  true,
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       83120,
                                       29648
                                   ],
                      "id":  "4a3a7b8f-a956-4cab-8cbc-0299a1f220e7",
                      "name":  "If status is done go otherwise wait"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "const items = $input.all();\n\n// Extract video URLs\nconst videoUrls = items.map(item =\u003e item.json.movie.url);\n\n// Build scenes array - simple structure without transitions\nconst scenes = videoUrls.map((url, index) =\u003e ({\n  elements: [\n    {\n      type: \"video\",\n      src: url\n    }\n  ]\n}));\n\n// JSON2Video payload\nconst json2videoPayload = {\n  resolution: \"custom\",\n  width: 1080,\n  height: 1920,\n  quality: \"high\",\n  scenes: scenes\n};\n\nreturn [{ json: json2videoPayload }];"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       83344,
                                       29648
                                   ],
                      "id":  "7c8cadad-9c05-4b18-9c65-8b390860dd7a",
                      "name":  "Make body for jsontovideo Api to merge videos clips"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.json2video.com/v2/movies",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "contentType":  "raw",
                                         "rawContentType":  "scenes",
                                         "body":  "={{ $json}}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       83552,
                                       29648
                                   ],
                      "id":  "7095218c-5573-4f82-8a13-0c938c6ce63a",
                      "name":  "Call Jsontovideo API to merge clips",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call Jsontovideo API to merge clips\u0027).item.json.project }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       84016,
                                       29648
                                   ],
                      "id":  "fa34bbc2-2193-4813-903b-3b75836fca46",
                      "name":  "Get merged video Status",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "loose"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "2643b070-cbb2-4562-9269-a61389e0c242",
                                                                                   "leftValue":  "={{ $json.movie.success }}",
                                                                                   "rightValue":  "true",
                                                                                   "operator":  {
                                                                                                    "type":  "boolean",
                                                                                                    "operation":  "true",
                                                                                                    "singleValue":  true
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "and"
                                                        },
                                         "looseTypeValidation":  true,
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       84240,
                                       29648
                                   ],
                      "id":  "ff3a6e2f-26ae-49aa-9466-f3bc7b811308",
                      "name":  "If status is done go otherwise wait1"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// ============================================================\n// prepare body for jsontovideo to set video\n// FIXED: Hybrid timing - image-synced + sequential fallback\n// ENHANCED: Tiered voice speed adjustment + closing speed-up\n// ============================================================\n\nconst movieData = $input.first().json.movie;\n\nif (!movieData) {\n  throw new Error(\u0027PIPELINE ERROR: No movie data from merged video.\u0027);\n}\nif (!movieData.url) {\n  throw new Error(\u0027PIPELINE ERROR: movie.url is undefined. Status: \u0027 + (movieData.status || \u0027unknown\u0027));\n}\nif (movieData.duration === undefined || movieData.duration === null) {\n  throw new Error(\u0027PIPELINE ERROR: movie.duration is undefined.\u0027);\n}\n\nconst videoUrl = movieData.url;\nconst videoDuration = Number(movieData.duration);\n\nif (isNaN(videoDuration) || videoDuration \u003c= 0) {\n  throw new Error(\u0027PIPELINE ERROR: Invalid videoDuration: \u0027 + movieData.duration);\n}\n\nconst audioItems = $(\u0027Get duration of voices\u0027).all();\n\nif (!audioItems || audioItems.length === 0) {\n  throw new Error(\u0027PIPELINE ERROR: No audio items from Get duration of voices.\u0027);\n}\n\nconst audioClips = audioItems.map((a, idx) =\u003e {\n  const url = a.json.data?.url;\n  const duration = Number(a.json.data?.duration);\n  if (!url) {\n    throw new Error(`PIPELINE ERROR: Audio clip ${idx} has no URL.`);\n  }\n  if (isNaN(duration) || duration \u003c= 0) {\n    throw new Error(`PIPELINE ERROR: Audio clip ${idx} has invalid duration: ${a.json.data?.duration}`);\n  }\n  return { url, duration };\n});\n\n// Constants\nconst CLIP_DURATION = 5;\nconst INTRO_SILENCE = 2;\nconst END_CARD_DURATION = 6;\nconst MAX_CLOSING_SPEED = 1.25;  // Max 25% speed increase for closing\n\nconst webhookData = $(\u0027Webhook\u0027).first().json.body;\nlet sectionMapping = [];\n\nif (Array.isArray(webhookData) \u0026\u0026 webhookData[0]?.sectionImageMapping) {\n  sectionMapping = webhookData[0].sectionImageMapping;\n} else if (webhookData?.sectionImageMapping) {\n  sectionMapping = webhookData.sectionImageMapping;\n}\n\nconsole.log(\u0027Audio clips count:\u0027, audioClips.length);\nconsole.log(\u0027Video duration:\u0027, videoDuration, \u0027s\u0027);\n\n// Calculate total narration duration for tiered adjustment\nconst totalNarrationDuration = audioClips.reduce((sum, clip) =\u003e sum + clip.duration, 0);\nconst availableTime = videoDuration - END_CARD_DURATION;\n\n// Calculate mismatch\nconst overrun = totalNarrationDuration - availableTime;\nconst overrunPercent = availableTime \u003e 0 ? (overrun / availableTime) * 100 : 0;\n\nconsole.log(`Narration: ${totalNarrationDuration.toFixed(1)}s, Available: ${availableTime.toFixed(1)}s`);\nconsole.log(`Overrun: ${overrun.toFixed(1)}s (${overrunPercent.toFixed(1)}%)`);\n\n// Tiered adjustment logic for overall narration\nlet audioSpeedMultiplier = 1.0;\nlet perImageExtension = 0;\nlet adjustmentApplied = \u0027none\u0027;\n\nif (overrun \u003c= 0) {\n  console.log(\u0027OK: Narration fits within video duration\u0027);\n  adjustmentApplied = \u0027none\u0027;\n} else if (overrunPercent \u003c= 8) {\n  // Small overrun - speed up audio slightly (imperceptible)\n  audioSpeedMultiplier = 1 + (overrunPercent / 100);\n  console.log(`SPEED: Audio sped up by ${overrunPercent.toFixed(1)}% (speed: ${audioSpeedMultiplier.toFixed(3)})`);\n  adjustmentApplied = \u0027speed\u0027;\n} else if (overrunPercent \u003c= 15) {\n  // Medium overrun - distribute across all images\n  const imageCount = Math.floor(videoDuration / CLIP_DURATION);\n  perImageExtension = overrun / imageCount;\n  console.log(`EXTEND: Each image extended by ${perImageExtension.toFixed(2)}s (${imageCount} images)`);\n  adjustmentApplied = \u0027extend\u0027;\n} else {\n  // Large overrun (\u003e15%) - apply both adjustments\n  audioSpeedMultiplier = 1.08; // Max imperceptible speed\n  const remainingOverrun = overrun - (availableTime * 0.08);\n  const imageCount = Math.floor(videoDuration / CLIP_DURATION);\n  perImageExtension = Math.max(0, remainingOverrun / imageCount);\n  console.warn(`WARN: Large overrun (${overrunPercent.toFixed(1)}%) - speed: ${audioSpeedMultiplier}, extend: ${perImageExtension.toFixed(2)}s/image`);\n  adjustmentApplied = \u0027both\u0027;\n}\n\nlet timeline = [];\n\nif (sectionMapping \u0026\u0026 sectionMapping.length \u003e 0) {\n  // Separate opening, closing, and middle sections\n  const openingSection = sectionMapping.find(s =\u003e s.sectionType === \u0027opening\u0027);\n  const closingSection = sectionMapping.find(s =\u003e s.sectionType === \u0027closing\u0027);\n  const middleSections = sectionMapping\n    .filter(s =\u003e s.sectionType !== \u0027opening\u0027 \u0026\u0026 s.sectionType !== \u0027closing\u0027)\n    .map((section) =\u003e ({\n      ...section,\n      clip: audioClips[section.sectionIndex]\n    }))\n    .filter(s =\u003e s.clip);\n\n  // Sort middle sections by their first image index (image-synced timing)\n  middleSections.sort((a, b) =\u003e {\n    const aFirst = a.imageIndices.length \u003e 0 ? Math.min(...a.imageIndices) : Infinity;\n    const bFirst = b.imageIndices.length \u003e 0 ? Math.min(...b.imageIndices) : Infinity;\n    return aFirst - bFirst;\n  });\n\n  console.log(\u0027Strategy: Hybrid timing - opening at 2s, middle synced to images, closing before end card\u0027);\n  console.log(\u0027Middle section order:\u0027, middleSections.map(s =\u003e `${s.sectionType}(img${Math.min(...s.imageIndices)})`).join(\u0027 -\u003e \u0027));\n\n  let currentTime = INTRO_SILENCE;\n\n  // 1. OPENING - always plays at 2s (first images visible)\n  if (openingSection) {\n    const openingClip = audioClips[openingSection.sectionIndex];\n    if (openingClip) {\n      const playbackDuration = audioSpeedMultiplier !== 1.0 \n        ? openingClip.duration / audioSpeedMultiplier \n        : openingClip.duration;\n      \n      console.log(`Section \"opening\": start=${currentTime}s (images 0-1), duration=${playbackDuration.toFixed(2)}s`);\n      \n      const audioElement = {\n        type: \u0027audio\u0027,\n        src: openingClip.url,\n        start: parseFloat(currentTime.toFixed(3)),\n        duration: openingClip.duration,\n        loop: 0,\n        volume: 2\n      };\n      if (audioSpeedMultiplier !== 1.0) {\n        audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n      }\n      timeline.push(audioElement);\n      currentTime += playbackDuration;\n    }\n  }\n\n  // 2. MIDDLE SECTIONS - sync with image timing (hybrid approach)\n  for (const sectionData of middleSections) {\n    const firstImageIndex = sectionData.imageIndices.length \u003e 0\n      ? Math.min(...sectionData.imageIndices)\n      : 0;\n    \n    // Calculate when the image appears on screen\n    const imageStartTime = firstImageIndex * (CLIP_DURATION + perImageExtension);\n    \n    // Use image-synced timing OR after previous ends (whichever is later)\n    // This ensures narration matches what\u0027s on screen while preventing overlap\n    const sectionStart = Math.max(imageStartTime, currentTime);\n    \n    const playbackDuration = audioSpeedMultiplier !== 1.0 \n      ? sectionData.clip.duration / audioSpeedMultiplier \n      : sectionData.clip.duration;\n\n    const syncType = sectionStart === imageStartTime ? \u0027image-synced\u0027 : \u0027sequential\u0027;\n    console.log(`Section \"${sectionData.sectionType}\": firstImage=${firstImageIndex}, imageTime=${imageStartTime.toFixed(1)}s, start=${sectionStart.toFixed(1)}s (${syncType}), duration=${playbackDuration.toFixed(2)}s`);\n\n    const audioElement = {\n      type: \u0027audio\u0027,\n      src: sectionData.clip.url,\n      start: parseFloat(sectionStart.toFixed(3)),\n      duration: sectionData.clip.duration,\n      loop: 0,\n      volume: 2\n    };\n    if (audioSpeedMultiplier !== 1.0) {\n      audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n    }\n    timeline.push(audioElement);\n\n    currentTime = sectionStart + playbackDuration;\n  }\n\n  // 3. CLOSING - ensure it ends before end card (speed up if needed)\n  if (closingSection) {\n    const closingClip = audioClips[closingSection.sectionIndex];\n    if (closingClip) {\n      // Calculate extended video duration if images were extended\n      const totalImageCount = Math.floor(videoDuration / CLIP_DURATION);\n      const extendedVideoDuration = videoDuration + (perImageExtension * totalImageCount);\n      \n      // Closing must end 0.5s before end card fades in\n      const mustEndBy = extendedVideoDuration - END_CARD_DURATION - 0.5;\n      \n      // Start closing after current time (no overlap with previous section)\n      let closingStart = currentTime;\n      let closingSpeed = audioSpeedMultiplier;  // Use global speed by default\n      let playbackDuration = closingSpeed !== 1.0 \n        ? closingClip.duration / closingSpeed \n        : closingClip.duration;\n      \n      // Check if closing would exceed the deadline\n      if (closingStart + playbackDuration \u003e mustEndBy) {\n        // Calculate required speed to fit closing before end card\n        const availableClosingTime = mustEndBy - closingStart;\n        \n        if (availableClosingTime \u003e 0) {\n          // Speed up closing to fit (cap at MAX_CLOSING_SPEED)\n          const requiredSpeed = closingClip.duration / availableClosingTime;\n          closingSpeed = Math.min(requiredSpeed, MAX_CLOSING_SPEED);\n          playbackDuration = closingClip.duration / closingSpeed;\n          \n          console.log(`CLOSING SPEED-UP: ${(closingSpeed * 100 - 100).toFixed(1)}% faster (speed=${closingSpeed.toFixed(3)}) to finish by ${mustEndBy.toFixed(1)}s`);\n          adjustmentApplied = adjustmentApplied === \u0027none\u0027 ? \u0027closing-speed\u0027 : adjustmentApplied + \u0027+closing-speed\u0027;\n        } else {\n          console.warn(`WARN: No time for closing narration! Placing at ${closingStart.toFixed(1)}s anyway.`);\n        }\n      }\n      \n      console.log(`Section \"closing\": start=${closingStart.toFixed(1)}s, ends=${(closingStart + playbackDuration).toFixed(1)}s, deadline=${mustEndBy.toFixed(1)}s`);\n\n      const audioElement = {\n        type: \u0027audio\u0027,\n        src: closingClip.url,\n        start: parseFloat(closingStart.toFixed(3)),\n        duration: closingClip.duration,\n        loop: 0,\n        volume: 2\n      };\n      if (closingSpeed !== 1.0) {\n        audioElement.speed = parseFloat(closingSpeed.toFixed(3));\n      }\n      timeline.push(audioElement);\n    }\n  }\n\n} else {\n  // No section mapping - sequential fallback\n  console.log(\u0027Strategy: No section mapping - sequential from start\u0027);\n  let t = INTRO_SILENCE;\n  audioClips.forEach((clip, idx) =\u003e {\n    const audioElement = {\n      type: \u0027audio\u0027,\n      src: clip.url,\n      start: parseFloat(t.toFixed(3)),\n      duration: clip.duration,\n      loop: 0,\n      volume: 2\n    };\n    if (audioSpeedMultiplier !== 1.0) {\n      audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n    }\n    timeline.push(audioElement);\n    const playbackDuration = audioSpeedMultiplier !== 1.0 \n      ? clip.duration / audioSpeedMultiplier \n      : clip.duration;\n    t += playbackDuration;\n  });\n}\n\n// Log final timeline for verification\nconsole.log(\u0027=== Final audio timeline ===\u0027);\ntimeline.forEach((t, i) =\u003e {\n  const speedInfo = t.speed ? ` (speed: ${t.speed})` : \u0027\u0027;\n  console.log(`  [${i}] start: ${t.start}s, duration: ${t.duration}s${speedInfo}`);\n});\n\n// Build video element - extend duration if needed\nconst totalImageCount = Math.floor(videoDuration / CLIP_DURATION);\nconst extendedVideoDuration = perImageExtension \u003e 0 \n  ? videoDuration + (perImageExtension * totalImageCount)\n  : videoDuration;\n\nconst videoElement = {\n  type: \u0027video\u0027,\n  src: videoUrl,\n  volume: 0\n};\n\n// If extending images, add duration property\nif (perImageExtension \u003e 0) {\n  videoElement.duration = extendedVideoDuration;\n  console.log(`Extended video duration: ${extendedVideoDuration.toFixed(1)}s (was ${videoDuration}s)`);\n}\n\n// Payload for json2video API - no custom fields allowed\nconst payload = {\n  width: 1080,\n  height: 1920,\n  quality: \u0027high\u0027,\n  resolution: \u0027custom\u0027,\n  scenes: [\n    {\n      elements: [\n        videoElement,\n        ...timeline\n      ]\n    }\n  ]\n};\n\nconsole.log(\u0027=== Summary ===\u0027);\nconsole.log(\u0027First audio starts at:\u0027, timeline[0]?.start, \u0027s\u0027);\nconsole.log(\u0027Adjustment applied:\u0027, adjustmentApplied);\n\nreturn [{ json: payload }];"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       84464,
                                       29648
                                   ],
                      "id":  "cae2002a-6959-4678-92f2-f4c379fc3425",
                      "name":  "prepare body for jsontovideo to set video"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.json2video.com/v2/movies",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "contentType":  "raw",
                                         "rawContentType":  "scenes",
                                         "body":  "={{ $json}}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       84688,
                                       29648
                                   ],
                      "id":  "066479f5-4324-4bc4-8321-e5853e007784",
                      "name":  "Call Jsontovideo to create task",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call Jsontovideo to create task\u0027).item.json.project }}",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.2,
                      "position":  [
                                       85136,
                                       29648
                                   ],
                      "id":  "afd367fd-42bb-452f-9ac9-31ce4d75af0c",
                      "name":  "Get video status",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "loose"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "cond1-success-true",
                                                                                   "leftValue":  "={{ $json.movie.success }}",
                                                                                   "rightValue":  true,
                                                                                   "operator":  {
                                                                                                    "type":  "boolean",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "and"
                                                        },
                                         "looseTypeValidation":  true,
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       85360,
                                       29648
                                   ],
                      "id":  "3a550f1e-d2ed-47ee-a352-65644d88b380",
                      "name":  "If Task is Status is done go otherwise wait"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// Validate input from previous render step\nconst movieData = $input.first().json.movie;\nif (!movieData) {\n  throw new Error(\u0027PIPELINE ERROR: No movie data from previous render. Check \"Get video status\" output.\u0027);\n}\nif (!movieData.url) {\n  throw new Error(\u0027PIPELINE ERROR: movie.url is undefined. Previous render (\"Call Jsontovideo to create task\") may have failed. Status: \u0027 + (movieData.status || \u0027unknown\u0027) + \u0027, Error: \u0027 + (movieData.message || \u0027none\u0027));\n}\nif (!movieData.duration) {\n  throw new Error(\u0027PIPELINE ERROR: movie.duration is undefined.\u0027);\n}\n\nconst videoUrl = movieData.url;\nconst videoDuration = Number(movieData.duration);\nconst musicUrl = $(\u0027Webhook\u0027).first().json.body[0].music;\n\nconst audioDetails = $(\u0027Get duration of voices\u0027).all();\nconst audioStarting = $(\u0027prepare body for jsontovideo to set video\u0027).all();\n\n// Validate audio data\nif (!audioDetails || audioDetails.length === 0) {\n  throw new Error(\u0027PIPELINE ERROR: No audio details from \"Get duration of voices\"\u0027);\n}\nif (!audioStarting || audioStarting.length === 0 || !audioStarting[0].json.scenes) {\n  throw new Error(\u0027PIPELINE ERROR: No audio starting times from \"prepare body for jsontovideo to set video\"\u0027);\n}\n\n// durations from API\nconst durations = audioDetails.map(item =\u003e {\n  const dur = item.json.data?.duration;\n  if (dur === undefined) {\n    throw new Error(\u0027PIPELINE ERROR: Audio item missing duration\u0027);\n  }\n  return dur;\n});\n\n// extract start times from scenes\nconst starts = audioStarting[0].json.scenes[0].elements\n  .filter(el =\u003e el.type === \u0027audio\u0027)\n  .map(el =\u003e el.start);\n\nreturn [\n  {\n    json: {\n      videoUrl,\n      musicUrl,\n      durations,\n      starts,\n      videoDuration\n    }\n  }\n];\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       85584,
                                       29648
                                   ],
                      "id":  "2b131b50-6524-4e9f-877c-732f1ba94016",
                      "name":  "get video metadata to add music"
                  },
                  {
                      "parameters":  {
                                         "method":  "POST",
                                         "url":  "https://api.json2video.com/v2/movies",
                                         "authentication":  "genericCredentialType",
                                         "genericAuthType":  "httpHeaderAuth",
                                         "sendBody":  true,
                                         "contentType":  "raw",
                                         "rawContentType":  "scenes",
                                         "body":  "={{ $json}}",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.httpRequest",
                      "typeVersion":  4.3,
                      "position":  [
                                       86032,
                                       29648
                                   ],
                      "id":  "bb155957-fa48-4f53-a614-120cc5ebb80f",
                      "name":  "Call jsontovideo to render",
                      "credentials":  {
                                          "httpHeaderAuth":  {
                                                                 "id":  "ZmaCE8owCz8ioHlO",
                                                                 "name":  "json2video"
                                                             }
                                      }
                  },
                  {
                      "parameters":  {
                                         "conditions":  {
                                                            "options":  {
                                                                            "version":  2,
                                                                            "leftValue":  "",
                                                                            "caseSensitive":  true,
                                                                            "typeValidation":  "loose"
                                                                        },
                                                            "conditions":  [
                                                                               {
                                                                                   "id":  "cond1-success-true",
                                                                                   "leftValue":  "={{ $json.movie.success }}",
                                                                                   "rightValue":  true,
                                                                                   "operator":  {
                                                                                                    "type":  "boolean",
                                                                                                    "operation":  "equals"
                                                                                                }
                                                                               }
                                                                           ],
                                                            "combinator":  "and"
                                                        },
                                         "looseTypeValidation":  true,
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.if",
                      "typeVersion":  2.2,
                      "position":  [
                                       86704,
                                       29648
                                   ],
                      "id":  "ce04738d-8506-4d61-b84d-173e4cf8c121",
                      "name":  "if task is done go otherwise wait"
                  },
                  {
                      "parameters":  {
                                         "jsCode":  "// ============================================================\n// Prepare body for jsontovideo to render video\n// Adds ONLY music track with ducking - no text overlays\n// Video volume = 1 to preserve narration from previous render\n// ============================================================\n\nconst inputData = $input.first().json;\n\n// VALIDATION\nif (!inputData.videoUrl) {\n  throw new Error(\u0027VIDEO_URL_MISSING: videoUrl is undefined.\u0027);\n}\nif (!inputData.videoDuration || isNaN(inputData.videoDuration)) {\n  throw new Error(\u0027VIDEO_DURATION_MISSING: videoDuration is \u0027 + inputData.videoDuration);\n}\nif (!inputData.musicUrl) {\n  throw new Error(\u0027MUSIC_URL_MISSING: musicUrl is undefined.\u0027);\n}\nif (!inputData.durations || !inputData.starts) {\n  throw new Error(\u0027AUDIO_DATA_MISSING: durations or starts array is undefined.\u0027);\n}\n\nconst videoUrl = inputData.videoUrl;\nconst musicUrl = inputData.musicUrl;\nconst durations = inputData.durations;\nconst starts = inputData.starts;\nconst videoDuration = Number(inputData.videoDuration);\n\n// Music volume settings (reduced 15% from original 0.8/0.15)\nconst MUSIC_HIGH = 0.68;\nconst MUSIC_LOW = 0.13;\nconst FADE_TIME = 0.5;\nconst MUSIC_TRACK_DURATION = 90;\n\nlet musicTimeline = [];\nlet currentTime = 0;\nlet musicOffset = 0;\n\n// Build music timeline with ducking during voice segments\nfor (let i = 0; i \u003c starts.length; i++) {\n  const voiceStart = starts[i];\n  const voiceDuration = durations[i];\n  const voiceEnd = voiceStart + voiceDuration;\n\n  // High-volume music during gaps (before voice)\n  if (voiceStart \u003e currentTime) {\n    const gapDuration = voiceStart - currentTime;\n    musicTimeline.push({\n      type: \u0027audio\u0027,\n      src: musicUrl,\n      start: currentTime,\n      seek: musicOffset % MUSIC_TRACK_DURATION,\n      duration: gapDuration,\n      volume: MUSIC_HIGH,\n      \u0027fade-out\u0027: FADE_TIME\n    });\n    musicOffset += gapDuration;\n  }\n\n  // Low-volume music during voice (ducked)\n  musicTimeline.push({\n    type: \u0027audio\u0027,\n    src: musicUrl,\n    start: voiceStart,\n    seek: musicOffset % MUSIC_TRACK_DURATION,\n    duration: voiceDuration,\n    volume: MUSIC_LOW,\n    \u0027fade-in\u0027: FADE_TIME,\n    \u0027fade-out\u0027: FADE_TIME\n  });\n  musicOffset += voiceDuration;\n  currentTime = voiceEnd;\n}\n\n// Remaining music after last voice\nif (currentTime \u003c videoDuration) {\n  const remainingDuration = videoDuration - currentTime;\n  musicTimeline.push({\n    type: \u0027audio\u0027,\n    src: musicUrl,\n    start: currentTime,\n    seek: musicOffset % MUSIC_TRACK_DURATION,\n    duration: remainingDuration,\n    volume: MUSIC_HIGH,\n    \u0027fade-in\u0027: FADE_TIME,\n    \u0027fade-out\u0027: 1.0\n  });\n}\n\n// Build final json2video payload\n// NOTE: video volume = 1 to PRESERVE NARRATION from previous render!\nconst payload = {\n  width: 1080,\n  height: 1920,\n  quality: \u0027high\u0027,\n  resolution: \u0027custom\u0027,\n  scenes: [\n    {\n      elements: [\n        {\n          type: \u0027video\u0027,\n          src: videoUrl,\n          volume: 1  // IMPORTANT: Keep narration audio!\n        },\n        ...musicTimeline\n      ]\n    }\n  ]\n};\n\nreturn [{ json: payload }];\n"
                                     },
                      "type":  "n8n-nodes-base.code",
                      "typeVersion":  2,
                      "position":  [
                                       85808,
                                       29648
                                   ],
                      "id":  "3b77d61f-9dda-4d96-aeab-8f9bdf2eade1",
                      "name":  "Prepare body for jsontovideo to render video"
                  },
                  {
                      "parameters":  {
                                         "httpMethod":  "POST",
                                         "path":  "db085427-02a1-4f47-9934-9c258aa929b3",
                                         "options":  {

                                                     }
                                     },
                      "type":  "n8n-nodes-base.webhook",
                      "typeVersion":  2.1,
                      "position":  [
                                       77152,
                                       29760
                                   ],
                      "id":  "161e7300-d90f-43fc-94dc-457cd14e976a",
                      "name":  "Webhook",
                      "webhookId":  "db085427-02a1-4f47-9934-9c258aa929b3"
                  }
              ],
    "connections":  {
                        "Output final video":  {
                                                   "main":  [
                                                                [
                                                                    {
                                                                        "node":  "ðŸŽ‰ Send video URL",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    },
                                                                    {
                                                                        "node":  "HTTP Request",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    }
                                                                ]
                                                            ]
                                               },
                        "json2video - Edit video1":  {
                                                         "main":  [
                                                                      [
                                                                          {
                                                                              "node":  "10 sec1",
                                                                              "type":  "main",
                                                                              "index":  0
                                                                          }
                                                                      ]
                                                                  ]
                                                     },
                        "Check Errors ":  {
                                              "main":  [
                                                           [
                                                               {
                                                                   "node":  "Output final video",
                                                                   "type":  "main",
                                                                   "index":  0
                                                               }
                                                           ]
                                                       ]
                                          },
                        "Format variables for final editing1":  {
                                                                    "main":  [
                                                                                 [
                                                                                     {
                                                                                         "node":  "json2video - Edit video1",
                                                                                         "type":  "main",
                                                                                         "index":  0
                                                                                     }
                                                                                 ]
                                                                             ]
                                                                },
                        "10 sec1":  {
                                        "main":  [
                                                     [
                                                         {
                                                             "node":  "caption generation",
                                                             "type":  "main",
                                                             "index":  0
                                                         }
                                                     ]
                                                 ]
                                    },
                        "10 sec3":  {
                                        "main":  [
                                                     [
                                                         {
                                                             "node":  "Get merged video Status",
                                                             "type":  "main",
                                                             "index":  0
                                                         }
                                                     ]
                                                 ]
                                    },
                        "Wait 30 sec1":  {
                                             "main":  [
                                                          [
                                                              {
                                                                  "node":  "Get image from kie",
                                                                  "type":  "main",
                                                                  "index":  0
                                                              }
                                                          ]
                                                      ]
                                         },
                        "30 sec2":  {
                                        "main":  [
                                                     [
                                                         {
                                                             "node":  "Get video status",
                                                             "type":  "main",
                                                             "index":  0
                                                         }
                                                     ]
                                                 ]
                                    },
                        "Separate image data":  {
                                                    "main":  [
                                                                 [
                                                                     {
                                                                         "node":  "Create task on kie to optimize images",
                                                                         "type":  "main",
                                                                         "index":  0
                                                                     }
                                                                 ]
                                                             ]
                                                },
                        "caption generation":  {
                                                   "main":  [
                                                                [
                                                                    {
                                                                        "node":  "Check Errors ",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    }
                                                                ]
                                                            ]
                                               },
                        "Convert text to speech":  {
                                                       "main":  [
                                                                    [
                                                                        {
                                                                            "node":  "Upload Speech To S3",
                                                                            "type":  "main",
                                                                            "index":  0
                                                                        }
                                                                    ]
                                                                ]
                                                   },
                        "Get final video status":  {
                                                       "main":  [
                                                                    [
                                                                        {
                                                                            "node":  "if task is done go otherwise wait",
                                                                            "type":  "main",
                                                                            "index":  0
                                                                        }
                                                                    ]
                                                                ]
                                                   },
                        "30 sec":  {
                                       "main":  [
                                                    [
                                                        {
                                                            "node":  "Get final video status",
                                                            "type":  "main",
                                                            "index":  0
                                                        }
                                                    ]
                                                ]
                                   },
                        "Wait 30 sec3":  {
                                             "main":  [
                                                          [
                                                              {
                                                                  "node":  "Get Kie Video Urls",
                                                                  "type":  "main",
                                                                  "index":  0
                                                              }
                                                          ]
                                                      ]
                                         },
                        "30 sec3":  {
                                        "main":  [
                                                     [
                                                         {
                                                             "node":  "Get Video from Jsontovideo",
                                                             "type":  "main",
                                                             "index":  0
                                                         }
                                                     ]
                                                 ]
                                    },
                        "Make Optimized Images Array from Nano-banana":  {
                                                                             "0":  [
                                                                                       [
                                                                                           {
                                                                                               "node":  "Split the Script by double newline",
                                                                                               "type":  "0",
                                                                                               "index":  0
                                                                                           }
                                                                                       ]
                                                                                   ],
                                                                             "main":  [
                                                                                          [
                                                                                              {
                                                                                                  "node":  "Prepare Body for GPT To Analyze Images",
                                                                                                  "type":  "main",
                                                                                                  "index":  0
                                                                                              }
                                                                                          ]
                                                                                      ]
                                                                         },
                        "Standerdize Response":  {
                                                     "main":  [
                                                                  [
                                                                      {
                                                                          "node":  "If Status is Success Go Otherwise Wait",
                                                                          "type":  "main",
                                                                          "index":  0
                                                                      }
                                                                  ]
                                                              ]
                                                 },
                        "Get image from kie":  {
                                                   "main":  [
                                                                [
                                                                    {
                                                                        "node":  "Standerdize Response",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    }
                                                                ]
                                                            ]
                                               },
                        "Create task on kie to optimize images":  {
                                                                      "main":  [
                                                                                   [
                                                                                       {
                                                                                           "node":  "Wait 30 sec1",
                                                                                           "type":  "main",
                                                                                           "index":  0
                                                                                       }
                                                                                   ]
                                                                               ]
                                                                  },
                        "If Status is Success Go Otherwise Wait":  {
                                                                       "main":  [
                                                                                    [
                                                                                        {
                                                                                            "node":  "Make Optimized Images Array from Nano-banana",
                                                                                            "type":  "main",
                                                                                            "index":  0
                                                                                        }
                                                                                    ]
                                                                                ]
                                                                   },
                        "Prepare Body for GPT To Analyze Images":  {
                                                                       "main":  [
                                                                                    [
                                                                                        {
                                                                                            "node":  "Call Open AI To Analyze Images And Generate Script Accordingly",
                                                                                            "type":  "main",
                                                                                            "index":  0
                                                                                        }
                                                                                    ]
                                                                                ]
                                                                   },
                        "Call Open AI To Analyze Images And Generate Script Accordingly":  {
                                                                                               "main":  [
                                                                                                            [
                                                                                                                {
                                                                                                                    "node":  "Split the Script by double newline",
                                                                                                                    "type":  "main",
                                                                                                                    "index":  0
                                                                                                                }
                                                                                                            ]
                                                                                                        ]
                                                                                           },
                        "Split the Script by double newline":  {
                                                                   "main":  [
                                                                                [
                                                                                    {
                                                                                        "node":  "Convert text to speech",
                                                                                        "type":  "main",
                                                                                        "index":  0
                                                                                    }
                                                                                ]
                                                                            ]
                                                               },
                        "Upload Speech To S3":  {
                                                    "main":  [
                                                                 [
                                                                     {
                                                                         "node":  "Get duration of voices",
                                                                         "type":  "main",
                                                                         "index":  0
                                                                     }
                                                                 ]
                                                             ]
                                                },
                        "Call Kie Api Kling Model to Generate image to video":  {
                                                                                    "main":  [
                                                                                                 [
                                                                                                     {
                                                                                                         "node":  "Wait 30 sec3",
                                                                                                         "type":  "main",
                                                                                                         "index":  0
                                                                                                     }
                                                                                                 ]
                                                                                             ]
                                                                                },
                        "Prepare Body for Kie API (Kling model to generate video)":  {
                                                                                         "main":  [
                                                                                                      [
                                                                                                          {
                                                                                                              "node":  "Call Kie Api Kling Model to Generate image to video",
                                                                                                              "type":  "main",
                                                                                                              "index":  0
                                                                                                          }
                                                                                                      ]
                                                                                                  ]
                                                                                     },
                        "Get Kie Video Urls":  {
                                                   "main":  [
                                                                [
                                                                    {
                                                                        "node":  "Standerdized Response",
                                                                        "type":  "main",
                                                                        "index":  0
                                                                    }
                                                                ]
                                                            ]
                                               },
                        "Standerdized Response":  {
                                                      "main":  [
                                                                   [
                                                                       {
                                                                           "node":  "If Status is Success Go Otherwise Wait1",
                                                                           "type":  "main",
                                                                           "index":  0
                                                                       }
                                                                   ]
                                                               ]
                                                  },
                        "If Status is Success Go Otherwise Wait1":  {
                                                                        "main":  [
                                                                                     [
                                                                                         {
                                                                                             "node":  "Seprate All Video Urls Generatad from Kei",
                                                                                             "type":  "main",
                                                                                             "index":  0
                                                                                         }
                                                                                     ]
                                                                                 ]
                                                                    },
                        "Get Video from Jsontovideo":  {
                                                           "main":  [
                                                                        [
                                                                            {
                                                                                "node":  "If status is done go otherwise wait",
                                                                                "type":  "main",
                                                                                "index":  0
                                                                            }
                                                                        ]
                                                                    ]
                                                       },
                        "Render Kie videos in json2video (full duration)":  {
                                                                                "main":  [
                                                                                             [
                                                                                                 {
                                                                                                     "node":  "30 sec3",
                                                                                                     "type":  "main",
                                                                                                     "index":  0
                                                                                                 }
                                                                                             ]
                                                                                         ]
                                                                            },
                        "If status is done go otherwise wait":  {
                                                                    "main":  [
                                                                                 [
                                                                                     {
                                                                                         "node":  "Make body for jsontovideo Api to merge videos clips",
                                                                                         "type":  "main",
                                                                                         "index":  0
                                                                                     }
                                                                                 ]
                                                                             ]
                                                                },
                        "Make body for jsontovideo Api to merge videos clips":  {
                                                                                    "main":  [
                                                                                                 [
                                                                                                     {
                                                                                                         "node":  "Call Jsontovideo API to merge clips",
                                                                                                         "type":  "main",
                                                                                                         "index":  0
                                                                                                     }
                                                                                                 ]
                                                                                             ]
                                                                                },
                        "Call Jsontovideo API to merge clips":  {
                                                                    "main":  [
                                                                                 [
                                                                                     {
                                                                                         "node":  "10 sec3",
                                                                                         "type":  "main",
                                                                                         "index":  0
                                                                                     }
                                                                                 ]
                                                                             ]
                                                                },
                        "Get merged video Status":  {
                                                        "main":  [
                                                                     [
                                                                         {
                                                                             "node":  "If status is done go otherwise wait1",
                                                                             "type":  "main",
                                                                             "index":  0
                                                                         }
                                                                     ]
                                                                 ]
                                                    },
                        "If status is done go otherwise wait1":  {
                                                                     "main":  [
                                                                                  [
                                                                                      {
                                                                                          "node":  "prepare body for jsontovideo to set video",
                                                                                          "type":  "main",
                                                                                          "index":  0
                                                                                      }
                                                                                  ]
                                                                              ]
                                                                 },
                        "prepare body for jsontovideo to set video":  {
                                                                          "main":  [
                                                                                       [
                                                                                           {
                                                                                               "node":  "Call Jsontovideo to create task",
                                                                                               "type":  "main",
                                                                                               "index":  0
                                                                                           }
                                                                                       ]
                                                                                   ]
                                                                      },
                        "Call Jsontovideo to create task":  {
                                                                "main":  [
                                                                             [
                                                                                 {
                                                                                     "node":  "30 sec2",
                                                                                     "type":  "main",
                                                                                     "index":  0
                                                                                 }
                                                                             ]
                                                                         ]
                                                            },
                        "Get video status":  {
                                                 "main":  [
                                                              [
                                                                  {
                                                                      "node":  "If Task is Status is done go otherwise wait",
                                                                      "type":  "main",
                                                                      "index":  0
                                                                  }
                                                              ]
                                                          ]
                                             },
                        "If Task is Status is done go otherwise wait":  {
                                                                            "main":  [
                                                                                         [
                                                                                             {
                                                                                                 "node":  "get video metadata to add music",
                                                                                                 "type":  "main",
                                                                                                 "index":  0
                                                                                             }
                                                                                         ]
                                                                                     ]
                                                                        },
                        "get video metadata to add music":  {
                                                                "main":  [
                                                                             [
                                                                                 {
                                                                                     "node":  "Prepare body for jsontovideo to render video",
                                                                                     "type":  "main",
                                                                                     "index":  0
                                                                                 }
                                                                             ]
                                                                         ]
                                                            },
                        "Call jsontovideo to render":  {
                                                           "main":  [
                                                                        [
                                                                            {
                                                                                "node":  "30 sec",
                                                                                "type":  "main",
                                                                                "index":  0
                                                                            }
                                                                        ]
                                                                    ]
                                                       },
                        "if task is done go otherwise wait":  {
                                                                  "main":  [
                                                                               [
                                                                                   {
                                                                                       "node":  "Format variables for final editing1",
                                                                                       "type":  "main",
                                                                                       "index":  0
                                                                                   }
                                                                               ]
                                                                           ]
                                                              },
                        "Prepare body for jsontovideo to render video":  {
                                                                             "main":  [
                                                                                          [
                                                                                              {
                                                                                                  "node":  "Call jsontovideo to render",
                                                                                                  "type":  "main",
                                                                                                  "index":  0
                                                                                              }
                                                                                          ]
                                                                                      ]
                                                                         },
                        "Webhook":  {
                                        "main":  [
                                                     [
                                                         {
                                                             "node":  "Separate image data",
                                                             "type":  "main",
                                                             "index":  0
                                                         },
                                                         {
                                                             "node":  "save execution id to db",
                                                             "type":  "main",
                                                             "index":  0
                                                         }
                                                     ]
                                                 ]
                                    },
                        "Get duration of voices":  {
                                                       "main":  [
                                                                    [
                                                                        {
                                                                            "node":  "Prepare Body for Kie API (Kling model to generate video)",
                                                                            "type":  "main",
                                                                            "index":  0
                                                                        }
                                                                    ]
                                                                ]
                                                   },
                        "Seprate All Video Urls Generatad from Kei":  {
                                                                          "main":  [
                                                                                       [
                                                                                           {
                                                                                               "node":  "Render Kie videos in json2video (full duration)",
                                                                                               "type":  "main",
                                                                                               "index":  0
                                                                                           }
                                                                                       ]
                                                                                   ]
                                                                      }
                    },
    "settings":  {
                     "executionOrder":  "v1",
                     "availableInMCP":  false,
                     "callerPolicy":  "workflowsFromSameOwner"
                 },
    "staticData":  null,
    "meta":  {
                 "templateCredsSetupCompleted":  true
             },
    "pinData":  {
                    "Webhook":  [
                                    {
                                        "json":  {
                                                     "headers":  {
                                                                     "host":  "edgeaimedia.app.n8n.cloud",
                                                                     "user-agent":  "node",
                                                                     "content-length":  "24153",
                                                                     "accept":  "*/*",
                                                                     "accept-encoding":  "gzip, br",
                                                                     "accept-language":  "*",
                                                                     "cdn-loop":  "cloudflare; loops=1; subreqs=1",
                                                                     "cf-connecting-ip":  "44.210.245.92",
                                                                     "cf-ew-via":  "15",
                                                                     "cf-ipcountry":  "US",
                                                                     "cf-ray":  "9bf0c194f5bc1fdd-IAD",
                                                                     "cf-visitor":  "{\"scheme\":\"https\"}",
                                                                     "cf-worker":  "n8n.cloud",
                                                                     "content-type":  "application/json",
                                                                     "sec-fetch-mode":  "cors",
                                                                     "x-forwarded-for":  "44.210.245.92, 172.71.222.40",
                                                                     "x-forwarded-host":  "edgeaimedia.app.n8n.cloud",
                                                                     "x-forwarded-port":  "443",
                                                                     "x-forwarded-proto":  "https",
                                                                     "x-forwarded-server":  "traefik-prod-users-gwc-1-7b58f7489d-nngks",
                                                                     "x-is-trusted":  "yes",
                                                                     "x-real-ip":  "44.210.245.92",
                                                                     "x-vercel-id":  "sfo1::rm2cl-1768599466621-e2ec46ed1527"
                                                                 },
                                                     "params":  {

                                                                },
                                                     "query":  {

                                                               },
                                                     "body":  [
                                                                  {
                                                                      "images":  [
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/suVXcJW7_JrCKhWaaWkzm.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/7BR56WrfEoob2fo6CtpnS.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/jBkB8msCazqDz3BARWsik.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/Hs8tTR-IHtBvI-sAs0tty.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/e-rrXxOTAzu_PQwrzYOH5.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/7XT1Z9SoGuHVkpigZ1lll.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/sRLQjhTArhWb0Orpd_e1W.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/CXNouVR509ExPHR10dQDJ.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/8NNgxdXXPghfVM-tOEoug.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/2L8A5QR_h6scl5H9gszyo.webp"
                                                                                     },
                                                                                     {
                                                                                         "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/29UuIVMJ7l1Nvvf-h3FdQ.webp"
                                                                                     }
                                                                                 ],
                                                                      "imageTiming":  [
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/suVXcJW7_JrCKhWaaWkzm.webp",
                                                                                              "start":  0,
                                                                                              "duration":  0.04,
                                                                                              "fadeIn":  0,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/7BR56WrfEoob2fo6CtpnS.webp",
                                                                                              "start":  0.04,
                                                                                              "duration":  23.78,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/jBkB8msCazqDz3BARWsik.webp",
                                                                                              "start":  23.81,
                                                                                              "duration":  22.55,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/Hs8tTR-IHtBvI-sAs0tty.webp",
                                                                                              "start":  46.36,
                                                                                              "duration":  21.56,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/e-rrXxOTAzu_PQwrzYOH5.webp",
                                                                                              "start":  67.92,
                                                                                              "duration":  23.64,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/7XT1Z9SoGuHVkpigZ1lll.webp",
                                                                                              "start":  91.56,
                                                                                              "duration":  25.38,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/sRLQjhTArhWb0Orpd_e1W.webp",
                                                                                              "start":  116.94,
                                                                                              "duration":  21.76,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/CXNouVR509ExPHR10dQDJ.webp",
                                                                                              "start":  138.69,
                                                                                              "duration":  21.22,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/8NNgxdXXPghfVM-tOEoug.webp",
                                                                                              "start":  159.92,
                                                                                              "duration":  22.26,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/2L8A5QR_h6scl5H9gszyo.webp",
                                                                                              "start":  182.17,
                                                                                              "duration":  22.45,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0.2
                                                                                          },
                                                                                          {
                                                                                              "imageurl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/d7f5b65e-27ba-45f9-87cf-37495ce34917/29UuIVMJ7l1Nvvf-h3FdQ.webp",
                                                                                              "start":  204.63,
                                                                                              "duration":  32.37,
                                                                                              "fadeIn":  0.2,
                                                                                              "fadeOut":  0
                                                                                          }
                                                                                      ],
                                                                      "email":  "shawheendn@gmail.com",
                                                                      "title":  "123 Luxury Lane, Colony Beach",
                                                                      "social_handles":  "@luxuryhomes",
                                                                      "music":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/music/tracks/essence-of-the-past-skygaze-main-version-44169-03-57.mp3",
                                                                      "musicBpm":  98,
                                                                      "musicBeats":  [
                                                                                         0.035,
                                                                                         0.488,
                                                                                         1.126,
                                                                                         1.544,
                                                                                         1.811,
                                                                                         2.334,
                                                                                         2.485,
                                                                                         2.949,
                                                                                         3.1,
                                                                                         3.309,
                                                                                         4.029,
                                                                                         4.296,
                                                                                         4.656,
                                                                                         4.807,
                                                                                         5.097,
                                                                                         5.433,
                                                                                         6.502,
                                                                                         6.769,
                                                                                         7.279,
                                                                                         7.43,
                                                                                         7.581,
                                                                                         7.906,
                                                                                         8.208,
                                                                                         8.359,
                                                                                         8.975,
                                                                                         9.242,
                                                                                         9.892,
                                                                                         10.054,
                                                                                         10.379,
                                                                                         10.542,
                                                                                         10.844,
                                                                                         11.447,
                                                                                         11.749,
                                                                                         12.225,
                                                                                         12.376,
                                                                                         12.725,
                                                                                         12.852,
                                                                                         13.003,
                                                                                         13.212,
                                                                                         13.92,
                                                                                         14.176,
                                                                                         14.71,
                                                                                         15.325,
                                                                                         15.476,
                                                                                         15.801,
                                                                                         16.103,
                                                                                         16.393,
                                                                                         16.672,
                                                                                         17.183,
                                                                                         17.798,
                                                                                         17.949,
                                                                                         18.1,
                                                                                         18.251,
                                                                                         18.564,
                                                                                         18.715,
                                                                                         18.866,
                                                                                         19.029,
                                                                                         19.18,
                                                                                         19.412,
                                                                                         19.598,
                                                                                         19.795,
                                                                                         20.027,
                                                                                         20.283,
                                                                                         20.747,
                                                                                         21.095,
                                                                                         21.351,
                                                                                         21.618,
                                                                                         21.896,
                                                                                         22.129,
                                                                                         22.28,
                                                                                         22.442,
                                                                                         22.744,
                                                                                         23.812,
                                                                                         24.079,
                                                                                         24.253,
                                                                                         24.358,
                                                                                         24.543,
                                                                                         24.752,
                                                                                         24.903,
                                                                                         25.228,
                                                                                         25.693,
                                                                                         25.879,
                                                                                         26.297,
                                                                                         26.564,
                                                                                         26.947,
                                                                                         27.074,
                                                                                         27.225,
                                                                                         27.701,
                                                                                         28.003,
                                                                                         28.154,
                                                                                         28.317,
                                                                                         28.491,
                                                                                         28.77,
                                                                                         29.037,
                                                                                         29.396,
                                                                                         29.617,
                                                                                         29.838,
                                                                                         30.174,
                                                                                         30.639,
                                                                                         31.254,
                                                                                         31.509,
                                                                                         31.846,
                                                                                         32.032,
                                                                                         32.647,
                                                                                         33.054,
                                                                                         33.448,
                                                                                         33.715,
                                                                                         33.994,
                                                                                         34.157,
                                                                                         34.493,
                                                                                         34.644,
                                                                                         34.865,
                                                                                         35.12,
                                                                                         35.48,
                                                                                         35.585,
                                                                                         35.828,
                                                                                         36.188,
                                                                                         36.455,
                                                                                         36.641,
                                                                                         36.978,
                                                                                         37.28,
                                                                                         37.593,
                                                                                         38.092,
                                                                                         38.208,
                                                                                         38.359,
                                                                                         38.708,
                                                                                         38.835,
                                                                                         38.998,
                                                                                         39.311,
                                                                                         39.578,
                                                                                         39.741,
                                                                                         39.938,
                                                                                         40.205,
                                                                                         40.414,
                                                                                         40.554,
                                                                                         40.716,
                                                                                         41.03,
                                                                                         41.297,
                                                                                         41.436,
                                                                                         41.622,
                                                                                         41.749,
                                                                                         41.935,
                                                                                         42.388,
                                                                                         42.539,
                                                                                         42.69,
                                                                                         42.876,
                                                                                         43.166,
                                                                                         43.619,
                                                                                         43.77,
                                                                                         43.932,
                                                                                         44.118,
                                                                                         44.222,
                                                                                         44.408,
                                                                                         44.547,
                                                                                         44.768,
                                                                                         45.023,
                                                                                         45.407,
                                                                                         45.639,
                                                                                         45.79,
                                                                                         45.976,
                                                                                         46.347,
                                                                                         46.51,
                                                                                         46.695,
                                                                                         46.858,
                                                                                         47.009,
                                                                                         47.148,
                                                                                         47.345,
                                                                                         47.496,
                                                                                         47.636,
                                                                                         47.798,
                                                                                         47.949,
                                                                                         48.123,
                                                                                         48.274,
                                                                                         48.565,
                                                                                         48.82,
                                                                                         48.982,
                                                                                         49.168,
                                                                                         49.389,
                                                                                         49.493,
                                                                                         49.842,
                                                                                         50.109,
                                                                                         50.306,
                                                                                         50.445,
                                                                                         50.608,
                                                                                         50.921,
                                                                                         51.049,
                                                                                         51.328,
                                                                                         51.525,
                                                                                         51.653,
                                                                                         51.815,
                                                                                         52.094,
                                                                                         52.28,
                                                                                         52.442,
                                                                                         52.767,
                                                                                         53.069,
                                                                                         53.51,
                                                                                         53.673,
                                                                                         53.835,
                                                                                         54.114,
                                                                                         54.3,
                                                                                         54.439,
                                                                                         54.671,
                                                                                         54.915,
                                                                                         55.182,
                                                                                         55.356,
                                                                                         55.542,
                                                                                         55.693,
                                                                                         55.867,
                                                                                         56.25,
                                                                                         56.494,
                                                                                         56.622,
                                                                                         56.784,
                                                                                         57.051,
                                                                                         57.237,
                                                                                         57.388,
                                                                                         57.702,
                                                                                         57.98,
                                                                                         58.166,
                                                                                         58.468,
                                                                                         58.77,
                                                                                         58.979,
                                                                                         59.176,
                                                                                         59.42,
                                                                                         59.733,
                                                                                         60.012,
                                                                                         60.209,
                                                                                         60.349,
                                                                                         60.511,
                                                                                         60.825,
                                                                                         61.092,
                                                                                         61.219,
                                                                                         61.428,
                                                                                         61.544,
                                                                                         61.707,
                                                                                         61.858,
                                                                                         61.997,
                                                                                         62.171,
                                                                                         62.346,
                                                                                         62.81,
                                                                                         62.961,
                                                                                         63.112,
                                                                                         63.263,
                                                                                         63.414,
                                                                                         63.576,
                                                                                         63.925,
                                                                                         64.052,
                                                                                         64.192,
                                                                                         64.342,
                                                                                         64.563,
                                                                                         64.807,
                                                                                         65.26,
                                                                                         65.434,
                                                                                         65.585,
                                                                                         65.771,
                                                                                         66.142,
                                                                                         66.386,
                                                                                         66.514,
                                                                                         66.653,
                                                                                         66.804,
                                                                                         66.943,
                                                                                         67.14,
                                                                                         67.291,
                                                                                         67.419,
                                                                                         67.593,
                                                                                         67.744,
                                                                                         67.918,
                                                                                         68.209,
                                                                                         68.36,
                                                                                         68.615,
                                                                                         68.847,
                                                                                         68.975,
                                                                                         69.184,
                                                                                         69.288,
                                                                                         69.637,
                                                                                         69.892,
                                                                                         70.101,
                                                                                         70.229,
                                                                                         70.403,
                                                                                         70.716,
                                                                                         71.088,
                                                                                         71.436,
                                                                                         71.61,
                                                                                         71.889,
                                                                                         72.075,
                                                                                         72.237,
                                                                                         72.539,
                                                                                         72.69,
                                                                                         72.853,
                                                                                         73.004,
                                                                                         73.305,
                                                                                         73.468,
                                                                                         73.619,
                                                                                         73.805,
                                                                                         74.095,
                                                                                         74.466,
                                                                                         74.606,
                                                                                         74.71,
                                                                                         74.838,
                                                                                         75.047,
                                                                                         75.198,
                                                                                         75.337,
                                                                                         75.488,
                                                                                         75.662,
                                                                                         75.79,
                                                                                         76.045,
                                                                                         76.347,
                                                                                         76.568,
                                                                                         76.8,
                                                                                         77.032,
                                                                                         77.183,
                                                                                         77.485,
                                                                                         77.636,
                                                                                         77.81,
                                                                                         78.1,
                                                                                         78.263,
                                                                                         78.425,
                                                                                         78.681,
                                                                                         78.878,
                                                                                         79.029,
                                                                                         79.18,
                                                                                         79.401,
                                                                                         79.842,
                                                                                         80.422,
                                                                                         80.631,
                                                                                         80.933,
                                                                                         81.165,
                                                                                         81.374,
                                                                                         81.525,
                                                                                         81.653,
                                                                                         81.874,
                                                                                         82.617,
                                                                                         82.86,
                                                                                         83.22,
                                                                                         83.394,
                                                                                         83.511,
                                                                                         83.731,
                                                                                         83.917,
                                                                                         84.126,
                                                                                         84.358,
                                                                                         84.544,
                                                                                         84.822,
                                                                                         84.973,
                                                                                         85.368,
                                                                                         85.879,
                                                                                         86.053,
                                                                                         86.169,
                                                                                         86.332,
                                                                                         86.494,
                                                                                         86.599,
                                                                                         86.785,
                                                                                         86.994,
                                                                                         87.226,
                                                                                         87.818,
                                                                                         88.131,
                                                                                         88.921,
                                                                                         89.083,
                                                                                         89.269,
                                                                                         89.513,
                                                                                         89.664,
                                                                                         90.314,
                                                                                         90.5,
                                                                                         90.651,
                                                                                         90.848,
                                                                                         91.138,
                                                                                         91.405,
                                                                                         91.556,
                                                                                         91.777,
                                                                                         91.963,
                                                                                         92.764,
                                                                                         93.158,
                                                                                         93.484,
                                                                                         94.018,
                                                                                         94.25,
                                                                                         94.401,
                                                                                         94.586,
                                                                                         94.854,
                                                                                         95.26,
                                                                                         95.457,
                                                                                         95.573,
                                                                                         95.759,
                                                                                         96.061,
                                                                                         96.223,
                                                                                         96.398,
                                                                                         96.502,
                                                                                         96.943,
                                                                                         97.141,
                                                                                         97.57,
                                                                                         97.71,
                                                                                         98.604,
                                                                                         98.905,
                                                                                         99.161,
                                                                                         99.602,
                                                                                         100.02,
                                                                                         100.159,
                                                                                         100.542,
                                                                                         100.728,
                                                                                         101.042,
                                                                                         101.158,
                                                                                         101.297,
                                                                                         101.46,
                                                                                         102.005,
                                                                                         102.423,
                                                                                         102.563,
                                                                                         102.667,
                                                                                         102.911,
                                                                                         103.306,
                                                                                         103.607,
                                                                                         103.77,
                                                                                         103.921,
                                                                                         104.234,
                                                                                         104.559,
                                                                                         104.896,
                                                                                         105.035,
                                                                                         105.14,
                                                                                         105.465,
                                                                                         105.674,
                                                                                         105.964,
                                                                                         106.08,
                                                                                         106.243,
                                                                                         106.405,
                                                                                         106.568,
                                                                                         106.951,
                                                                                         107.497,
                                                                                         108.553,
                                                                                         108.797,
                                                                                         109.029,
                                                                                         109.273,
                                                                                         109.517,
                                                                                         109.993,
                                                                                         110.597,
                                                                                         110.794,
                                                                                         111.061,
                                                                                         111.212,
                                                                                         111.502,
                                                                                         111.909,
                                                                                         112.443,
                                                                                         112.64,
                                                                                         112.942,
                                                                                         113.104,
                                                                                         113.267,
                                                                                         113.499,
                                                                                         113.824,
                                                                                         114.37,
                                                                                         114.753,
                                                                                         114.927,
                                                                                         115.554,
                                                                                         115.717,
                                                                                         115.868,
                                                                                         116.042,
                                                                                         116.146,
                                                                                         116.425,
                                                                                         116.912,
                                                                                         117.388,
                                                                                         117.621,
                                                                                         117.841,
                                                                                         117.992,
                                                                                         118.143,
                                                                                         118.306,
                                                                                         118.457,
                                                                                         118.619,
                                                                                         118.782,
                                                                                         119.246,
                                                                                         119.397,
                                                                                         119.501,
                                                                                         119.722,
                                                                                         119.885,
                                                                                         120.303,
                                                                                         120.477,
                                                                                         120.593,
                                                                                         120.79,
                                                                                         121.092,
                                                                                         121.243,
                                                                                         121.406,
                                                                                         121.719,
                                                                                         121.87,
                                                                                         122.346,
                                                                                         122.532,
                                                                                         122.799,
                                                                                         123.066,
                                                                                         123.333,
                                                                                         123.519,
                                                                                         123.716,
                                                                                         123.902,
                                                                                         124.192,
                                                                                         124.471,
                                                                                         124.807,
                                                                                         124.981,
                                                                                         125.272,
                                                                                         125.527,
                                                                                         125.771,
                                                                                         125.933,
                                                                                         126.189,
                                                                                         126.665,
                                                                                         126.978,
                                                                                         127.303,
                                                                                         127.745,
                                                                                         128.012,
                                                                                         128.372,
                                                                                         128.604,
                                                                                         128.836,
                                                                                         129.149,
                                                                                         129.393,
                                                                                         129.776,
                                                                                         129.95,
                                                                                         130.218,
                                                                                         130.485,
                                                                                         130.647,
                                                                                         130.786,
                                                                                         130.995,
                                                                                         131.146,
                                                                                         131.309,
                                                                                         131.622,
                                                                                         131.901,
                                                                                         132.238,
                                                                                         132.447,
                                                                                         132.69,
                                                                                         132.957,
                                                                                         133.108,
                                                                                         133.317,
                                                                                         133.468,
                                                                                         133.782,
                                                                                         134.095,
                                                                                         134.362,
                                                                                         134.711,
                                                                                         134.885,
                                                                                         135.163,
                                                                                         135.419,
                                                                                         135.686,
                                                                                         135.825,
                                                                                         135.941,
                                                                                         136.092,
                                                                                         136.255,
                                                                                         136.568,
                                                                                         136.87,
                                                                                         137.183,
                                                                                         137.485,
                                                                                         137.799,
                                                                                         137.95,
                                                                                         138.054,
                                                                                         138.17,
                                                                                         138.379,
                                                                                         138.6,
                                                                                         139.192,
                                                                                         139.389,
                                                                                         139.819,
                                                                                         140.121,
                                                                                         140.411,
                                                                                         140.585,
                                                                                         140.725,
                                                                                         140.91,
                                                                                         141.038,
                                                                                         141.305,
                                                                                         141.514,
                                                                                         141.758,
                                                                                         141.967,
                                                                                         142.292,
                                                                                         142.582,
                                                                                         142.756,
                                                                                         143,
                                                                                         143.197,
                                                                                         143.314,
                                                                                         143.511,
                                                                                         143.662,
                                                                                         143.987,
                                                                                         144.242,
                                                                                         144.44,
                                                                                         144.776,
                                                                                         145.067,
                                                                                         145.241,
                                                                                         145.38,
                                                                                         145.485,
                                                                                         145.659,
                                                                                         145.856,
                                                                                         145.984,
                                                                                         146.158,
                                                                                         146.46,
                                                                                         146.773,
                                                                                         146.924,
                                                                                         147.145,
                                                                                         147.249,
                                                                                         147.435,
                                                                                         147.54,
                                                                                         147.795,
                                                                                         147.958,
                                                                                         148.143,
                                                                                         148.387,
                                                                                         148.77,
                                                                                         148.944,
                                                                                         149.188,
                                                                                         149.397,
                                                                                         149.56,
                                                                                         149.711,
                                                                                         150.013,
                                                                                         150.163,
                                                                                         150.326,
                                                                                         150.616,
                                                                                         150.802,
                                                                                         150.93,
                                                                                         151.197,
                                                                                         151.406,
                                                                                         151.557,
                                                                                         151.719,
                                                                                         151.87,
                                                                                         152.091,
                                                                                         152.485,
                                                                                         152.648,
                                                                                         152.787,
                                                                                         153.089,
                                                                                         153.414,
                                                                                         153.786,
                                                                                         153.89,
                                                                                         154.03,
                                                                                         154.343,
                                                                                         154.622,
                                                                                         154.97,
                                                                                         155.214,
                                                                                         155.376,
                                                                                         155.562,
                                                                                         155.759,
                                                                                         155.887,
                                                                                         156.038,
                                                                                         156.352,
                                                                                         156.665,
                                                                                         156.816,
                                                                                         156.979,
                                                                                         157.141,
                                                                                         157.431,
                                                                                         157.687,
                                                                                         158.047,
                                                                                         158.209,
                                                                                         158.372,
                                                                                         158.523,
                                                                                         158.778,
                                                                                         158.975,
                                                                                         159.173,
                                                                                         159.3,
                                                                                         159.602,
                                                                                         159.916,
                                                                                         160.067,
                                                                                         160.218,
                                                                                         160.334,
                                                                                         160.52,
                                                                                         160.705,
                                                                                         160.833,
                                                                                         161.03,
                                                                                         161.135,
                                                                                         161.309,
                                                                                         161.564,
                                                                                         161.762,
                                                                                         162.099,
                                                                                         162.377,
                                                                                         162.644,
                                                                                         163.016,
                                                                                         163.167,
                                                                                         163.306,
                                                                                         163.782,
                                                                                         164.037,
                                                                                         164.235,
                                                                                         164.571,
                                                                                         164.862,
                                                                                         165.013,
                                                                                         165.175,
                                                                                         165.28,
                                                                                         165.454,
                                                                                         165.64,
                                                                                         165.941,
                                                                                         166.046,
                                                                                         166.255,
                                                                                         166.406,
                                                                                         166.568,
                                                                                         166.94,
                                                                                         167.195,
                                                                                         167.335,
                                                                                         167.59,
                                                                                         167.938,
                                                                                         168.194,
                                                                                         168.728,
                                                                                         168.972,
                                                                                         169.192,
                                                                                         169.506,
                                                                                         169.715,
                                                                                         169.819,
                                                                                         170.063,
                                                                                         170.411,
                                                                                         170.597,
                                                                                         170.887,
                                                                                         171.201,
                                                                                         171.514,
                                                                                         171.99,
                                                                                         172.28,
                                                                                         172.547,
                                                                                         172.838,
                                                                                         173.116,
                                                                                         173.441,
                                                                                         173.685,
                                                                                         173.952,
                                                                                         174.138,
                                                                                         174.463,
                                                                                         174.765,
                                                                                         174.997,
                                                                                         175.171,
                                                                                         175.357,
                                                                                         175.543,
                                                                                         175.903,
                                                                                         176.147,
                                                                                         176.472,
                                                                                         176.774,
                                                                                         176.936,
                                                                                         177.226,
                                                                                         177.482,
                                                                                         177.784,
                                                                                         178.085,
                                                                                         178.306,
                                                                                         178.515,
                                                                                         178.678,
                                                                                         178.91,
                                                                                         179.084,
                                                                                         179.711,
                                                                                         179.862,
                                                                                         180.024,
                                                                                         180.233,
                                                                                         180.489,
                                                                                         180.849,
                                                                                         181.104,
                                                                                         181.406,
                                                                                         181.847,
                                                                                         182.172,
                                                                                         182.346,
                                                                                         182.613,
                                                                                         182.892,
                                                                                         183.101,
                                                                                         183.275,
                                                                                         183.577,
                                                                                         183.844,
                                                                                         184.018,
                                                                                         184.355,
                                                                                         184.645,
                                                                                         184.831,
                                                                                         184.935,
                                                                                         185.075,
                                                                                         185.318,
                                                                                         185.435,
                                                                                         185.574,
                                                                                         186.05,
                                                                                         186.352,
                                                                                         186.503,
                                                                                         187.13,
                                                                                         187.385,
                                                                                         187.71,
                                                                                         187.977,
                                                                                         188.267,
                                                                                         188.534,
                                                                                         188.976,
                                                                                         189.127,
                                                                                         189.347,
                                                                                         189.603,
                                                                                         189.812,
                                                                                         190.02,
                                                                                         190.218,
                                                                                         190.38,
                                                                                         190.729,
                                                                                         190.996,
                                                                                         191.309,
                                                                                         191.634,
                                                                                         191.82,
                                                                                         192.075,
                                                                                         192.342,
                                                                                         192.993,
                                                                                         193.155,
                                                                                         193.469,
                                                                                         193.771,
                                                                                         193.933,
                                                                                         194.258,
                                                                                         194.548,
                                                                                         194.746,
                                                                                         194.978,
                                                                                         195.21,
                                                                                         195.466,
                                                                                         195.686,
                                                                                         195.942,
                                                                                         196.255,
                                                                                         196.406,
                                                                                         196.615,
                                                                                         196.789,
                                                                                         197.01,
                                                                                         197.242,
                                                                                         197.648,
                                                                                         197.973,
                                                                                         198.275,
                                                                                         198.623,
                                                                                         198.867,
                                                                                         199.076,
                                                                                         199.517,
                                                                                         199.703,
                                                                                         199.982,
                                                                                         200.156,
                                                                                         200.342,
                                                                                         200.539,
                                                                                         200.725,
                                                                                         201.096,
                                                                                         201.247,
                                                                                         201.689,
                                                                                         201.979,
                                                                                         202.269,
                                                                                         202.513,
                                                                                         202.687,
                                                                                         202.838,
                                                                                         203.012,
                                                                                         203.233,
                                                                                         203.523,
                                                                                         203.732,
                                                                                         204.185,
                                                                                         204.626,
                                                                                         204.928,
                                                                                         205.079,
                                                                                         205.253,
                                                                                         205.543,
                                                                                         205.682,
                                                                                         205.938,
                                                                                         206.925,
                                                                                         207.691,
                                                                                         207.911,
                                                                                         208.12,
                                                                                         208.434,
                                                                                         208.62,
                                                                                         209.293,
                                                                                         209.409,
                                                                                         209.618,
                                                                                         209.746,
                                                                                         209.897,
                                                                                         210.164,
                                                                                         210.408,
                                                                                         210.721,
                                                                                         210.942,
                                                                                         211.267,
                                                                                         211.534,
                                                                                         211.87,
                                                                                         212.242,
                                                                                         212.637,
                                                                                         212.811,
                                                                                         213.159,
                                                                                         213.345,
                                                                                         213.531,
                                                                                         213.705,
                                                                                         213.891,
                                                                                         214.088,
                                                                                         214.332,
                                                                                         214.529,
                                                                                         214.819,
                                                                                         214.982,
                                                                                         215.121,
                                                                                         215.435,
                                                                                         215.586,
                                                                                         215.911,
                                                                                         216.329,
                                                                                         217.374,
                                                                                         217.513,
                                                                                         217.664,
                                                                                         217.873,
                                                                                         218.233,
                                                                                         218.593,
                                                                                         218.883,
                                                                                         219.498,
                                                                                         219.8,
                                                                                         220.067,
                                                                                         220.218,
                                                                                         220.473,
                                                                                         220.752,
                                                                                         221.217,
                                                                                         221.379,
                                                                                         222.064,
                                                                                         222.319,
                                                                                         222.482,
                                                                                         222.633,
                                                                                         222.807,
                                                                                         223.132,
                                                                                         223.388,
                                                                                         223.666,
                                                                                         224.432,
                                                                                         224.583,
                                                                                         224.723,
                                                                                         224.874,
                                                                                         225.048,
                                                                                         225.199,
                                                                                         225.57,
                                                                                         225.965,
                                                                                         226.418,
                                                                                         227.428,
                                                                                         227.556,
                                                                                         227.706,
                                                                                         227.997,
                                                                                         228.229,
                                                                                         229.204,
                                                                                         229.413,
                                                                                         229.692,
                                                                                         229.959,
                                                                                         230.11,
                                                                                         230.516,
                                                                                         231.41,
                                                                                         231.724,
                                                                                         232.037,
                                                                                         232.455,
                                                                                         232.629,
                                                                                         232.954,
                                                                                         234.359
                                                                                     ],
                                                                      "musicSnareHits":  [
                                                                                             0.035,
                                                                                             0.488,
                                                                                             1.126,
                                                                                             1.544,
                                                                                             1.811,
                                                                                             2.334,
                                                                                             2.949,
                                                                                             3.1,
                                                                                             4.029,
                                                                                             4.296,
                                                                                             4.807,
                                                                                             5.433,
                                                                                             6.502,
                                                                                             6.769,
                                                                                             7.279,
                                                                                             7.43,
                                                                                             7.906,
                                                                                             8.208,
                                                                                             8.359,
                                                                                             8.975,
                                                                                             9.242,
                                                                                             9.892,
                                                                                             10.066,
                                                                                             10.379,
                                                                                             11.447,
                                                                                             11.749,
                                                                                             12.225,
                                                                                             12.376,
                                                                                             12.852,
                                                                                             13.92,
                                                                                             14.176,
                                                                                             14.71,
                                                                                             15.325,
                                                                                             16.393,
                                                                                             16.672,
                                                                                             17.183,
                                                                                             17.798,
                                                                                             18.1,
                                                                                             18.251,
                                                                                             18.564,
                                                                                             18.715,
                                                                                             18.866,
                                                                                             19.029,
                                                                                             19.18,
                                                                                             19.412,
                                                                                             19.609,
                                                                                             19.807,
                                                                                             20.283,
                                                                                             20.747,
                                                                                             21.351,
                                                                                             21.618,
                                                                                             22.129,
                                                                                             22.744,
                                                                                             23.812,
                                                                                             24.079,
                                                                                             24.358,
                                                                                             24.543,
                                                                                             24.752,
                                                                                             25.228,
                                                                                             25.693,
                                                                                             26.297,
                                                                                             26.564,
                                                                                             27.074,
                                                                                             27.225,
                                                                                             27.701,
                                                                                             28.003,
                                                                                             28.154,
                                                                                             28.77,
                                                                                             29.037,
                                                                                             29.396,
                                                                                             29.617,
                                                                                             29.838,
                                                                                             30.174,
                                                                                             30.65,
                                                                                             31.254,
                                                                                             31.509,
                                                                                             32.032,
                                                                                             32.647,
                                                                                             33.448,
                                                                                             33.715,
                                                                                             33.994,
                                                                                             34.168,
                                                                                             34.493,
                                                                                             34.644,
                                                                                             35.12,
                                                                                             35.585,
                                                                                             36.188,
                                                                                             36.455,
                                                                                             36.978,
                                                                                             37.593,
                                                                                             38.092,
                                                                                             38.359,
                                                                                             38.708,
                                                                                             39.578,
                                                                                             39.741,
                                                                                             39.938,
                                                                                             40.205,
                                                                                             40.554,
                                                                                             40.716,
                                                                                             41.03,
                                                                                             41.297,
                                                                                             41.622,
                                                                                             41.773,
                                                                                             41.947,
                                                                                             42.388,
                                                                                             42.539,
                                                                                             42.876,
                                                                                             43.166,
                                                                                             43.619,
                                                                                             43.77,
                                                                                             43.932,
                                                                                             44.118,
                                                                                             44.292,
                                                                                             44.547,
                                                                                             44.768,
                                                                                             45.023,
                                                                                             45.465,
                                                                                             45.639,
                                                                                             45.79,
                                                                                             45.976,
                                                                                             46.359,
                                                                                             46.591,
                                                                                             46.858,
                                                                                             47.009,
                                                                                             47.345,
                                                                                             47.496,
                                                                                             47.798,
                                                                                             48.123,
                                                                                             48.274,
                                                                                             48.565,
                                                                                             48.82,
                                                                                             49.168,
                                                                                             49.493,
                                                                                             49.842,
                                                                                             50.109,
                                                                                             50.445,
                                                                                             50.608,
                                                                                             50.921,
                                                                                             51.328,
                                                                                             51.525,
                                                                                             51.815,
                                                                                             52.28,
                                                                                             52.442,
                                                                                             52.767,
                                                                                             53.069,
                                                                                             53.51,
                                                                                             53.673,
                                                                                             53.835,
                                                                                             54.184,
                                                                                             54.439,
                                                                                             54.671,
                                                                                             54.915,
                                                                                             55.356,
                                                                                             55.542,
                                                                                             55.693,
                                                                                             55.879,
                                                                                             56.25,
                                                                                             56.622,
                                                                                             56.784,
                                                                                             57.237,
                                                                                             57.388,
                                                                                             57.702,
                                                                                             58.015,
                                                                                             58.166,
                                                                                             58.468,
                                                                                             58.77,
                                                                                             58.979,
                                                                                             59.176,
                                                                                             59.455,
                                                                                             59.733,
                                                                                             60.012,
                                                                                             60.349,
                                                                                             60.511,
                                                                                             60.825,
                                                                                             61.092,
                                                                                             61.428,
                                                                                             61.707,
                                                                                             61.858,
                                                                                             62.183,
                                                                                             62.346,
                                                                                             62.81,
                                                                                             62.961,
                                                                                             63.112,
                                                                                             63.414,
                                                                                             63.576,
                                                                                             63.925,
                                                                                             64.192,
                                                                                             64.342,
                                                                                             64.563,
                                                                                             64.807,
                                                                                             65.26,
                                                                                             65.434,
                                                                                             65.585,
                                                                                             65.771,
                                                                                             66.154,
                                                                                             66.386,
                                                                                             66.653,
                                                                                             66.804,
                                                                                             67.14,
                                                                                             67.419,
                                                                                             67.593,
                                                                                             67.918,
                                                                                             68.36,
                                                                                             68.65,
                                                                                             68.847,
                                                                                             69.288,
                                                                                             69.637,
                                                                                             69.892,
                                                                                             70.229,
                                                                                             70.403,
                                                                                             70.716,
                                                                                             71.088,
                                                                                             71.459,
                                                                                             71.61,
                                                                                             72.075,
                                                                                             72.237,
                                                                                             72.539,
                                                                                             72.69,
                                                                                             72.853,
                                                                                             73.004,
                                                                                             73.305,
                                                                                             73.468,
                                                                                             73.619,
                                                                                             73.805,
                                                                                             74.095,
                                                                                             74.606,
                                                                                             74.838,
                                                                                             75.047,
                                                                                             75.198,
                                                                                             75.372,
                                                                                             75.662,
                                                                                             76.045,
                                                                                             76.347,
                                                                                             76.568,
                                                                                             77.032,
                                                                                             77.183,
                                                                                             77.485,
                                                                                             77.636,
                                                                                             77.81,
                                                                                             78.263,
                                                                                             78.425,
                                                                                             78.681,
                                                                                             78.878,
                                                                                             79.029,
                                                                                             79.18,
                                                                                             79.401,
                                                                                             80.422,
                                                                                             80.631,
                                                                                             80.933,
                                                                                             81.212,
                                                                                             81.653,
                                                                                             82.617,
                                                                                             82.86,
                                                                                             83.22,
                                                                                             83.511,
                                                                                             83.731,
                                                                                             83.917,
                                                                                             84.126,
                                                                                             84.358,
                                                                                             85.368,
                                                                                             85.879,
                                                                                             86.053,
                                                                                             86.332,
                                                                                             86.599,
                                                                                             86.785,
                                                                                             86.994,
                                                                                             87.818,
                                                                                             89.002,
                                                                                             89.269,
                                                                                             89.664,
                                                                                             90.314,
                                                                                             90.651,
                                                                                             90.848,
                                                                                             91.556,
                                                                                             92.764,
                                                                                             93.158,
                                                                                             93.484,
                                                                                             94.018,
                                                                                             94.25,
                                                                                             94.633,
                                                                                             95.26,
                                                                                             95.573,
                                                                                             95.759,
                                                                                             96.223,
                                                                                             96.502,
                                                                                             97.71,
                                                                                             98.673,
                                                                                             98.905,
                                                                                             99.161,
                                                                                             99.614,
                                                                                             100.159,
                                                                                             100.542,
                                                                                             100.728,
                                                                                             101.158,
                                                                                             101.309,
                                                                                             101.46,
                                                                                             102.005,
                                                                                             102.563,
                                                                                             102.911,
                                                                                             103.306,
                                                                                             103.642,
                                                                                             103.921,
                                                                                             104.571,
                                                                                             105.035,
                                                                                             105.674,
                                                                                             106.08,
                                                                                             106.243,
                                                                                             106.405,
                                                                                             106.951,
                                                                                             107.578,
                                                                                             108.553,
                                                                                             108.797,
                                                                                             109.529,
                                                                                             110.051,
                                                                                             111.061,
                                                                                             111.212,
                                                                                             111.909,
                                                                                             112.454,
                                                                                             112.953,
                                                                                             113.104,
                                                                                             113.279,
                                                                                             113.499,
                                                                                             113.824,
                                                                                             114.37,
                                                                                             114.753,
                                                                                             114.939,
                                                                                             115.554,
                                                                                             115.868,
                                                                                             116.146,
                                                                                             116.936,
                                                                                             117.388,
                                                                                             117.69,
                                                                                             117.841,
                                                                                             117.992,
                                                                                             118.143,
                                                                                             118.306,
                                                                                             118.457,
                                                                                             118.619,
                                                                                             118.782,
                                                                                             119.246,
                                                                                             119.501,
                                                                                             119.722,
                                                                                             119.885,
                                                                                             120.314,
                                                                                             120.477,
                                                                                             120.628,
                                                                                             120.802,
                                                                                             121.104,
                                                                                             121.719,
                                                                                             122.346,
                                                                                             122.799,
                                                                                             123.066,
                                                                                             123.333,
                                                                                             123.519,
                                                                                             123.716,
                                                                                             123.902,
                                                                                             124.192,
                                                                                             124.471,
                                                                                             124.819,
                                                                                             125.063,
                                                                                             125.272,
                                                                                             125.527,
                                                                                             125.771,
                                                                                             125.933,
                                                                                             126.189,
                                                                                             126.665,
                                                                                             126.978,
                                                                                             127.303,
                                                                                             127.745,
                                                                                             128.012,
                                                                                             128.372,
                                                                                             128.604,
                                                                                             128.859,
                                                                                             129.149,
                                                                                             129.776,
                                                                                             130.218,
                                                                                             130.485,
                                                                                             130.647,
                                                                                             131.007,
                                                                                             131.367,
                                                                                             131.622,
                                                                                             131.901,
                                                                                             132.261,
                                                                                             132.447,
                                                                                             132.69,
                                                                                             132.957,
                                                                                             133.108,
                                                                                             133.317,
                                                                                             133.468,
                                                                                             133.782,
                                                                                             134.095,
                                                                                             134.722,
                                                                                             135.163,
                                                                                             135.419,
                                                                                             135.825,
                                                                                             136.092,
                                                                                             136.29,
                                                                                             136.568,
                                                                                             136.87,
                                                                                             137.183,
                                                                                             137.799,
                                                                                             138.054,
                                                                                             138.263,
                                                                                             138.472,
                                                                                             138.693,
                                                                                             139.192,
                                                                                             139.413,
                                                                                             140.121,
                                                                                             140.434,
                                                                                             140.585,
                                                                                             140.783,
                                                                                             141.038,
                                                                                             141.305,
                                                                                             141.514,
                                                                                             142.013,
                                                                                             142.327,
                                                                                             142.594,
                                                                                             142.756,
                                                                                             143.314,
                                                                                             143.511,
                                                                                             143.662,
                                                                                             143.987,
                                                                                             144.254,
                                                                                             144.486,
                                                                                             144.776,
                                                                                             145.067,
                                                                                             145.241,
                                                                                             145.485,
                                                                                             145.717,
                                                                                             145.984,
                                                                                             146.158,
                                                                                             146.46,
                                                                                             146.773,
                                                                                             147.249,
                                                                                             147.54,
                                                                                             147.83,
                                                                                             148.143,
                                                                                             148.387,
                                                                                             148.944,
                                                                                             149.432,
                                                                                             149.734,
                                                                                             150.013,
                                                                                             150.163,
                                                                                             150.326,
                                                                                             150.686,
                                                                                             150.93,
                                                                                             151.406,
                                                                                             151.719,
                                                                                             151.87,
                                                                                             152.091,
                                                                                             152.485,
                                                                                             152.648,
                                                                                             153.159,
                                                                                             153.414,
                                                                                             153.89,
                                                                                             154.378,
                                                                                             154.68,
                                                                                             154.97,
                                                                                             155.214,
                                                                                             155.376,
                                                                                             155.609,
                                                                                             155.887,
                                                                                             156.038,
                                                                                             156.352,
                                                                                             156.665,
                                                                                             156.816,
                                                                                             157.071,
                                                                                             157.431,
                                                                                             157.733,
                                                                                             158.047,
                                                                                             158.209,
                                                                                             158.372,
                                                                                             158.523,
                                                                                             158.975,
                                                                                             159.3,
                                                                                             159.916,
                                                                                             160.067,
                                                                                             160.334,
                                                                                             160.566,
                                                                                             160.833,
                                                                                             161.03,
                                                                                             161.309,
                                                                                             161.564,
                                                                                             161.808,
                                                                                             162.099,
                                                                                             162.377,
                                                                                             162.644,
                                                                                             163.027,
                                                                                             163.306,
                                                                                             163.782,
                                                                                             164.049,
                                                                                             164.235,
                                                                                             164.571,
                                                                                             164.862,
                                                                                             165.013,
                                                                                             165.28,
                                                                                             165.454,
                                                                                             165.64,
                                                                                             165.941,
                                                                                             166.255,
                                                                                             166.568,
                                                                                             166.94,
                                                                                             167.335,
                                                                                             167.59,
                                                                                             167.938,
                                                                                             168.194,
                                                                                             168.728,
                                                                                             169.204,
                                                                                             169.715,
                                                                                             170.098,
                                                                                             170.423,
                                                                                             170.597,
                                                                                             170.945,
                                                                                             171.201,
                                                                                             171.514,
                                                                                             171.99,
                                                                                             172.28,
                                                                                             172.547,
                                                                                             173.209,
                                                                                             173.685,
                                                                                             173.952,
                                                                                             174.173,
                                                                                             174.463,
                                                                                             174.765,
                                                                                             175.02,
                                                                                             175.543,
                                                                                             176.147,
                                                                                             176.472,
                                                                                             176.936,
                                                                                             177.226,
                                                                                             177.54,
                                                                                             177.865,
                                                                                             178.085,
                                                                                             178.306,
                                                                                             178.77,
                                                                                             179.711,
                                                                                             179.862,
                                                                                             180.024,
                                                                                             180.489,
                                                                                             181.104,
                                                                                             182.172,
                                                                                             182.346,
                                                                                             182.613,
                                                                                             182.892,
                                                                                             183.101,
                                                                                             183.275,
                                                                                             183.577,
                                                                                             183.844,
                                                                                             184.065,
                                                                                             184.645,
                                                                                             184.831,
                                                                                             185.075,
                                                                                             185.435,
                                                                                             186.05,
                                                                                             186.352,
                                                                                             186.503,
                                                                                             187.13,
                                                                                             187.385,
                                                                                             187.722,
                                                                                             187.977,
                                                                                             188.325,
                                                                                             188.534,
                                                                                             189.347,
                                                                                             189.603,
                                                                                             189.812,
                                                                                             190.02,
                                                                                             190.38,
                                                                                             190.729,
                                                                                             190.996,
                                                                                             191.309,
                                                                                             191.634,
                                                                                             191.82,
                                                                                             192.075,
                                                                                             192.342,
                                                                                             192.993,
                                                                                             193.155,
                                                                                             193.469,
                                                                                             193.771,
                                                                                             193.933,
                                                                                             194.548,
                                                                                             194.746,
                                                                                             194.978,
                                                                                             195.21,
                                                                                             195.466,
                                                                                             195.942,
                                                                                             196.255,
                                                                                             196.627,
                                                                                             197.01,
                                                                                             197.323,
                                                                                             197.648,
                                                                                             197.973,
                                                                                             198.275,
                                                                                             198.623,
                                                                                             198.949,
                                                                                             199.517,
                                                                                             199.703,
                                                                                             199.982,
                                                                                             201.096,
                                                                                             201.979,
                                                                                             202.269,
                                                                                             202.513,
                                                                                             202.687,
                                                                                             203.012,
                                                                                             203.244,
                                                                                             203.523,
                                                                                             204.185,
                                                                                             204.626,
                                                                                             205.682,
                                                                                             207.761,
                                                                                             208.434,
                                                                                             208.62,
                                                                                             209.409,
                                                                                             209.746,
                                                                                             210.164,
                                                                                             211.603,
                                                                                             211.882,
                                                                                             212.242,
                                                                                             212.637,
                                                                                             212.811,
                                                                                             213.171,
                                                                                             213.415,
                                                                                             213.96,
                                                                                             214.332,
                                                                                             214.529,
                                                                                             214.819,
                                                                                             215.121,
                                                                                             215.586,
                                                                                             215.911,
                                                                                             217.513,
                                                                                             217.664,
                                                                                             217.873,
                                                                                             218.593,
                                                                                             218.883,
                                                                                             219.498,
                                                                                             221.379,
                                                                                             222.064,
                                                                                             222.319,
                                                                                             222.482,
                                                                                             222.656,
                                                                                             222.807,
                                                                                             223.155,
                                                                                             223.388,
                                                                                             224.432,
                                                                                             224.583,
                                                                                             224.897,
                                                                                             227.556,
                                                                                             228.229,
                                                                                             230.586,
                                                                                             231.41,
                                                                                             231.724,
                                                                                             232.049,
                                                                                             232.455,
                                                                                             232.71
                                                                                         ],
                                                                      "musicBassHits":  [
                                                                                            0.035,
                                                                                            0.488,
                                                                                            1.556,
                                                                                            1.811,
                                                                                            2.334,
                                                                                            2.485,
                                                                                            2.949,
                                                                                            3.1,
                                                                                            3.309,
                                                                                            4.029,
                                                                                            4.319,
                                                                                            4.656,
                                                                                            4.818,
                                                                                            5.097,
                                                                                            5.433,
                                                                                            6.502,
                                                                                            6.769,
                                                                                            7.291,
                                                                                            7.581,
                                                                                            7.906,
                                                                                            8.208,
                                                                                            8.359,
                                                                                            8.975,
                                                                                            9.265,
                                                                                            9.903,
                                                                                            10.054,
                                                                                            10.391,
                                                                                            10.542,
                                                                                            10.844,
                                                                                            11.447,
                                                                                            11.749,
                                                                                            12.237,
                                                                                            12.725,
                                                                                            13.003,
                                                                                            13.212,
                                                                                            13.92,
                                                                                            14.187,
                                                                                            14.71,
                                                                                            15.325,
                                                                                            15.476,
                                                                                            15.801,
                                                                                            16.103,
                                                                                            16.405,
                                                                                            16.684,
                                                                                            17.183,
                                                                                            17.798,
                                                                                            17.949,
                                                                                            18.112,
                                                                                            18.262,
                                                                                            18.576,
                                                                                            18.866,
                                                                                            19.04,
                                                                                            19.191,
                                                                                            19.412,
                                                                                            19.598,
                                                                                            19.795,
                                                                                            20.027,
                                                                                            20.283,
                                                                                            20.747,
                                                                                            21.095,
                                                                                            21.351,
                                                                                            21.618,
                                                                                            21.896,
                                                                                            22.129,
                                                                                            22.28,
                                                                                            22.442,
                                                                                            22.756,
                                                                                            23.824,
                                                                                            24.091,
                                                                                            24.253,
                                                                                            24.427,
                                                                                            24.613,
                                                                                            24.903,
                                                                                            25.228,
                                                                                            25.704,
                                                                                            25.879,
                                                                                            26.297,
                                                                                            26.575,
                                                                                            26.947,
                                                                                            27.225,
                                                                                            27.701,
                                                                                            28.003,
                                                                                            28.154,
                                                                                            28.317,
                                                                                            28.491,
                                                                                            28.781,
                                                                                            29.048,
                                                                                            29.408,
                                                                                            29.629,
                                                                                            29.861,
                                                                                            30.186,
                                                                                            30.639,
                                                                                            31.254,
                                                                                            31.509,
                                                                                            31.846,
                                                                                            32.032,
                                                                                            32.647,
                                                                                            33.054,
                                                                                            33.46,
                                                                                            33.727,
                                                                                            34.006,
                                                                                            34.157,
                                                                                            34.505,
                                                                                            34.865,
                                                                                            35.132,
                                                                                            35.48,
                                                                                            35.828,
                                                                                            36.2,
                                                                                            36.455,
                                                                                            36.641,
                                                                                            36.978,
                                                                                            37.28,
                                                                                            37.593,
                                                                                            38.208,
                                                                                            38.359,
                                                                                            38.835,
                                                                                            38.998,
                                                                                            39.311,
                                                                                            39.602,
                                                                                            39.95,
                                                                                            40.217,
                                                                                            40.414,
                                                                                            40.716,
                                                                                            41.041,
                                                                                            41.436,
                                                                                            41.749,
                                                                                            41.935,
                                                                                            42.388,
                                                                                            42.539,
                                                                                            42.69,
                                                                                            42.887,
                                                                                            43.178,
                                                                                            43.619,
                                                                                            43.77,
                                                                                            43.932,
                                                                                            44.222,
                                                                                            44.408,
                                                                                            44.78,
                                                                                            45.023,
                                                                                            45.407,
                                                                                            45.65,
                                                                                            45.801,
                                                                                            45.987,
                                                                                            46.347,
                                                                                            46.51,
                                                                                            46.695,
                                                                                            46.893,
                                                                                            47.148,
                                                                                            47.357,
                                                                                            47.636,
                                                                                            47.798,
                                                                                            47.949,
                                                                                            48.147,
                                                                                            48.576,
                                                                                            48.832,
                                                                                            48.982,
                                                                                            49.18,
                                                                                            49.389,
                                                                                            49.842,
                                                                                            50.109,
                                                                                            50.306,
                                                                                            50.469,
                                                                                            50.62,
                                                                                            51.049,
                                                                                            51.328,
                                                                                            51.653,
                                                                                            51.827,
                                                                                            52.094,
                                                                                            52.291,
                                                                                            52.442,
                                                                                            52.791,
                                                                                            53.081,
                                                                                            53.51,
                                                                                            53.673,
                                                                                            53.835,
                                                                                            54.114,
                                                                                            54.3,
                                                                                            54.671,
                                                                                            54.915,
                                                                                            55.182,
                                                                                            55.368,
                                                                                            55.542,
                                                                                            55.693,
                                                                                            55.867,
                                                                                            56.25,
                                                                                            56.494,
                                                                                            56.784,
                                                                                            57.051,
                                                                                            57.249,
                                                                                            57.4,
                                                                                            57.702,
                                                                                            57.98,
                                                                                            58.166,
                                                                                            58.479,
                                                                                            58.77,
                                                                                            58.99,
                                                                                            59.199,
                                                                                            59.42,
                                                                                            59.733,
                                                                                            60.012,
                                                                                            60.209,
                                                                                            60.511,
                                                                                            60.836,
                                                                                            61.219,
                                                                                            61.544,
                                                                                            61.73,
                                                                                            61.997,
                                                                                            62.171,
                                                                                            62.346,
                                                                                            62.822,
                                                                                            62.973,
                                                                                            63.263,
                                                                                            63.414,
                                                                                            63.658,
                                                                                            64.052,
                                                                                            64.203,
                                                                                            64.575,
                                                                                            64.819,
                                                                                            65.26,
                                                                                            65.445,
                                                                                            65.596,
                                                                                            65.782,
                                                                                            66.142,
                                                                                            66.514,
                                                                                            66.688,
                                                                                            66.943,
                                                                                            67.14,
                                                                                            67.291,
                                                                                            67.593,
                                                                                            67.744,
                                                                                            67.942,
                                                                                            68.209,
                                                                                            68.371,
                                                                                            68.615,
                                                                                            68.975,
                                                                                            69.184,
                                                                                            69.637,
                                                                                            69.904,
                                                                                            70.101,
                                                                                            70.252,
                                                                                            70.415,
                                                                                            70.728,
                                                                                            71.088,
                                                                                            71.436,
                                                                                            71.622,
                                                                                            71.889,
                                                                                            72.086,
                                                                                            72.237,
                                                                                            72.539,
                                                                                            72.69,
                                                                                            72.876,
                                                                                            73.317,
                                                                                            73.619,
                                                                                            73.863,
                                                                                            74.141,
                                                                                            74.466,
                                                                                            74.71,
                                                                                            75.093,
                                                                                            75.337,
                                                                                            75.488,
                                                                                            75.79,
                                                                                            76.092,
                                                                                            76.394,
                                                                                            76.579,
                                                                                            76.8,
                                                                                            77.044,
                                                                                            77.195,
                                                                                            77.497,
                                                                                            77.833,
                                                                                            78.1,
                                                                                            78.263,
                                                                                            78.518,
                                                                                            78.681,
                                                                                            78.913,
                                                                                            79.192,
                                                                                            79.401,
                                                                                            79.842,
                                                                                            80.434,
                                                                                            80.655,
                                                                                            80.945,
                                                                                            81.165,
                                                                                            81.374,
                                                                                            81.525,
                                                                                            81.874,
                                                                                            82.872,
                                                                                            83.394,
                                                                                            83.743,
                                                                                            83.917,
                                                                                            84.126,
                                                                                            84.358,
                                                                                            84.544,
                                                                                            84.822,
                                                                                            84.973,
                                                                                            85.368,
                                                                                            85.879,
                                                                                            86.169,
                                                                                            86.332,
                                                                                            86.494,
                                                                                            86.831,
                                                                                            87.017,
                                                                                            87.226,
                                                                                            87.818,
                                                                                            88.131,
                                                                                            88.921,
                                                                                            89.083,
                                                                                            89.304,
                                                                                            89.513,
                                                                                            89.675,
                                                                                            90.314,
                                                                                            90.5,
                                                                                            90.651,
                                                                                            90.86,
                                                                                            91.138,
                                                                                            91.405,
                                                                                            91.556,
                                                                                            91.777,
                                                                                            91.963,
                                                                                            92.764,
                                                                                            93.17,
                                                                                            93.484,
                                                                                            94.029,
                                                                                            94.25,
                                                                                            94.401,
                                                                                            94.586,
                                                                                            94.854,
                                                                                            95.271,
                                                                                            95.457,
                                                                                            95.782,
                                                                                            96.061,
                                                                                            96.223,
                                                                                            96.398,
                                                                                            96.943,
                                                                                            97.141,
                                                                                            97.57,
                                                                                            97.721,
                                                                                            98.604,
                                                                                            98.917,
                                                                                            99.184,
                                                                                            99.602,
                                                                                            100.02,
                                                                                            100.194,
                                                                                            100.542,
                                                                                            100.751,
                                                                                            101.042,
                                                                                            101.297,
                                                                                            101.46,
                                                                                            102.098,
                                                                                            102.423,
                                                                                            102.667,
                                                                                            102.911,
                                                                                            103.329,
                                                                                            103.607,
                                                                                            103.77,
                                                                                            103.921,
                                                                                            104.234,
                                                                                            104.559,
                                                                                            104.896,
                                                                                            105.14,
                                                                                            105.465,
                                                                                            105.674,
                                                                                            105.964,
                                                                                            106.255,
                                                                                            106.405,
                                                                                            106.568,
                                                                                            106.998,
                                                                                            107.497,
                                                                                            108.553,
                                                                                            108.878,
                                                                                            109.029,
                                                                                            109.273,
                                                                                            109.517,
                                                                                            109.993,
                                                                                            110.597,
                                                                                            110.794,
                                                                                            111.061,
                                                                                            111.212,
                                                                                            111.502,
                                                                                            111.99,
                                                                                            112.443,
                                                                                            112.64,
                                                                                            112.942,
                                                                                            113.267,
                                                                                            113.511,
                                                                                            113.824,
                                                                                            114.451,
                                                                                            114.765,
                                                                                            114.927,
                                                                                            115.566,
                                                                                            115.717,
                                                                                            115.868,
                                                                                            116.042,
                                                                                            116.425,
                                                                                            116.912,
                                                                                            117.388,
                                                                                            117.621,
                                                                                            117.853,
                                                                                            118.004,
                                                                                            118.155,
                                                                                            118.306,
                                                                                            118.457,
                                                                                            118.631,
                                                                                            118.782,
                                                                                            119.246,
                                                                                            119.397,
                                                                                            119.885,
                                                                                            120.303,
                                                                                            120.593,
                                                                                            120.79,
                                                                                            121.092,
                                                                                            121.243,
                                                                                            121.406,
                                                                                            121.719,
                                                                                            121.87,
                                                                                            122.346,
                                                                                            122.532,
                                                                                            122.799,
                                                                                            123.066,
                                                                                            123.426,
                                                                                            123.577,
                                                                                            123.937,
                                                                                            124.204,
                                                                                            124.471,
                                                                                            124.807,
                                                                                            124.981,
                                                                                            125.272,
                                                                                            125.527,
                                                                                            125.945,
                                                                                            126.189,
                                                                                            126.676,
                                                                                            126.978,
                                                                                            127.303,
                                                                                            127.745,
                                                                                            128.012,
                                                                                            128.372,
                                                                                            128.615,
                                                                                            128.836,
                                                                                            129.149,
                                                                                            129.393,
                                                                                            129.776,
                                                                                            129.95,
                                                                                            130.218,
                                                                                            130.531,
                                                                                            130.786,
                                                                                            130.995,
                                                                                            131.146,
                                                                                            131.309,
                                                                                            131.622,
                                                                                            132.238,
                                                                                            132.69,
                                                                                            132.969,
                                                                                            133.317,
                                                                                            133.48,
                                                                                            134.095,
                                                                                            134.362,
                                                                                            134.711,
                                                                                            134.885,
                                                                                            135.175,
                                                                                            135.419,
                                                                                            135.686,
                                                                                            135.941,
                                                                                            136.092,
                                                                                            136.255,
                                                                                            136.568,
                                                                                            136.87,
                                                                                            137.195,
                                                                                            137.485,
                                                                                            137.799,
                                                                                            137.95,
                                                                                            138.17,
                                                                                            138.379,
                                                                                            138.6,
                                                                                            139.192,
                                                                                            139.389,
                                                                                            139.819,
                                                                                            140.121,
                                                                                            140.411,
                                                                                            140.725,
                                                                                            140.91,
                                                                                            141.305,
                                                                                            141.514,
                                                                                            141.758,
                                                                                            141.967,
                                                                                            142.292,
                                                                                            142.582,
                                                                                            142.849,
                                                                                            143,
                                                                                            143.197,
                                                                                            143.383,
                                                                                            143.662,
                                                                                            143.999,
                                                                                            144.242,
                                                                                            144.44,
                                                                                            144.776,
                                                                                            145.078,
                                                                                            145.38,
                                                                                            145.659,
                                                                                            145.856,
                                                                                            146.216,
                                                                                            146.471,
                                                                                            146.773,
                                                                                            146.924,
                                                                                            147.145,
                                                                                            147.435,
                                                                                            147.795,
                                                                                            147.958,
                                                                                            148.143,
                                                                                            148.399,
                                                                                            148.77,
                                                                                            148.944,
                                                                                            149.188,
                                                                                            149.397,
                                                                                            149.56,
                                                                                            149.711,
                                                                                            150.024,
                                                                                            150.326,
                                                                                            150.616,
                                                                                            150.802,
                                                                                            151.197,
                                                                                            151.406,
                                                                                            151.557,
                                                                                            151.719,
                                                                                            151.87,
                                                                                            152.184,
                                                                                            152.485,
                                                                                            152.787,
                                                                                            153.089,
                                                                                            153.414,
                                                                                            153.786,
                                                                                            154.03,
                                                                                            154.343,
                                                                                            154.622,
                                                                                            154.97,
                                                                                            155.272,
                                                                                            155.562,
                                                                                            155.759,
                                                                                            156.363,
                                                                                            156.677,
                                                                                            156.979,
                                                                                            157.141,
                                                                                            157.443,
                                                                                            157.687,
                                                                                            158.047,
                                                                                            158.221,
                                                                                            158.383,
                                                                                            158.778,
                                                                                            158.975,
                                                                                            159.173,
                                                                                            159.602,
                                                                                            159.916,
                                                                                            160.218,
                                                                                            160.52,
                                                                                            160.705,
                                                                                            161.135,
                                                                                            161.309,
                                                                                            161.564,
                                                                                            161.762,
                                                                                            162.099,
                                                                                            162.377,
                                                                                            162.644,
                                                                                            163.016,
                                                                                            163.167,
                                                                                            163.782,
                                                                                            164.037,
                                                                                            164.235,
                                                                                            164.571,
                                                                                            164.862,
                                                                                            165.175,
                                                                                            165.454,
                                                                                            165.64,
                                                                                            166.046,
                                                                                            166.255,
                                                                                            166.406,
                                                                                            166.568,
                                                                                            166.94,
                                                                                            167.195,
                                                                                            167.59,
                                                                                            167.938,
                                                                                            168.263,
                                                                                            168.739,
                                                                                            168.972,
                                                                                            169.192,
                                                                                            169.506,
                                                                                            169.819,
                                                                                            170.063,
                                                                                            170.411,
                                                                                            170.597,
                                                                                            170.887,
                                                                                            171.212,
                                                                                            171.514,
                                                                                            171.99,
                                                                                            172.28,
                                                                                            172.582,
                                                                                            172.838,
                                                                                            173.116,
                                                                                            173.441,
                                                                                            173.685,
                                                                                            173.952,
                                                                                            174.138,
                                                                                            174.475,
                                                                                            174.765,
                                                                                            174.997,
                                                                                            175.171,
                                                                                            175.357,
                                                                                            175.554,
                                                                                            175.903,
                                                                                            176.158,
                                                                                            176.472,
                                                                                            176.774,
                                                                                            176.936,
                                                                                            177.226,
                                                                                            177.482,
                                                                                            177.784,
                                                                                            178.097,
                                                                                            178.364,
                                                                                            178.515,
                                                                                            178.678,
                                                                                            178.91,
                                                                                            179.084,
                                                                                            179.711,
                                                                                            179.92,
                                                                                            180.233,
                                                                                            180.489,
                                                                                            180.849,
                                                                                            181.104,
                                                                                            181.406,
                                                                                            181.847,
                                                                                            182.172,
                                                                                            182.393,
                                                                                            182.962,
                                                                                            183.356,
                                                                                            183.577,
                                                                                            184.018,
                                                                                            184.355,
                                                                                            184.657,
                                                                                            184.935,
                                                                                            185.144,
                                                                                            185.318,
                                                                                            185.574,
                                                                                            186.05,
                                                                                            186.352,
                                                                                            186.503,
                                                                                            187.13,
                                                                                            187.385,
                                                                                            187.71,
                                                                                            187.989,
                                                                                            188.267,
                                                                                            188.534,
                                                                                            188.976,
                                                                                            189.127,
                                                                                            189.405,
                                                                                            189.614,
                                                                                            189.823,
                                                                                            190.032,
                                                                                            190.218,
                                                                                            190.392,
                                                                                            190.729,
                                                                                            191.007,
                                                                                            191.309,
                                                                                            191.669,
                                                                                            192.075,
                                                                                            192.389,
                                                                                            192.993,
                                                                                            193.48,
                                                                                            193.933,
                                                                                            194.258,
                                                                                            194.56,
                                                                                            194.804,
                                                                                            195.036,
                                                                                            195.21,
                                                                                            195.477,
                                                                                            195.686,
                                                                                            195.953,
                                                                                            196.255,
                                                                                            196.406,
                                                                                            196.615,
                                                                                            196.789,
                                                                                            197.021,
                                                                                            197.242,
                                                                                            197.648,
                                                                                            197.973,
                                                                                            198.275,
                                                                                            198.867,
                                                                                            199.076,
                                                                                            199.726,
                                                                                            200.005,
                                                                                            200.156,
                                                                                            200.342,
                                                                                            200.539,
                                                                                            200.725,
                                                                                            201.247,
                                                                                            201.689,
                                                                                            201.979,
                                                                                            202.281,
                                                                                            202.524,
                                                                                            202.838,
                                                                                            203.024,
                                                                                            203.233,
                                                                                            203.581,
                                                                                            203.732,
                                                                                            204.637,
                                                                                            204.928,
                                                                                            205.079,
                                                                                            205.253,
                                                                                            205.543,
                                                                                            205.694,
                                                                                            205.938,
                                                                                            206.925,
                                                                                            207.691,
                                                                                            207.911,
                                                                                            208.12,
                                                                                            209.293,
                                                                                            209.618,
                                                                                            209.897,
                                                                                            210.175,
                                                                                            210.408,
                                                                                            210.721,
                                                                                            210.942,
                                                                                            211.267,
                                                                                            211.534,
                                                                                            211.87,
                                                                                            212.242,
                                                                                            212.811,
                                                                                            213.159,
                                                                                            213.345,
                                                                                            213.531,
                                                                                            213.705,
                                                                                            213.891,
                                                                                            214.088,
                                                                                            214.332,
                                                                                            214.541,
                                                                                            214.819,
                                                                                            214.982,
                                                                                            215.156,
                                                                                            215.435,
                                                                                            215.679,
                                                                                            215.911,
                                                                                            216.329,
                                                                                            217.374,
                                                                                            217.606,
                                                                                            217.908,
                                                                                            218.233,
                                                                                            219.51,
                                                                                            219.8,
                                                                                            220.067,
                                                                                            220.218,
                                                                                            220.473,
                                                                                            220.752,
                                                                                            221.217,
                                                                                            222.087,
                                                                                            222.319,
                                                                                            222.482,
                                                                                            222.633,
                                                                                            222.807,
                                                                                            223.132,
                                                                                            223.666,
                                                                                            224.444,
                                                                                            224.723,
                                                                                            224.874,
                                                                                            225.048,
                                                                                            225.199,
                                                                                            225.57,
                                                                                            225.965,
                                                                                            226.418,
                                                                                            227.428,
                                                                                            227.706,
                                                                                            227.997,
                                                                                            228.241,
                                                                                            229.204,
                                                                                            229.413,
                                                                                            229.692,
                                                                                            229.959,
                                                                                            230.11,
                                                                                            230.516,
                                                                                            231.41,
                                                                                            231.735,
                                                                                            232.037,
                                                                                            232.467,
                                                                                            232.629,
                                                                                            232.954,
                                                                                            234.359
                                                                                        ],
                                                                      "voiceId":  "ZhPmsZkhfa4TFVBOBDbS",
                                                                      "price":  "2500000",
                                                                      "city":  "Colony Beach",
                                                                      "address":  "123 Luxury Lane",
                                                                      "mainSellingPoints":  [
                                                                                                "Snorkeling",
                                                                                                "Catamaran Tours"
                                                                                            ],
                                                                      "size":  "3500",
                                                                      "bedroomCount":  "4",
                                                                      "bathroomCount":  "3",
                                                                      "lotSize":  "0.5 acres",
                                                                      "propertyType":  "single_family",
                                                                      "preferredTone":  "engaging",
                                                                      "useMusic":  "yes",
                                                                      "webhookResponse":  [
                                                                                              "Welcome to 123 Luxury Lane, a stunning modern estate in Colony Beach, Florida. This waterfront home offers breathtaking panoramic city views.",
                                                                                              "As we explore the grounds, discover the private dock with a boat lift, perfect for snorkeling adventures or catamaran tours. Enjoy dining under the thatched roof patio, surrounded by palm trees and expansive water views.",
                                                                                              "Now let\u0027s head inside to the cozy living room, where large sliding glass doors frame the waterfront view. The bright kitchen features a unique leaf-shaped fan and stainless steel appliances, seamlessly flowing into the dining area.",
                                                                                              "The private retreat begins with guest bedrooms adorned with tropical fans and plush carpeting. Each room offers an ensuite bathroom, complete with modern vessel sinks and marble tile accents.",
                                                                                              "Experience luxury living at 123 Luxury Lane. Contact us at (310) 555-0123 or @luxuryhomes for more details."
                                                                                          ],
                                                                      "agentName":  "Jane Smith",
                                                                      "agentPhone":  "(310) 555-0123",
                                                                      "agentEmail":  "jane@luxuryrealty.com",
                                                                      "agentCta":  "Schedule a Private Tour",
                                                                      "logoUrl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/branding/d7f5b65e-27ba-45f9-87cf-37495ce34917/logo-TfnN-EFtbBZ5zdEi1W8Ew.jpg",
                                                                      "headshotUrl":  "https://qjkgsiqcqkkuhawuqvve.supabase.co/storage/v1/object/public/listing-images/branding/d7f5b65e-27ba-45f9-87cf-37495ce34917/photo-xZdMYE_PiZEzWEvxM8Qtn.jpg",
                                                                      "estimatedNarrationDuration":  56,
                                                                      "sectionImageMapping":  [
                                                                                                  {
                                                                                                      "sectionIndex":  0,
                                                                                                      "sectionType":  "opening",
                                                                                                      "imageIndices":  [
                                                                                                                           0,
                                                                                                                           1
                                                                                                                       ],
                                                                                                      "wordCount":  21,
                                                                                                      "estimatedDuration":  9
                                                                                                  },
                                                                                                  {
                                                                                                      "sectionIndex":  1,
                                                                                                      "sectionType":  "outdoor",
                                                                                                      "imageIndices":  [
                                                                                                                           2,
                                                                                                                           3,
                                                                                                                           4
                                                                                                                       ],
                                                                                                      "wordCount":  35,
                                                                                                      "estimatedDuration":  14
                                                                                                  },
                                                                                                  {
                                                                                                      "sectionIndex":  2,
                                                                                                      "sectionType":  "living",
                                                                                                      "imageIndices":  [
                                                                                                                           5,
                                                                                                                           6,
                                                                                                                           7
                                                                                                                       ],
                                                                                                      "wordCount":  36,
                                                                                                      "estimatedDuration":  15
                                                                                                  },
                                                                                                  {
                                                                                                      "sectionIndex":  3,
                                                                                                      "sectionType":  "private",
                                                                                                      "imageIndices":  [
                                                                                                                           8,
                                                                                                                           9,
                                                                                                                           10
                                                                                                                       ],
                                                                                                      "wordCount":  29,
                                                                                                      "estimatedDuration":  12
                                                                                                  },
                                                                                                  {
                                                                                                      "sectionIndex":  4,
                                                                                                      "sectionType":  "closing",
                                                                                                      "imageIndices":  [
                                                                                                                           0
                                                                                                                       ],
                                                                                                      "wordCount":  17,
                                                                                                      "estimatedDuration":  7
                                                                                                  }
                                                                                              ],
                                                                      "videoId":  "344e8af7-b45d-4117-8a2d-09600653458f"
                                                                  }
                                                              ],
                                                     "webhookUrl":  "https://edgeaimedia.app.n8n.cloud/webhook/db085427-02a1-4f47-9934-9c258aa929b3",
                                                     "executionMode":  "production"
                                                 },
                                        "pairedItem":  {
                                                           "item":  0
                                                       }
                                    }
                                ]
                },
    "versionId":  "078c0222-ab65-4af6-aefb-a9330ca4ec8b",
    "activeVersionId":  "078c0222-ab65-4af6-aefb-a9330ca4ec8b",
    "versionCounter":  359,
    "triggerCount":  1,
    "shared":  [
                   {
                       "updatedAt":  "2026-01-13T23:28:53.822Z",
                       "createdAt":  "2026-01-13T23:28:53.822Z",
                       "role":  "workflow:owner",
                       "workflowId":  "Qo2sirL0cDI2fVNQMJ5Eq",
                       "projectId":  "rir8MSIWoGDNYiqe",
                       "project":  {
                                       "updatedAt":  "2025-03-09T23:16:25.038Z",
                                       "createdAt":  "2025-03-09T23:16:22.800Z",
                                       "id":  "rir8MSIWoGDNYiqe",
                                       "name":  "Shawheen Nabizadeh \u003cshawheendn@gmail.com\u003e",
                                       "type":  "personal",
                                       "icon":  null,
                                       "description":  null,
                                       "creatorId":  "92d3fbdb-a49c-432b-b35c-b3d875346f08",
                                       "projectRelations":  [
                                                                {
                                                                    "updatedAt":  "2025-03-09T23:16:22.800Z",
                                                                    "createdAt":  "2025-03-09T23:16:22.800Z",
                                                                    "userId":  "92d3fbdb-a49c-432b-b35c-b3d875346f08",
                                                                    "projectId":  "rir8MSIWoGDNYiqe",
                                                                    "user":  {
                                                                                 "updatedAt":  "2026-01-16T08:00:04.000Z",
                                                                                 "createdAt":  "2025-03-09T23:16:20.905Z",
                                                                                 "id":  "92d3fbdb-a49c-432b-b35c-b3d875346f08",
                                                                                 "email":  "shawheendn@gmail.com",
                                                                                 "firstName":  "Shawheen",
                                                                                 "lastName":  "Nabizadeh",
                                                                                 "personalizationAnswers":  null,
                                                                                 "settings":  {
                                                                                                  "userActivated":  true,
                                                                                                  "easyAIWorkflowOnboarded":  true,
                                                                                                  "firstSuccessfulWorkflowId":  "xgyizZxdSJZuM16J",
                                                                                                  "userActivatedAt":  1749947407381,
                                                                                                  "npsSurvey":  {
                                                                                                                    "responded":  true,
                                                                                                                    "lastShownAt":  1753068671039
                                                                                                                }
                                                                                              },
                                                                                 "disabled":  false,
                                                                                 "mfaEnabled":  false,
                                                                                 "lastActiveAt":  "2026-01-16",
                                                                                 "isPending":  false
                                                                             }
                                                                }
                                                            ]
                                   }
                   }
               ],
    "tags":  [

             ],
    "activeVersion":  {
                          "updatedAt":  "2026-01-17T04:17:27.095Z",
                          "createdAt":  "2026-01-17T04:17:27.095Z",
                          "versionId":  "078c0222-ab65-4af6-aefb-a9330ca4ec8b",
                          "workflowId":  "Qo2sirL0cDI2fVNQMJ5Eq",
                          "nodes":  [
                                        {
                                            "parameters":  {
                                                               "content":  "## Generate Video\n",
                                                               "height":  80,
                                                               "width":  320
                                                           },
                                            "type":  "n8n-nodes-base.stickyNote",
                                            "position":  [
                                                             43968,
                                                             15184
                                                         ],
                                            "typeVersion":  1,
                                            "id":  "aca2c070-b9e1-40de-bac4-1485972163e7",
                                            "name":  "Sticky Note2"
                                        },
                                        {
                                            "parameters":  {
                                                               "assignments":  {
                                                                                   "assignments":  [
                                                                                                       {
                                                                                                           "id":  "c7ce3d37-6455-407a-bf57-286d91c16f97",
                                                                                                           "name":  "video_url",
                                                                                                           "value":  "={{ $json.movie.url }}",
                                                                                                           "type":  "string"
                                                                                                       }
                                                                                                   ]
                                                                               },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.set",
                                            "typeVersion":  3.4,
                                            "position":  [
                                                             88048,
                                                             29648
                                                         ],
                                            "id":  "71aafb98-7f4c-477b-a0fe-c8a8544bbdb1",
                                            "name":  "Output final video"
                                        },
                                        {
                                            "parameters":  {
                                                               "resource":  "message",
                                                               "operation":  "send",
                                                               "sendTo":  "={{ $(\u0027Webhook\u0027).first().json.body[0].email }}",
                                                               "subject":  "Your Property Video is Ready!",
                                                               "message":  "=Hi there!\n\nGreat news - your property video has been generated successfully!\n\nYou can view and download your video here:\n{{ $json.movie.url }}\n\nThank you for using our service!\n\nBest regards,\nEdge AI Video Team",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.gmail",
                                            "typeVersion":  2.1,
                                            "position":  [
                                                             88272,
                                                             29824
                                                         ],
                                            "id":  "1c55a048-e89b-405d-8436-330d7c59dc20",
                                            "name":  "ðŸŽ‰ Send video URL",
                                            "webhookId":  "a4fb50cc-107d-4525-b37e-94b4abd7f0e3",
                                            "credentials":  {
                                                                "gmailOAuth2":  {
                                                                                    "id":  "LgTVoHWwrV9qYrJH",
                                                                                    "name":  "Gmail account"
                                                                                }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/videos/complete",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Content-Type",
                                                                                                               "value":  "application/json"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={{ JSON.stringify({ video_id: $(\u0027Webhook\u0027).first().json.body[0].videoId, video_url: $json.video_url, status: \u0027completed\u0027, execution_id: $execution.id }) }}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             88272,
                                                             29472
                                                         ],
                                            "id":  "1c3cda16-6a4b-49be-9132-ffe8d8ef28cf",
                                            "name":  "HTTP Request"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://backend.edgeairealty.com/api/video/track-execution",
                                                               "sendBody":  true,
                                                               "bodyParameters":  {
                                                                                      "parameters":  [
                                                                                                         {
                                                                                                             "name":  "executionId",
                                                                                                             "value":  "={{ $execution.id }}"
                                                                                                         },
                                                                                                         {
                                                                                                             "name":  "email",
                                                                                                             "value":  "={{ $json.body[0].email }}"
                                                                                                         }
                                                                                                     ]
                                                                                  },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             77472,
                                                             29504
                                                         ],
                                            "id":  "ff161925-d657-4644-bc9f-08b49368c274",
                                            "name":  "save execution id to db",
                                            "disabled":  true
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.json2video.com/v2/movies",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "contentType":  "raw",
                                                               "rawContentType":  "application/json",
                                                               "body":  "={\n  \"comment\": \"Final video with overlay end card\",\n  \"resolution\": \"custom\",\n  \"width\": 1080,\n  \"height\": 1920,\n  \"quality\": \"high\",\n  \"scenes\": [\n    {\n      \"comment\": \"Full video with end card overlay\",\n      \"duration\": {{ Number($json.video_duration) || 100 }},\n      \"elements\": [\n        {\n          \"type\": \"video\",\n          \"src\": \"{{ $json.video }}\"\n        },\n        {\n          \"type\": \"subtitles\",\n          \"start\": 0,\n          \"duration\": {{ Number($json.video_duration) - 6 }},\n          \"settings\": {\n            \"style\": \"boxed-word\",\n            \"position\": \"bottom-center\",\n            \"y\": 1300,\n            \"font-family\": \"Montserrat\",\n            \"font-size\": 90,\n            \"font-weight\": \"800\",\n            \"line-color\": \"#FFFFFF\",\n            \"word-color\": \"#E1306C\",\n            \"outline-color\": \"#000000\",\n            \"outline-width\": 4\n          }\n        },\n        {\n          \"type\": \"html\",\n          \"tailwindcss\": true,\n          \"html\": \"\u003cdiv class=\u0027w-full h-full bg-white flex flex-col items-center justify-center\u0027\u003e\u003cimg src=\u0027{{ $json.headshot_url }}\u0027 class=\u0027w-72 h-72 rounded-full object-cover mb-8 shadow-lg\u0027 /\u003e\u003ch1 class=\u0027text-5xl font-bold text-gray-900 mb-2\u0027\u003e{{ $json.agent_name }}\u003c/h1\u003e\u003cp class=\u0027text-2xl text-gray-500 mb-8\u0027\u003e{{ $json.brand_name }}\u003c/p\u003e\u003cp class=\u0027text-3xl font-medium text-gray-800 mb-2\u0027\u003e{{ $json.phone }}\u003c/p\u003e\u003cp class=\u0027text-xl text-gray-500\u0027\u003e{{ $json.email }}\u003c/p\u003e\u003c/div\u003e\",\n          \"start\": {{ Number($json.video_duration) - 6 }},\n          \"duration\": 6,\n          \"x\": 540,\n          \"y\": 960,\n          \"width\": 1080,\n          \"fade-in\": 0.5\n        }\n      ]\n    }\n  ]\n}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             87152,
                                                             29648
                                                         ],
                                            "id":  "6662028a-d554-44dc-b420-506a5c0c4372",
                                            "name":  "json2video - Edit video1",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "strict"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "2643b070-cbb2-4562-9269-a61389e0c242",
                                                                                                         "leftValue":  "={{ $json.movie.status }}",
                                                                                                         "rightValue":  "done",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "and"
                                                                              },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             87824,
                                                             29648
                                                         ],
                                            "id":  "401c7c69-f249-4364-a079-4daedbded16b",
                                            "name":  "Check Errors "
                                        },
                                        {
                                            "parameters":  {
                                                               "assignments":  {
                                                                                   "assignments":  [
                                                                                                       {
                                                                                                           "id":  "var-video",
                                                                                                           "name":  "video",
                                                                                                           "value":  "={{ $json.movie.url }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-video-duration",
                                                                                                           "name":  "video_duration",
                                                                                                           "value":  "={{ $json.movie.duration }}",
                                                                                                           "type":  "number"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-headshot",
                                                                                                           "name":  "headshot_url",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].headshotUrl }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-agent-name",
                                                                                                           "name":  "agent_name",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentName }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-brand-name",
                                                                                                           "name":  "brand_name",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].brandName || $(\u0027Webhook\u0027).first().json.body[0].agentName + \u0027 Real Estate\u0027 }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-phone",
                                                                                                           "name":  "phone",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentPhone }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-email",
                                                                                                           "name":  "email",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].agentEmail || $(\u0027Webhook\u0027).first().json.body[0].email }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-logo",
                                                                                                           "name":  "logo_url",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].logoUrl }}",
                                                                                                           "type":  "string"
                                                                                                       },
                                                                                                       {
                                                                                                           "id":  "var-captions",
                                                                                                           "name":  "show_captions",
                                                                                                           "value":  "={{ $(\u0027Webhook\u0027).first().json.body[0].showCaptions || \u0027true\u0027 }}",
                                                                                                           "type":  "string"
                                                                                                       }
                                                                                                   ]
                                                                               },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.set",
                                            "typeVersion":  3.4,
                                            "position":  [
                                                             86928,
                                                             29648
                                                         ],
                                            "id":  "98ffa0db-fcad-44f5-88e0-a672372c41e8",
                                            "name":  "Format variables for final editing1"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  10
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             87376,
                                                             29648
                                                         ],
                                            "id":  "6bfa0b28-ba19-4494-ba31-3eaf1a331674",
                                            "name":  "10 sec1",
                                            "webhookId":  "a26e82ce-7ce3-4c35-8c1b-d38d741e5517"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  10
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             83792,
                                                             29648
                                                         ],
                                            "id":  "a348d831-6f2a-4a73-86cb-d489c9b48ddc",
                                            "name":  "10 sec3",
                                            "webhookId":  "a785c251-3cad-4a14-8459-982605435a38"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  1
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             78416,
                                                             29648
                                                         ],
                                            "id":  "e377702b-07f8-407b-96d1-0d536646171a",
                                            "name":  "Wait 30 sec1",
                                            "webhookId":  "77b845bd-e51b-4251-be3f-0a35c9c33b73"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  30
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             84912,
                                                             29648
                                                         ],
                                            "id":  "6f4111b7-d6fb-43a4-afd2-4ffa133af7ca",
                                            "name":  "30 sec2",
                                            "webhookId":  "80f025e0-e388-4a80-8b4c-1a13950f84c7"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// Get the images array\nconst images = $input.first().json.body[0].images\n\n// Return each image as a separate item\nreturn images.map(image =\u003e ({\n  json: {\n    imageurl: image.imageurl,\n  \n  }\n}));"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             77472,
                                                             29792
                                                         ],
                                            "id":  "9ebfc7e0-1c7d-4e8c-b5db-3610540cd1ac",
                                            "name":  "Separate image data"
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027json2video - Edit video1\u0027).item.json.project }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             87600,
                                                             29648
                                                         ],
                                            "id":  "b439fc41-6315-4e23-ab65-62b30d26aaf4",
                                            "name":  "caption generation",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "=https://api.elevenlabs.io/v1/text-to-speech/{{ $(\u0027Webhook\u0027).first().json.body[0].voiceId }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={{ JSON.stringify({ text: $json.text, model_id: \"eleven_multilingual_v2\", voice_settings: { stability: 0.5, similarity_boost: 0.75 } }) }}",
                                                               "options":  {
                                                                               "response":  {
                                                                                                "response":  {
                                                                                                                 "responseFormat":  "file"
                                                                                                             }
                                                                                            }
                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             80208,
                                                             29648
                                                         ],
                                            "id":  "02687d69-da7a-4762-8e11-e651c33c6d5e",
                                            "name":  "Convert text to speech",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "rKfEcb8VGDJowZG5",
                                                                                       "name":  "Eleven Labs"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call jsontovideo to render\u0027).item.json.project }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             86480,
                                                             29648
                                                         ],
                                            "id":  "dcd0b02c-2c24-4b81-808d-b6149ac0a249",
                                            "name":  "Get final video status",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  30
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             86256,
                                                             29648
                                                         ],
                                            "id":  "507cc1d2-20c2-4883-be96-f557368895c3",
                                            "name":  "30 sec",
                                            "webhookId":  "80f025e0-e388-4a80-8b4c-1a13950f84c7"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  30
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             81328,
                                                             29648
                                                         ],
                                            "id":  "61e14c86-f6b6-4473-a25d-a6c169db265f",
                                            "name":  "Wait 30 sec3",
                                            "webhookId":  "cecadd7e-cb24-46a8-8889-a7ddedf4e3ff"
                                        },
                                        {
                                            "parameters":  {
                                                               "amount":  30
                                                           },
                                            "type":  "n8n-nodes-base.wait",
                                            "typeVersion":  1.1,
                                            "position":  [
                                                             82672,
                                                             29648
                                                         ],
                                            "id":  "0725448f-ad1c-4411-b3f0-d27c3497e0ac",
                                            "name":  "30 sec3",
                                            "webhookId":  "0ef02fcf-1b28-452f-8a7f-edbecd24b004"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "const items = $input.all();\n\nconst grouped = [];\nlet groupIndex = 1;\n\nfor (let i = 0; i \u003c items.length; i += 1) {\n  const groupItems = items.slice(i, i + 1);\n\n  // Parse image URLs\n  const images = groupItems.map(item =\u003e {\n    const result = JSON.parse(item.json.data.resultJson);\n    return result.resultUrls[0];\n  });\n\n\n  grouped.push({\n    json: {\n      images: images,\n    }\n  });\n\n  groupIndex++;\n}\n\n// Return grouped items with duration\nreturn grouped;\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             79312,
                                                             29648
                                                         ],
                                            "id":  "870ee445-139a-4ef9-99cd-bf136fb349c6",
                                            "name":  "Make Optimized Images Array from Nano-banana"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// âœ… Get all items from both nodes\nconst request2Items = $input.all();\nconst request1Items = $items(\"Create task on kie to optimize images\");\n\n// Flatten their JSON data\nconst request2Data = request2Items.map(item =\u003e item.json);\nconst request1Data = request1Items.map(item =\u003e item.json);\n\n// Check states\nconst hasFailed = request2Data.some(r =\u003e r?.data?.state === \"fail\");\nconst allSuccess = request2Data.every(r =\u003e r?.data?.state === \"success\");\n\nif (hasFailed) {\n  // âŒ Terminate workflow immediately\n  throw new Error(\"âŒ One or more items have failed. Stopping execution.\");\n}\n\nif (allSuccess) {\n  // âœ… All succeeded â€” append status \"success\"\n  let successData = request2Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"success\",\n    },\n  }));\n\n  // ðŸ”¹ Duplicate the first item and add to end\n  const firstItemCopy = {\n    json: {\n      ...successData[0].json\n    }\n  };\n  successData.push(firstItemCopy);\n\n  return successData;\n} else {\n  // â³ Some still running â€” append status \"pending\"\n  return request1Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"pending\",\n    },\n  }));\n}\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             78864,
                                                             29648
                                                         ],
                                            "id":  "7645c9ce-1e12-4694-aa27-8150878bf06a",
                                            "name":  "Standerdize Response"
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "https://api.kie.ai/api/v1/jobs/recordInfo",
                                                               "sendQuery":  true,
                                                               "queryParameters":  {
                                                                                       "parameters":  [
                                                                                                          {
                                                                                                              "name":  "taskId",
                                                                                                              "value":  "={{ $json.data.taskId }}"
                                                                                                          }
                                                                                                      ]
                                                                                   },
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "options":  {
                                                                               "redirect":  {
                                                                                                "redirect":  {

                                                                                                             }
                                                                                            }
                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             78640,
                                                             29648
                                                         ],
                                            "id":  "ca118dab-6d76-49c1-8191-408248a36d33",
                                            "name":  "Get image from kie"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.kie.ai/api/v1/jobs/createTask",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={\n  \"model\": \"google/nano-banana-edit\",\n  \"input\": {\n    \"image_urls\": [\"{{ $json.imageurl }}\"],\n    \"prompt\": \"Take the provided image of any size and convert it to vertical 9:16 aspect ratio (1080Ã—1920).Keep the main subject perfectly centered.Automatically fill extra space (top, bottom, or sides) naturally to make it a full vertical HD image.Preserve all colors, textures, details, and lighting of the original image.Do not crop or distort the main subject.Output should be high definition, clean, and realistic, ready for Reels/TikTok.\",\n    \"output_format\": \"png\",\n    \"image_size\": \"9:16\"\n  }\n} ",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             77744,
                                                             29648
                                                         ],
                                            "id":  "2ad5ad30-5a77-4306-925e-35fa0d962a4f",
                                            "name":  "Create task on kie to optimize images"
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "strict"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "success-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "success",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     },
                                                                                                     {
                                                                                                         "id":  "error-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "error",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     },
                                                                                                     {
                                                                                                         "id":  "failed-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "failed",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "or"
                                                                              },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             79088,
                                                             29648
                                                         ],
                                            "id":  "2c66163b-9d6d-4491-8d5b-2602197bd389",
                                            "name":  "If Status is Success Go Otherwise Wait",
                                            "alwaysOutputData":  false
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// Get grouped data\nconst grouped = $input.all().map(item =\u003e item.json);\n\n// ---------- PROPERTY INFO ----------\nconst property = $(\u0027Webhook\u0027).first().json.body[0];\nconst propertyType = property.propertyType;\nconst city = property.city;\nconst price = `$${property.price}`;\nconst BedRoom = property.bedroomCount || \u0027\u0027;\nconst RestRoom = property.bathroomCount || \u0027\u0027;\nconst mainSellingPoints = property.mainSellingPoints || [];\nconst squareFeet = property.size || \u0027\u0027;\nconst lotSize = property.lotSize || \u0027\u0027;\nconst preferredTone = property.preferredTone || \u0027enthusiastic\u0027;\n\n// Selling points text\nconst sellingPointsText =\n  mainSellingPoints.length === 1\n    ? mainSellingPoints[0]\n    : mainSellingPoints.length === 2\n    ? `${mainSellingPoints[0]} and ${mainSellingPoints[1]}`\n    : `${mainSellingPoints.slice(0, -1).join(\u0027, \u0027)} and ${mainSellingPoints[mainSellingPoints.length - 1]}`;\n\nconst roomCountsText = lotSize\n  ? `${BedRoom} bed, ${RestRoom} bath, ${lotSize} lot size`\n  : `${BedRoom} bed, ${RestRoom} bath`;\n\n// Flatten all images for AI context\nconst allImages = grouped.flatMap(g =\u003e g.images);\n\n// Convert images to base64 via API (temp URLs not accessible to OpenAI)\nconst base64Response = await fetch(\u0027https://y-tvideo-mvp-m2dz.vercel.app/api/images/to-base64\u0027, {\n  method: \u0027POST\u0027,\n  headers: {\n    \u0027Content-Type\u0027: \u0027application/json\u0027,\n    \u0027Authorization\u0027: \u0027Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77\u0027\n  },\n  body: JSON.stringify({ urls: allImages })\n});\n\nconst base64Data = await base64Response.json();\nconst base64Images = base64Data.images || [];\n\n// Prepare images for AI analysis using base64\nconst imagesForAI = base64Images.map(img =\u003e ({\n  type: \"image_url\",\n  image_url: { url: img.base64 }\n}));\n\n// ---------- USER PROMPT WITH 5 PARTS ----------\nconst userPrompt = `\nWrite a real estate short-form script in a ${preferredTone} tone.\n\nThe property is a ${propertyType} in ${city} priced at ${price}.\nMention ${BedRoom} bedrooms, ${RestRoom} bathrooms, ${squareFeet} sq ft, ${roomCountsText},\nand key features (${sellingPointsText}).\n\nUse image cues naturally (do not say \"look at this\" or \"see that\").\n\nSTRUCTURE \u0026 OUTPUT FORMAT (VERY IMPORTANT):\n\nWrite the script as EXACTLY 5 parts â€” NO extra versions, NO alternatives.\n\nPart 1 â€” Intro (include price, city, and property type)\nPart 2 â€” Rooms \u0026 specs\nPart 3 â€” Image-based description\nPart 4 â€” Motivation â€” highlight key features and images to excite the client\nPart 5 â€” Outro call-to-action\n\nReturn the final output as:\n\n[Part 1 text]\n\\\\n\\\\n\n[Part 2 text]\n\\\\n\\\\n\n[Part 3 text]\n\\\\n\\\\n\n[Part 4 text]\n\\\\n\\\\n\n[Part 5 text]\n\nDo NOT add headings, labels, numbers, brackets, or bullet points.\nTotal length should remain around 100â€“110 words overall (all parts combined).\nKeep it human, smooth, and friendly.\n`;\n\n// ---------- OPENAI API PAYLOAD ----------\nconst apiPayload = {\n  model: \"gpt-4o\",\n  messages: [\n    {\n      role: \"system\",\n      content: `You are an expert real estate copywriter. Produce only one script and follow the exact formatting rules.`\n    },\n    {\n      role: \"user\",\n      content: [\n        ...imagesForAI,\n        { type: \"text\", text: userPrompt }\n      ]\n    }\n  ],\n  temperature: 0.9\n};\n\nreturn { json: apiPayload };\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             79536,
                                                             29648
                                                         ],
                                            "id":  "1f9548d6-5081-47ea-9e95-fff9628e8fdd",
                                            "name":  "Prepare Body for GPT To Analyze Images",
                                            "disabled":  true
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.openai.com/v1/chat/completions",
                                                               "authentication":  "predefinedCredentialType",
                                                               "nodeCredentialType":  "openAiApi",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Content-Type",
                                                                                                               "value":  "application/json"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={{ $json }}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             79760,
                                                             29648
                                                         ],
                                            "id":  "bfdd831d-ce38-4dff-a826-0e5b2e11f5bb",
                                            "name":  "Call Open AI To Analyze Images And Generate Script Accordingly",
                                            "credentials":  {
                                                                "openAiApi":  {
                                                                                  "id":  "t6s7bmAzIhZsEH0A",
                                                                                  "name":  "OpenAi account 2"
                                                                              }
                                                            },
                                            "disabled":  true
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// Check if frontend provided script sections (respects user\u0027s image order)\nconst webhookResponse = $(\u0027Webhook\u0027).first().json.body[0].webhookResponse;\n\nif (webhookResponse \u0026\u0026 webhookResponse.length \u003e 0) {\n  // Use frontend\u0027s pre-generated script\n  return webhookResponse.map(text =\u003e ({\n    json: { text }\n  }));\n}\n\n// Fallback: use GPT-generated script (legacy path)\nconst content = $input.first().json.choices[0].message.content;\nconst contentArray = content.split(\u0027\\n\\n\u0027);\nreturn contentArray.map(part =\u003e ({\n  json: { text: part }\n}));\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             79984,
                                                             29648
                                                         ],
                                            "id":  "0739a34c-0a42-43a8-881d-1c8a3bdd1370",
                                            "name":  "Split the Script by double newline"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/audio/upload",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Content-Type",
                                                                                                               "value":  "audio/mpeg"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer 0f293a3e6502cda70445cb70b744afbc42356b4feec619ce937f305c15332b77"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "contentType":  "binaryData",
                                                               "inputDataFieldName":  "data",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             80432,
                                                             29648
                                                         ],
                                            "id":  "141e090b-e8bb-4c37-95e3-069db7cd3284",
                                            "name":  "Upload Speech To S3"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://y-tvideo-mvp-m2dz.vercel.app/api/audio/duration",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Content-Type",
                                                                                                               "value":  "application/json"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={{ JSON.stringify({ url: $json.Location }) }}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             80656,
                                                             29648
                                                         ],
                                            "id":  "5541fafa-d1a3-4490-a949-46aa3a07d773",
                                            "name":  "Get duration of voices"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.kie.ai/api/v1/jobs/createTask",
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "sendBody":  true,
                                                               "specifyBody":  "json",
                                                               "jsonBody":  "={\n  \"model\": \"kling-2.6/image-to-video\",\n  \"input\": {\n    \"image_urls\": [\"{{ $json.imageurl }}\"],\n    \"prompt\": \"{{ $json.prompt }}\",\n    \"negative_prompt\": \"{{ $json.negative_prompt }}\",\n    \"duration\": \"5\",\n    \"sound\": false\n  }\n}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             81104,
                                                             29648
                                                         ],
                                            "id":  "0ef87ce6-24c6-4152-9f75-811da7fd2849",
                                            "name":  "Call Kie Api Kling Model to Generate image to video"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "const images = $(\u0027Get image from kie\u0027).all();\n\n// Kling prompts optimized for real estate - avoid mirroring/reflection artifacts\nconst prompts = [\n  \"Gentle slow zoom-in, subtle forward camera motion over 5 seconds. Maintain original image integrity with no mirroring, no reflections, no distortion. Keep all edges and boundaries stable. Smooth cinematic quality with natural parallax. Preserve exact colors and lighting.\",\n  \"Very subtle left-to-right drift, barely perceptible slow pan over 5 seconds. No warping, no mirroring, no edge distortion. Maintain image fidelity throughout. Gentle ambient motion with stable framing. Keep original composition intact.\",\n  \"Slow gentle push-in with minimal camera movement over 5 seconds. Preserve image exactly as shown with no transformation or reflection effects. Subtle depth animation only. Clean professional real estate video quality.\"\n];\n\n// Negative prompt to avoid unwanted elements\nconst negativePrompt = \"ceiling fan, spinning fan, rotating blades, mirrored image, reflection, distortion, warping, duplicated elements, reversed image, split screen, kaleidoscope effect, morphing, deformation\";\n\nreturn images.map(image =\u003e {\n  const parsed = JSON.parse(image.json.data.resultJson);\n  const resultUrl = parsed.resultUrls[0];\n\n  return {\n    json: {\n      imageurl: resultUrl,\n      prompt: prompts[Math.floor(Math.random() * prompts.length)],\n      negative_prompt: negativePrompt\n    }\n  };\n});\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             80880,
                                                             29648
                                                         ],
                                            "id":  "ca41e087-9f4f-4667-89bb-a33e65fce269",
                                            "name":  "Prepare Body for Kie API (Kling model to generate video)"
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "https://api.kie.ai/api/v1/jobs/recordInfo",
                                                               "sendQuery":  true,
                                                               "queryParameters":  {
                                                                                       "parameters":  [
                                                                                                          {
                                                                                                              "name":  "taskId",
                                                                                                              "value":  "={{ $json.data.taskId }}"
                                                                                                          }
                                                                                                      ]
                                                                                   },
                                                               "sendHeaders":  true,
                                                               "headerParameters":  {
                                                                                        "parameters":  [
                                                                                                           {
                                                                                                               "name":  "Authorization",
                                                                                                               "value":  "Bearer e46522bee7b4aebb303feeb54eb8e32e"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "Cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B"
                                                                                                           },
                                                                                                           {
                                                                                                               "name":  "cookie",
                                                                                                               "value":  "JSESSIONID=9418A560CB6F2F16E797A92ADDCC3F4B;"
                                                                                                           }
                                                                                                       ]
                                                                                    },
                                                               "options":  {
                                                                               "redirect":  {
                                                                                                "redirect":  {

                                                                                                             }
                                                                                            }
                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             81552,
                                                             29648
                                                         ],
                                            "id":  "52fa8d7c-ddc7-45b3-ac29-5a372970a57a",
                                            "name":  "Get Kie Video Urls"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// âœ… Get all items from both nodes\nconst request2Items = $input.all();\nconst request1Items = $items(\"Call Kie Api Kling Model to Generate image to video\");\n\n// Flatten their JSON data\nconst request2Data = request2Items.map(item =\u003e item.json);\nconst request1Data = request1Items.map(item =\u003e item.json);\n\n// Check states\nconst hasFailed = request2Data.some(r =\u003e r?.data?.state === \"failed\");\nconst allSuccess = request2Data.every(r =\u003e r?.data?.state === \"success\");\n\nif (hasFailed) {\n  // âŒ Terminate workflow immediately\n  throw new Error(\"âŒ One or more items have failed. Stopping execution.\");\n}\n\nif (allSuccess) {\n  // âœ… All succeeded â€” append status \"success\"\n  return request2Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"success\",\n    },\n  }));\n} else {\n  // â³ Some still running â€” append status \"pending\"\n  return request1Data.map(item =\u003e ({\n    json: {\n      ...item,\n      status: \"pending\",\n    },\n  }));\n}\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             81776,
                                                             29648
                                                         ],
                                            "id":  "9d6768de-e904-4613-af4d-05adfe528f3b",
                                            "name":  "Standerdized Response"
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "strict"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "success-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "success",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     },
                                                                                                     {
                                                                                                         "id":  "error-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "error",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     },
                                                                                                     {
                                                                                                         "id":  "failed-condition",
                                                                                                         "leftValue":  "={{ $json.status }}",
                                                                                                         "rightValue":  "failed",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "or"
                                                                              },
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             82000,
                                                             29648
                                                         ],
                                            "id":  "2bc82602-b417-4fc9-ab93-ff2b8ac99717",
                                            "name":  "If Status is Success Go Otherwise Wait1",
                                            "alwaysOutputData":  false
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// Get all Kling video results (flattened)\nconst allItems = $input.all();\n\n// Flatten all URLs into a single array\nconst allUrls = allItems.flatMap(item =\u003e {\n  const result = JSON.parse(item.json.data.resultJson);\n  return result.resultUrls || [];\n});\n\n// Define positions (example, repeat if needed)\n\n// Map URLs to JSON output\nreturn allUrls.map((videoUrl, index) =\u003e {\n  return {\n    json: {\n      imageVideoUrl: videoUrl\n    }\n  };\n});\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             82224,
                                                             29648
                                                         ],
                                            "id":  "837a7bd0-c5b9-450a-81b9-cbe3a64001f3",
                                            "name":  "Seprate All Video Urls Generatad from Kei"
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Render Kie videos in json2video (full duration)\u0027).item.json.project }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             82896,
                                                             29648
                                                         ],
                                            "id":  "d4c3bd15-0e85-4740-b0e6-d030a1ea739b",
                                            "name":  "Get Video from Jsontovideo",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.json2video.com/v2/movies",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "contentType":  "raw",
                                                               "rawContentType":  "application/json",
                                                               "body":  "={\n  \"resolution\": \"custom\",\n  \"quality\": \"high\",\n  \"width\": 1080,\n  \"height\": 1920,\n  \"scenes\": [\n    {\n      \"elements\": [\n        {\n          \"type\": \"video\",\n          \"src\": \"{{ $json.imageVideoUrl }}\",\n          \"start\": 0,\n          \"width\": 1080,\n          \"height\": 1920\n        }\n      ]\n    }\n  ]\n}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             82448,
                                                             29648
                                                         ],
                                            "id":  "f5c5c367-aac1-4a95-ba40-024203da1ef4",
                                            "name":  "Render Kie videos in json2video (full duration)",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "loose"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "done-condition",
                                                                                                         "leftValue":  "={{ $json.movie.status }}",
                                                                                                         "rightValue":  "done",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     },
                                                                                                     {
                                                                                                         "id":  "error-condition",
                                                                                                         "leftValue":  "={{ $json.movie.status }}",
                                                                                                         "rightValue":  "error",
                                                                                                         "operator":  {
                                                                                                                          "type":  "string",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "or"
                                                                              },
                                                               "looseTypeValidation":  true,
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             83120,
                                                             29648
                                                         ],
                                            "id":  "4a3a7b8f-a956-4cab-8cbc-0299a1f220e7",
                                            "name":  "If status is done go otherwise wait"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "const items = $input.all();\n\n// Extract video URLs\nconst videoUrls = items.map(item =\u003e item.json.movie.url);\n\n// Build scenes array - simple structure without transitions\nconst scenes = videoUrls.map((url, index) =\u003e ({\n  elements: [\n    {\n      type: \"video\",\n      src: url\n    }\n  ]\n}));\n\n// JSON2Video payload\nconst json2videoPayload = {\n  resolution: \"custom\",\n  width: 1080,\n  height: 1920,\n  quality: \"high\",\n  scenes: scenes\n};\n\nreturn [{ json: json2videoPayload }];"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             83344,
                                                             29648
                                                         ],
                                            "id":  "7c8cadad-9c05-4b18-9c65-8b390860dd7a",
                                            "name":  "Make body for jsontovideo Api to merge videos clips"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.json2video.com/v2/movies",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "contentType":  "raw",
                                                               "rawContentType":  "scenes",
                                                               "body":  "={{ $json}}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             83552,
                                                             29648
                                                         ],
                                            "id":  "7095218c-5573-4f82-8a13-0c938c6ce63a",
                                            "name":  "Call Jsontovideo API to merge clips",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call Jsontovideo API to merge clips\u0027).item.json.project }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             84016,
                                                             29648
                                                         ],
                                            "id":  "fa34bbc2-2193-4813-903b-3b75836fca46",
                                            "name":  "Get merged video Status",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "loose"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "2643b070-cbb2-4562-9269-a61389e0c242",
                                                                                                         "leftValue":  "={{ $json.movie.success }}",
                                                                                                         "rightValue":  "true",
                                                                                                         "operator":  {
                                                                                                                          "type":  "boolean",
                                                                                                                          "operation":  "true",
                                                                                                                          "singleValue":  true
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "and"
                                                                              },
                                                               "looseTypeValidation":  true,
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             84240,
                                                             29648
                                                         ],
                                            "id":  "ff3a6e2f-26ae-49aa-9466-f3bc7b811308",
                                            "name":  "If status is done go otherwise wait1"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// ============================================================\n// prepare body for jsontovideo to set video\n// FIXED: Hybrid timing - image-synced + sequential fallback\n// ENHANCED: Tiered voice speed adjustment + closing speed-up\n// ============================================================\n\nconst movieData = $input.first().json.movie;\n\nif (!movieData) {\n  throw new Error(\u0027PIPELINE ERROR: No movie data from merged video.\u0027);\n}\nif (!movieData.url) {\n  throw new Error(\u0027PIPELINE ERROR: movie.url is undefined. Status: \u0027 + (movieData.status || \u0027unknown\u0027));\n}\nif (movieData.duration === undefined || movieData.duration === null) {\n  throw new Error(\u0027PIPELINE ERROR: movie.duration is undefined.\u0027);\n}\n\nconst videoUrl = movieData.url;\nconst videoDuration = Number(movieData.duration);\n\nif (isNaN(videoDuration) || videoDuration \u003c= 0) {\n  throw new Error(\u0027PIPELINE ERROR: Invalid videoDuration: \u0027 + movieData.duration);\n}\n\nconst audioItems = $(\u0027Get duration of voices\u0027).all();\n\nif (!audioItems || audioItems.length === 0) {\n  throw new Error(\u0027PIPELINE ERROR: No audio items from Get duration of voices.\u0027);\n}\n\nconst audioClips = audioItems.map((a, idx) =\u003e {\n  const url = a.json.data?.url;\n  const duration = Number(a.json.data?.duration);\n  if (!url) {\n    throw new Error(`PIPELINE ERROR: Audio clip ${idx} has no URL.`);\n  }\n  if (isNaN(duration) || duration \u003c= 0) {\n    throw new Error(`PIPELINE ERROR: Audio clip ${idx} has invalid duration: ${a.json.data?.duration}`);\n  }\n  return { url, duration };\n});\n\n// Constants\nconst CLIP_DURATION = 5;\nconst INTRO_SILENCE = 2;\nconst END_CARD_DURATION = 6;\nconst MAX_CLOSING_SPEED = 1.25;  // Max 25% speed increase for closing\n\nconst webhookData = $(\u0027Webhook\u0027).first().json.body;\nlet sectionMapping = [];\n\nif (Array.isArray(webhookData) \u0026\u0026 webhookData[0]?.sectionImageMapping) {\n  sectionMapping = webhookData[0].sectionImageMapping;\n} else if (webhookData?.sectionImageMapping) {\n  sectionMapping = webhookData.sectionImageMapping;\n}\n\nconsole.log(\u0027Audio clips count:\u0027, audioClips.length);\nconsole.log(\u0027Video duration:\u0027, videoDuration, \u0027s\u0027);\n\n// Calculate total narration duration for tiered adjustment\nconst totalNarrationDuration = audioClips.reduce((sum, clip) =\u003e sum + clip.duration, 0);\nconst availableTime = videoDuration - END_CARD_DURATION;\n\n// Calculate mismatch\nconst overrun = totalNarrationDuration - availableTime;\nconst overrunPercent = availableTime \u003e 0 ? (overrun / availableTime) * 100 : 0;\n\nconsole.log(`Narration: ${totalNarrationDuration.toFixed(1)}s, Available: ${availableTime.toFixed(1)}s`);\nconsole.log(`Overrun: ${overrun.toFixed(1)}s (${overrunPercent.toFixed(1)}%)`);\n\n// Tiered adjustment logic for overall narration\nlet audioSpeedMultiplier = 1.0;\nlet perImageExtension = 0;\nlet adjustmentApplied = \u0027none\u0027;\n\nif (overrun \u003c= 0) {\n  console.log(\u0027OK: Narration fits within video duration\u0027);\n  adjustmentApplied = \u0027none\u0027;\n} else if (overrunPercent \u003c= 8) {\n  // Small overrun - speed up audio slightly (imperceptible)\n  audioSpeedMultiplier = 1 + (overrunPercent / 100);\n  console.log(`SPEED: Audio sped up by ${overrunPercent.toFixed(1)}% (speed: ${audioSpeedMultiplier.toFixed(3)})`);\n  adjustmentApplied = \u0027speed\u0027;\n} else if (overrunPercent \u003c= 15) {\n  // Medium overrun - distribute across all images\n  const imageCount = Math.floor(videoDuration / CLIP_DURATION);\n  perImageExtension = overrun / imageCount;\n  console.log(`EXTEND: Each image extended by ${perImageExtension.toFixed(2)}s (${imageCount} images)`);\n  adjustmentApplied = \u0027extend\u0027;\n} else {\n  // Large overrun (\u003e15%) - apply both adjustments\n  audioSpeedMultiplier = 1.08; // Max imperceptible speed\n  const remainingOverrun = overrun - (availableTime * 0.08);\n  const imageCount = Math.floor(videoDuration / CLIP_DURATION);\n  perImageExtension = Math.max(0, remainingOverrun / imageCount);\n  console.warn(`WARN: Large overrun (${overrunPercent.toFixed(1)}%) - speed: ${audioSpeedMultiplier}, extend: ${perImageExtension.toFixed(2)}s/image`);\n  adjustmentApplied = \u0027both\u0027;\n}\n\nlet timeline = [];\n\nif (sectionMapping \u0026\u0026 sectionMapping.length \u003e 0) {\n  // Separate opening, closing, and middle sections\n  const openingSection = sectionMapping.find(s =\u003e s.sectionType === \u0027opening\u0027);\n  const closingSection = sectionMapping.find(s =\u003e s.sectionType === \u0027closing\u0027);\n  const middleSections = sectionMapping\n    .filter(s =\u003e s.sectionType !== \u0027opening\u0027 \u0026\u0026 s.sectionType !== \u0027closing\u0027)\n    .map((section) =\u003e ({\n      ...section,\n      clip: audioClips[section.sectionIndex]\n    }))\n    .filter(s =\u003e s.clip);\n\n  // Sort middle sections by their first image index (image-synced timing)\n  middleSections.sort((a, b) =\u003e {\n    const aFirst = a.imageIndices.length \u003e 0 ? Math.min(...a.imageIndices) : Infinity;\n    const bFirst = b.imageIndices.length \u003e 0 ? Math.min(...b.imageIndices) : Infinity;\n    return aFirst - bFirst;\n  });\n\n  console.log(\u0027Strategy: Hybrid timing - opening at 2s, middle synced to images, closing before end card\u0027);\n  console.log(\u0027Middle section order:\u0027, middleSections.map(s =\u003e `${s.sectionType}(img${Math.min(...s.imageIndices)})`).join(\u0027 -\u003e \u0027));\n\n  let currentTime = INTRO_SILENCE;\n\n  // 1. OPENING - always plays at 2s (first images visible)\n  if (openingSection) {\n    const openingClip = audioClips[openingSection.sectionIndex];\n    if (openingClip) {\n      const playbackDuration = audioSpeedMultiplier !== 1.0 \n        ? openingClip.duration / audioSpeedMultiplier \n        : openingClip.duration;\n      \n      console.log(`Section \"opening\": start=${currentTime}s (images 0-1), duration=${playbackDuration.toFixed(2)}s`);\n      \n      const audioElement = {\n        type: \u0027audio\u0027,\n        src: openingClip.url,\n        start: parseFloat(currentTime.toFixed(3)),\n        duration: openingClip.duration,\n        loop: 0,\n        volume: 2\n      };\n      if (audioSpeedMultiplier !== 1.0) {\n        audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n      }\n      timeline.push(audioElement);\n      currentTime += playbackDuration;\n    }\n  }\n\n  // 2. MIDDLE SECTIONS - sync with image timing (hybrid approach)\n  for (const sectionData of middleSections) {\n    const firstImageIndex = sectionData.imageIndices.length \u003e 0\n      ? Math.min(...sectionData.imageIndices)\n      : 0;\n    \n    // Calculate when the image appears on screen\n    const imageStartTime = firstImageIndex * (CLIP_DURATION + perImageExtension);\n    \n    // Use image-synced timing OR after previous ends (whichever is later)\n    // This ensures narration matches what\u0027s on screen while preventing overlap\n    const sectionStart = Math.max(imageStartTime, currentTime);\n    \n    const playbackDuration = audioSpeedMultiplier !== 1.0 \n      ? sectionData.clip.duration / audioSpeedMultiplier \n      : sectionData.clip.duration;\n\n    const syncType = sectionStart === imageStartTime ? \u0027image-synced\u0027 : \u0027sequential\u0027;\n    console.log(`Section \"${sectionData.sectionType}\": firstImage=${firstImageIndex}, imageTime=${imageStartTime.toFixed(1)}s, start=${sectionStart.toFixed(1)}s (${syncType}), duration=${playbackDuration.toFixed(2)}s`);\n\n    const audioElement = {\n      type: \u0027audio\u0027,\n      src: sectionData.clip.url,\n      start: parseFloat(sectionStart.toFixed(3)),\n      duration: sectionData.clip.duration,\n      loop: 0,\n      volume: 2\n    };\n    if (audioSpeedMultiplier !== 1.0) {\n      audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n    }\n    timeline.push(audioElement);\n\n    currentTime = sectionStart + playbackDuration;\n  }\n\n  // 3. CLOSING - ensure it ends before end card (speed up if needed)\n  if (closingSection) {\n    const closingClip = audioClips[closingSection.sectionIndex];\n    if (closingClip) {\n      // Calculate extended video duration if images were extended\n      const totalImageCount = Math.floor(videoDuration / CLIP_DURATION);\n      const extendedVideoDuration = videoDuration + (perImageExtension * totalImageCount);\n      \n      // Closing must end 0.5s before end card fades in\n      const mustEndBy = extendedVideoDuration - END_CARD_DURATION - 0.5;\n      \n      // Start closing after current time (no overlap with previous section)\n      let closingStart = currentTime;\n      let closingSpeed = audioSpeedMultiplier;  // Use global speed by default\n      let playbackDuration = closingSpeed !== 1.0 \n        ? closingClip.duration / closingSpeed \n        : closingClip.duration;\n      \n      // Check if closing would exceed the deadline\n      if (closingStart + playbackDuration \u003e mustEndBy) {\n        // Calculate required speed to fit closing before end card\n        const availableClosingTime = mustEndBy - closingStart;\n        \n        if (availableClosingTime \u003e 0) {\n          // Speed up closing to fit (cap at MAX_CLOSING_SPEED)\n          const requiredSpeed = closingClip.duration / availableClosingTime;\n          closingSpeed = Math.min(requiredSpeed, MAX_CLOSING_SPEED);\n          playbackDuration = closingClip.duration / closingSpeed;\n          \n          console.log(`CLOSING SPEED-UP: ${(closingSpeed * 100 - 100).toFixed(1)}% faster (speed=${closingSpeed.toFixed(3)}) to finish by ${mustEndBy.toFixed(1)}s`);\n          adjustmentApplied = adjustmentApplied === \u0027none\u0027 ? \u0027closing-speed\u0027 : adjustmentApplied + \u0027+closing-speed\u0027;\n        } else {\n          console.warn(`WARN: No time for closing narration! Placing at ${closingStart.toFixed(1)}s anyway.`);\n        }\n      }\n      \n      console.log(`Section \"closing\": start=${closingStart.toFixed(1)}s, ends=${(closingStart + playbackDuration).toFixed(1)}s, deadline=${mustEndBy.toFixed(1)}s`);\n\n      const audioElement = {\n        type: \u0027audio\u0027,\n        src: closingClip.url,\n        start: parseFloat(closingStart.toFixed(3)),\n        duration: closingClip.duration,\n        loop: 0,\n        volume: 2\n      };\n      if (closingSpeed !== 1.0) {\n        audioElement.speed = parseFloat(closingSpeed.toFixed(3));\n      }\n      timeline.push(audioElement);\n    }\n  }\n\n} else {\n  // No section mapping - sequential fallback\n  console.log(\u0027Strategy: No section mapping - sequential from start\u0027);\n  let t = INTRO_SILENCE;\n  audioClips.forEach((clip, idx) =\u003e {\n    const audioElement = {\n      type: \u0027audio\u0027,\n      src: clip.url,\n      start: parseFloat(t.toFixed(3)),\n      duration: clip.duration,\n      loop: 0,\n      volume: 2\n    };\n    if (audioSpeedMultiplier !== 1.0) {\n      audioElement.speed = parseFloat(audioSpeedMultiplier.toFixed(3));\n    }\n    timeline.push(audioElement);\n    const playbackDuration = audioSpeedMultiplier !== 1.0 \n      ? clip.duration / audioSpeedMultiplier \n      : clip.duration;\n    t += playbackDuration;\n  });\n}\n\n// Log final timeline for verification\nconsole.log(\u0027=== Final audio timeline ===\u0027);\ntimeline.forEach((t, i) =\u003e {\n  const speedInfo = t.speed ? ` (speed: ${t.speed})` : \u0027\u0027;\n  console.log(`  [${i}] start: ${t.start}s, duration: ${t.duration}s${speedInfo}`);\n});\n\n// Build video element - extend duration if needed\nconst totalImageCount = Math.floor(videoDuration / CLIP_DURATION);\nconst extendedVideoDuration = perImageExtension \u003e 0 \n  ? videoDuration + (perImageExtension * totalImageCount)\n  : videoDuration;\n\nconst videoElement = {\n  type: \u0027video\u0027,\n  src: videoUrl,\n  volume: 0\n};\n\n// If extending images, add duration property\nif (perImageExtension \u003e 0) {\n  videoElement.duration = extendedVideoDuration;\n  console.log(`Extended video duration: ${extendedVideoDuration.toFixed(1)}s (was ${videoDuration}s)`);\n}\n\n// Payload for json2video API - no custom fields allowed\nconst payload = {\n  width: 1080,\n  height: 1920,\n  quality: \u0027high\u0027,\n  resolution: \u0027custom\u0027,\n  scenes: [\n    {\n      elements: [\n        videoElement,\n        ...timeline\n      ]\n    }\n  ]\n};\n\nconsole.log(\u0027=== Summary ===\u0027);\nconsole.log(\u0027First audio starts at:\u0027, timeline[0]?.start, \u0027s\u0027);\nconsole.log(\u0027Adjustment applied:\u0027, adjustmentApplied);\n\nreturn [{ json: payload }];"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             84464,
                                                             29648
                                                         ],
                                            "id":  "cae2002a-6959-4678-92f2-f4c379fc3425",
                                            "name":  "prepare body for jsontovideo to set video"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.json2video.com/v2/movies",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "contentType":  "raw",
                                                               "rawContentType":  "scenes",
                                                               "body":  "={{ $json}}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             84688,
                                                             29648
                                                         ],
                                            "id":  "066479f5-4324-4bc4-8321-e5853e007784",
                                            "name":  "Call Jsontovideo to create task",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "url":  "=https://api.json2video.com/v2/movies?id={{ $(\u0027Call Jsontovideo to create task\u0027).item.json.project }}",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.2,
                                            "position":  [
                                                             85136,
                                                             29648
                                                         ],
                                            "id":  "afd367fd-42bb-452f-9ac9-31ce4d75af0c",
                                            "name":  "Get video status",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "loose"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "cond1-success-true",
                                                                                                         "leftValue":  "={{ $json.movie.success }}",
                                                                                                         "rightValue":  true,
                                                                                                         "operator":  {
                                                                                                                          "type":  "boolean",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "and"
                                                                              },
                                                               "looseTypeValidation":  true,
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             85360,
                                                             29648
                                                         ],
                                            "id":  "3a550f1e-d2ed-47ee-a352-65644d88b380",
                                            "name":  "If Task is Status is done go otherwise wait"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// Validate input from previous render step\nconst movieData = $input.first().json.movie;\nif (!movieData) {\n  throw new Error(\u0027PIPELINE ERROR: No movie data from previous render. Check \"Get video status\" output.\u0027);\n}\nif (!movieData.url) {\n  throw new Error(\u0027PIPELINE ERROR: movie.url is undefined. Previous render (\"Call Jsontovideo to create task\") may have failed. Status: \u0027 + (movieData.status || \u0027unknown\u0027) + \u0027, Error: \u0027 + (movieData.message || \u0027none\u0027));\n}\nif (!movieData.duration) {\n  throw new Error(\u0027PIPELINE ERROR: movie.duration is undefined.\u0027);\n}\n\nconst videoUrl = movieData.url;\nconst videoDuration = Number(movieData.duration);\nconst musicUrl = $(\u0027Webhook\u0027).first().json.body[0].music;\n\nconst audioDetails = $(\u0027Get duration of voices\u0027).all();\nconst audioStarting = $(\u0027prepare body for jsontovideo to set video\u0027).all();\n\n// Validate audio data\nif (!audioDetails || audioDetails.length === 0) {\n  throw new Error(\u0027PIPELINE ERROR: No audio details from \"Get duration of voices\"\u0027);\n}\nif (!audioStarting || audioStarting.length === 0 || !audioStarting[0].json.scenes) {\n  throw new Error(\u0027PIPELINE ERROR: No audio starting times from \"prepare body for jsontovideo to set video\"\u0027);\n}\n\n// durations from API\nconst durations = audioDetails.map(item =\u003e {\n  const dur = item.json.data?.duration;\n  if (dur === undefined) {\n    throw new Error(\u0027PIPELINE ERROR: Audio item missing duration\u0027);\n  }\n  return dur;\n});\n\n// extract start times from scenes\nconst starts = audioStarting[0].json.scenes[0].elements\n  .filter(el =\u003e el.type === \u0027audio\u0027)\n  .map(el =\u003e el.start);\n\nreturn [\n  {\n    json: {\n      videoUrl,\n      musicUrl,\n      durations,\n      starts,\n      videoDuration\n    }\n  }\n];\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             85584,
                                                             29648
                                                         ],
                                            "id":  "2b131b50-6524-4e9f-877c-732f1ba94016",
                                            "name":  "get video metadata to add music"
                                        },
                                        {
                                            "parameters":  {
                                                               "method":  "POST",
                                                               "url":  "https://api.json2video.com/v2/movies",
                                                               "authentication":  "genericCredentialType",
                                                               "genericAuthType":  "httpHeaderAuth",
                                                               "sendBody":  true,
                                                               "contentType":  "raw",
                                                               "rawContentType":  "scenes",
                                                               "body":  "={{ $json}}",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.httpRequest",
                                            "typeVersion":  4.3,
                                            "position":  [
                                                             86032,
                                                             29648
                                                         ],
                                            "id":  "bb155957-fa48-4f53-a614-120cc5ebb80f",
                                            "name":  "Call jsontovideo to render",
                                            "credentials":  {
                                                                "httpHeaderAuth":  {
                                                                                       "id":  "ZmaCE8owCz8ioHlO",
                                                                                       "name":  "json2video"
                                                                                   }
                                                            }
                                        },
                                        {
                                            "parameters":  {
                                                               "conditions":  {
                                                                                  "options":  {
                                                                                                  "version":  2,
                                                                                                  "leftValue":  "",
                                                                                                  "caseSensitive":  true,
                                                                                                  "typeValidation":  "loose"
                                                                                              },
                                                                                  "conditions":  [
                                                                                                     {
                                                                                                         "id":  "cond1-success-true",
                                                                                                         "leftValue":  "={{ $json.movie.success }}",
                                                                                                         "rightValue":  true,
                                                                                                         "operator":  {
                                                                                                                          "type":  "boolean",
                                                                                                                          "operation":  "equals"
                                                                                                                      }
                                                                                                     }
                                                                                                 ],
                                                                                  "combinator":  "and"
                                                                              },
                                                               "looseTypeValidation":  true,
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.if",
                                            "typeVersion":  2.2,
                                            "position":  [
                                                             86704,
                                                             29648
                                                         ],
                                            "id":  "ce04738d-8506-4d61-b84d-173e4cf8c121",
                                            "name":  "if task is done go otherwise wait"
                                        },
                                        {
                                            "parameters":  {
                                                               "jsCode":  "// ============================================================\n// Prepare body for jsontovideo to render video\n// Adds ONLY music track with ducking - no text overlays\n// Video volume = 1 to preserve narration from previous render\n// ============================================================\n\nconst inputData = $input.first().json;\n\n// VALIDATION\nif (!inputData.videoUrl) {\n  throw new Error(\u0027VIDEO_URL_MISSING: videoUrl is undefined.\u0027);\n}\nif (!inputData.videoDuration || isNaN(inputData.videoDuration)) {\n  throw new Error(\u0027VIDEO_DURATION_MISSING: videoDuration is \u0027 + inputData.videoDuration);\n}\nif (!inputData.musicUrl) {\n  throw new Error(\u0027MUSIC_URL_MISSING: musicUrl is undefined.\u0027);\n}\nif (!inputData.durations || !inputData.starts) {\n  throw new Error(\u0027AUDIO_DATA_MISSING: durations or starts array is undefined.\u0027);\n}\n\nconst videoUrl = inputData.videoUrl;\nconst musicUrl = inputData.musicUrl;\nconst durations = inputData.durations;\nconst starts = inputData.starts;\nconst videoDuration = Number(inputData.videoDuration);\n\n// Music volume settings (reduced 15% from original 0.8/0.15)\nconst MUSIC_HIGH = 0.68;\nconst MUSIC_LOW = 0.13;\nconst FADE_TIME = 0.5;\nconst MUSIC_TRACK_DURATION = 90;\n\nlet musicTimeline = [];\nlet currentTime = 0;\nlet musicOffset = 0;\n\n// Build music timeline with ducking during voice segments\nfor (let i = 0; i \u003c starts.length; i++) {\n  const voiceStart = starts[i];\n  const voiceDuration = durations[i];\n  const voiceEnd = voiceStart + voiceDuration;\n\n  // High-volume music during gaps (before voice)\n  if (voiceStart \u003e currentTime) {\n    const gapDuration = voiceStart - currentTime;\n    musicTimeline.push({\n      type: \u0027audio\u0027,\n      src: musicUrl,\n      start: currentTime,\n      seek: musicOffset % MUSIC_TRACK_DURATION,\n      duration: gapDuration,\n      volume: MUSIC_HIGH,\n      \u0027fade-out\u0027: FADE_TIME\n    });\n    musicOffset += gapDuration;\n  }\n\n  // Low-volume music during voice (ducked)\n  musicTimeline.push({\n    type: \u0027audio\u0027,\n    src: musicUrl,\n    start: voiceStart,\n    seek: musicOffset % MUSIC_TRACK_DURATION,\n    duration: voiceDuration,\n    volume: MUSIC_LOW,\n    \u0027fade-in\u0027: FADE_TIME,\n    \u0027fade-out\u0027: FADE_TIME\n  });\n  musicOffset += voiceDuration;\n  currentTime = voiceEnd;\n}\n\n// Remaining music after last voice\nif (currentTime \u003c videoDuration) {\n  const remainingDuration = videoDuration - currentTime;\n  musicTimeline.push({\n    type: \u0027audio\u0027,\n    src: musicUrl,\n    start: currentTime,\n    seek: musicOffset % MUSIC_TRACK_DURATION,\n    duration: remainingDuration,\n    volume: MUSIC_HIGH,\n    \u0027fade-in\u0027: FADE_TIME,\n    \u0027fade-out\u0027: 1.0\n  });\n}\n\n// Build final json2video payload\n// NOTE: video volume = 1 to PRESERVE NARRATION from previous render!\nconst payload = {\n  width: 1080,\n  height: 1920,\n  quality: \u0027high\u0027,\n  resolution: \u0027custom\u0027,\n  scenes: [\n    {\n      elements: [\n        {\n          type: \u0027video\u0027,\n          src: videoUrl,\n          volume: 1  // IMPORTANT: Keep narration audio!\n        },\n        ...musicTimeline\n      ]\n    }\n  ]\n};\n\nreturn [{ json: payload }];\n"
                                                           },
                                            "type":  "n8n-nodes-base.code",
                                            "typeVersion":  2,
                                            "position":  [
                                                             85808,
                                                             29648
                                                         ],
                                            "id":  "3b77d61f-9dda-4d96-aeab-8f9bdf2eade1",
                                            "name":  "Prepare body for jsontovideo to render video"
                                        },
                                        {
                                            "parameters":  {
                                                               "httpMethod":  "POST",
                                                               "path":  "db085427-02a1-4f47-9934-9c258aa929b3",
                                                               "options":  {

                                                                           }
                                                           },
                                            "type":  "n8n-nodes-base.webhook",
                                            "typeVersion":  2.1,
                                            "position":  [
                                                             77152,
                                                             29760
                                                         ],
                                            "id":  "161e7300-d90f-43fc-94dc-457cd14e976a",
                                            "name":  "Webhook",
                                            "webhookId":  "db085427-02a1-4f47-9934-9c258aa929b3"
                                        }
                                    ],
                          "connections":  {
                                              "Output final video":  {
                                                                         "main":  [
                                                                                      [
                                                                                          {
                                                                                              "node":  "ðŸŽ‰ Send video URL",
                                                                                              "type":  "main",
                                                                                              "index":  0
                                                                                          },
                                                                                          {
                                                                                              "node":  "HTTP Request",
                                                                                              "type":  "main",
                                                                                              "index":  0
                                                                                          }
                                                                                      ]
                                                                                  ]
                                                                     },
                                              "json2video - Edit video1":  {
                                                                               "main":  [
                                                                                            [
                                                                                                {
                                                                                                    "node":  "10 sec1",
                                                                                                    "type":  "main",
                                                                                                    "index":  0
                                                                                                }
                                                                                            ]
                                                                                        ]
                                                                           },
                                              "Check Errors ":  {
                                                                    "main":  [
                                                                                 [
                                                                                     {
                                                                                         "node":  "Output final video",
                                                                                         "type":  "main",
                                                                                         "index":  0
                                                                                     }
                                                                                 ]
                                                                             ]
                                                                },
                                              "Format variables for final editing1":  {
                                                                                          "main":  [
                                                                                                       [
                                                                                                           {
                                                                                                               "node":  "json2video - Edit video1",
                                                                                                               "type":  "main",
                                                                                                               "index":  0
                                                                                                           }
                                                                                                       ]
                                                                                                   ]
                                                                                      },
                                              "10 sec1":  {
                                                              "main":  [
                                                                           [
                                                                               {
                                                                                   "node":  "caption generation",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               }
                                                                           ]
                                                                       ]
                                                          },
                                              "10 sec3":  {
                                                              "main":  [
                                                                           [
                                                                               {
                                                                                   "node":  "Get merged video Status",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               }
                                                                           ]
                                                                       ]
                                                          },
                                              "Wait 30 sec1":  {
                                                                   "main":  [
                                                                                [
                                                                                    {
                                                                                        "node":  "Get image from kie",
                                                                                        "type":  "main",
                                                                                        "index":  0
                                                                                    }
                                                                                ]
                                                                            ]
                                                               },
                                              "30 sec2":  {
                                                              "main":  [
                                                                           [
                                                                               {
                                                                                   "node":  "Get video status",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               }
                                                                           ]
                                                                       ]
                                                          },
                                              "Separate image data":  {
                                                                          "main":  [
                                                                                       [
                                                                                           {
                                                                                               "node":  "Create task on kie to optimize images",
                                                                                               "type":  "main",
                                                                                               "index":  0
                                                                                           }
                                                                                       ]
                                                                                   ]
                                                                      },
                                              "caption generation":  {
                                                                         "main":  [
                                                                                      [
                                                                                          {
                                                                                              "node":  "Check Errors ",
                                                                                              "type":  "main",
                                                                                              "index":  0
                                                                                          }
                                                                                      ]
                                                                                  ]
                                                                     },
                                              "Convert text to speech":  {
                                                                             "main":  [
                                                                                          [
                                                                                              {
                                                                                                  "node":  "Upload Speech To S3",
                                                                                                  "type":  "main",
                                                                                                  "index":  0
                                                                                              }
                                                                                          ]
                                                                                      ]
                                                                         },
                                              "Get final video status":  {
                                                                             "main":  [
                                                                                          [
                                                                                              {
                                                                                                  "node":  "if task is done go otherwise wait",
                                                                                                  "type":  "main",
                                                                                                  "index":  0
                                                                                              }
                                                                                          ]
                                                                                      ]
                                                                         },
                                              "30 sec":  {
                                                             "main":  [
                                                                          [
                                                                              {
                                                                                  "node":  "Get final video status",
                                                                                  "type":  "main",
                                                                                  "index":  0
                                                                              }
                                                                          ]
                                                                      ]
                                                         },
                                              "Wait 30 sec3":  {
                                                                   "main":  [
                                                                                [
                                                                                    {
                                                                                        "node":  "Get Kie Video Urls",
                                                                                        "type":  "main",
                                                                                        "index":  0
                                                                                    }
                                                                                ]
                                                                            ]
                                                               },
                                              "30 sec3":  {
                                                              "main":  [
                                                                           [
                                                                               {
                                                                                   "node":  "Get Video from Jsontovideo",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               }
                                                                           ]
                                                                       ]
                                                          },
                                              "Make Optimized Images Array from Nano-banana":  {
                                                                                                   "0":  [
                                                                                                             [
                                                                                                                 {
                                                                                                                     "node":  "Split the Script by double newline",
                                                                                                                     "type":  "0",
                                                                                                                     "index":  0
                                                                                                                 }
                                                                                                             ]
                                                                                                         ],
                                                                                                   "main":  [
                                                                                                                [
                                                                                                                    {
                                                                                                                        "node":  "Prepare Body for GPT To Analyze Images",
                                                                                                                        "type":  "main",
                                                                                                                        "index":  0
                                                                                                                    }
                                                                                                                ]
                                                                                                            ]
                                                                                               },
                                              "Standerdize Response":  {
                                                                           "main":  [
                                                                                        [
                                                                                            {
                                                                                                "node":  "If Status is Success Go Otherwise Wait",
                                                                                                "type":  "main",
                                                                                                "index":  0
                                                                                            }
                                                                                        ]
                                                                                    ]
                                                                       },
                                              "Get image from kie":  {
                                                                         "main":  [
                                                                                      [
                                                                                          {
                                                                                              "node":  "Standerdize Response",
                                                                                              "type":  "main",
                                                                                              "index":  0
                                                                                          }
                                                                                      ]
                                                                                  ]
                                                                     },
                                              "Create task on kie to optimize images":  {
                                                                                            "main":  [
                                                                                                         [
                                                                                                             {
                                                                                                                 "node":  "Wait 30 sec1",
                                                                                                                 "type":  "main",
                                                                                                                 "index":  0
                                                                                                             }
                                                                                                         ]
                                                                                                     ]
                                                                                        },
                                              "If Status is Success Go Otherwise Wait":  {
                                                                                             "main":  [
                                                                                                          [
                                                                                                              {
                                                                                                                  "node":  "Make Optimized Images Array from Nano-banana",
                                                                                                                  "type":  "main",
                                                                                                                  "index":  0
                                                                                                              }
                                                                                                          ]
                                                                                                      ]
                                                                                         },
                                              "Prepare Body for GPT To Analyze Images":  {
                                                                                             "main":  [
                                                                                                          [
                                                                                                              {
                                                                                                                  "node":  "Call Open AI To Analyze Images And Generate Script Accordingly",
                                                                                                                  "type":  "main",
                                                                                                                  "index":  0
                                                                                                              }
                                                                                                          ]
                                                                                                      ]
                                                                                         },
                                              "Call Open AI To Analyze Images And Generate Script Accordingly":  {
                                                                                                                     "main":  [
                                                                                                                                  [
                                                                                                                                      {
                                                                                                                                          "node":  "Split the Script by double newline",
                                                                                                                                          "type":  "main",
                                                                                                                                          "index":  0
                                                                                                                                      }
                                                                                                                                  ]
                                                                                                                              ]
                                                                                                                 },
                                              "Split the Script by double newline":  {
                                                                                         "main":  [
                                                                                                      [
                                                                                                          {
                                                                                                              "node":  "Convert text to speech",
                                                                                                              "type":  "main",
                                                                                                              "index":  0
                                                                                                          }
                                                                                                      ]
                                                                                                  ]
                                                                                     },
                                              "Upload Speech To S3":  {
                                                                          "main":  [
                                                                                       [
                                                                                           {
                                                                                               "node":  "Get duration of voices",
                                                                                               "type":  "main",
                                                                                               "index":  0
                                                                                           }
                                                                                       ]
                                                                                   ]
                                                                      },
                                              "Call Kie Api Kling Model to Generate image to video":  {
                                                                                                          "main":  [
                                                                                                                       [
                                                                                                                           {
                                                                                                                               "node":  "Wait 30 sec3",
                                                                                                                               "type":  "main",
                                                                                                                               "index":  0
                                                                                                                           }
                                                                                                                       ]
                                                                                                                   ]
                                                                                                      },
                                              "Prepare Body for Kie API (Kling model to generate video)":  {
                                                                                                               "main":  [
                                                                                                                            [
                                                                                                                                {
                                                                                                                                    "node":  "Call Kie Api Kling Model to Generate image to video",
                                                                                                                                    "type":  "main",
                                                                                                                                    "index":  0
                                                                                                                                }
                                                                                                                            ]
                                                                                                                        ]
                                                                                                           },
                                              "Get Kie Video Urls":  {
                                                                         "main":  [
                                                                                      [
                                                                                          {
                                                                                              "node":  "Standerdized Response",
                                                                                              "type":  "main",
                                                                                              "index":  0
                                                                                          }
                                                                                      ]
                                                                                  ]
                                                                     },
                                              "Standerdized Response":  {
                                                                            "main":  [
                                                                                         [
                                                                                             {
                                                                                                 "node":  "If Status is Success Go Otherwise Wait1",
                                                                                                 "type":  "main",
                                                                                                 "index":  0
                                                                                             }
                                                                                         ]
                                                                                     ]
                                                                        },
                                              "If Status is Success Go Otherwise Wait1":  {
                                                                                              "main":  [
                                                                                                           [
                                                                                                               {
                                                                                                                   "node":  "Seprate All Video Urls Generatad from Kei",
                                                                                                                   "type":  "main",
                                                                                                                   "index":  0
                                                                                                               }
                                                                                                           ]
                                                                                                       ]
                                                                                          },
                                              "Get Video from Jsontovideo":  {
                                                                                 "main":  [
                                                                                              [
                                                                                                  {
                                                                                                      "node":  "If status is done go otherwise wait",
                                                                                                      "type":  "main",
                                                                                                      "index":  0
                                                                                                  }
                                                                                              ]
                                                                                          ]
                                                                             },
                                              "Render Kie videos in json2video (full duration)":  {
                                                                                                      "main":  [
                                                                                                                   [
                                                                                                                       {
                                                                                                                           "node":  "30 sec3",
                                                                                                                           "type":  "main",
                                                                                                                           "index":  0
                                                                                                                       }
                                                                                                                   ]
                                                                                                               ]
                                                                                                  },
                                              "If status is done go otherwise wait":  {
                                                                                          "main":  [
                                                                                                       [
                                                                                                           {
                                                                                                               "node":  "Make body for jsontovideo Api to merge videos clips",
                                                                                                               "type":  "main",
                                                                                                               "index":  0
                                                                                                           }
                                                                                                       ]
                                                                                                   ]
                                                                                      },
                                              "Make body for jsontovideo Api to merge videos clips":  {
                                                                                                          "main":  [
                                                                                                                       [
                                                                                                                           {
                                                                                                                               "node":  "Call Jsontovideo API to merge clips",
                                                                                                                               "type":  "main",
                                                                                                                               "index":  0
                                                                                                                           }
                                                                                                                       ]
                                                                                                                   ]
                                                                                                      },
                                              "Call Jsontovideo API to merge clips":  {
                                                                                          "main":  [
                                                                                                       [
                                                                                                           {
                                                                                                               "node":  "10 sec3",
                                                                                                               "type":  "main",
                                                                                                               "index":  0
                                                                                                           }
                                                                                                       ]
                                                                                                   ]
                                                                                      },
                                              "Get merged video Status":  {
                                                                              "main":  [
                                                                                           [
                                                                                               {
                                                                                                   "node":  "If status is done go otherwise wait1",
                                                                                                   "type":  "main",
                                                                                                   "index":  0
                                                                                               }
                                                                                           ]
                                                                                       ]
                                                                          },
                                              "If status is done go otherwise wait1":  {
                                                                                           "main":  [
                                                                                                        [
                                                                                                            {
                                                                                                                "node":  "prepare body for jsontovideo to set video",
                                                                                                                "type":  "main",
                                                                                                                "index":  0
                                                                                                            }
                                                                                                        ]
                                                                                                    ]
                                                                                       },
                                              "prepare body for jsontovideo to set video":  {
                                                                                                "main":  [
                                                                                                             [
                                                                                                                 {
                                                                                                                     "node":  "Call Jsontovideo to create task",
                                                                                                                     "type":  "main",
                                                                                                                     "index":  0
                                                                                                                 }
                                                                                                             ]
                                                                                                         ]
                                                                                            },
                                              "Call Jsontovideo to create task":  {
                                                                                      "main":  [
                                                                                                   [
                                                                                                       {
                                                                                                           "node":  "30 sec2",
                                                                                                           "type":  "main",
                                                                                                           "index":  0
                                                                                                       }
                                                                                                   ]
                                                                                               ]
                                                                                  },
                                              "Get video status":  {
                                                                       "main":  [
                                                                                    [
                                                                                        {
                                                                                            "node":  "If Task is Status is done go otherwise wait",
                                                                                            "type":  "main",
                                                                                            "index":  0
                                                                                        }
                                                                                    ]
                                                                                ]
                                                                   },
                                              "If Task is Status is done go otherwise wait":  {
                                                                                                  "main":  [
                                                                                                               [
                                                                                                                   {
                                                                                                                       "node":  "get video metadata to add music",
                                                                                                                       "type":  "main",
                                                                                                                       "index":  0
                                                                                                                   }
                                                                                                               ]
                                                                                                           ]
                                                                                              },
                                              "get video metadata to add music":  {
                                                                                      "main":  [
                                                                                                   [
                                                                                                       {
                                                                                                           "node":  "Prepare body for jsontovideo to render video",
                                                                                                           "type":  "main",
                                                                                                           "index":  0
                                                                                                       }
                                                                                                   ]
                                                                                               ]
                                                                                  },
                                              "Call jsontovideo to render":  {
                                                                                 "main":  [
                                                                                              [
                                                                                                  {
                                                                                                      "node":  "30 sec",
                                                                                                      "type":  "main",
                                                                                                      "index":  0
                                                                                                  }
                                                                                              ]
                                                                                          ]
                                                                             },
                                              "if task is done go otherwise wait":  {
                                                                                        "main":  [
                                                                                                     [
                                                                                                         {
                                                                                                             "node":  "Format variables for final editing1",
                                                                                                             "type":  "main",
                                                                                                             "index":  0
                                                                                                         }
                                                                                                     ]
                                                                                                 ]
                                                                                    },
                                              "Prepare body for jsontovideo to render video":  {
                                                                                                   "main":  [
                                                                                                                [
                                                                                                                    {
                                                                                                                        "node":  "Call jsontovideo to render",
                                                                                                                        "type":  "main",
                                                                                                                        "index":  0
                                                                                                                    }
                                                                                                                ]
                                                                                                            ]
                                                                                               },
                                              "Webhook":  {
                                                              "main":  [
                                                                           [
                                                                               {
                                                                                   "node":  "Separate image data",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               },
                                                                               {
                                                                                   "node":  "save execution id to db",
                                                                                   "type":  "main",
                                                                                   "index":  0
                                                                               }
                                                                           ]
                                                                       ]
                                                          },
                                              "Get duration of voices":  {
                                                                             "main":  [
                                                                                          [
                                                                                              {
                                                                                                  "node":  "Prepare Body for Kie API (Kling model to generate video)",
                                                                                                  "type":  "main",
                                                                                                  "index":  0
                                                                                              }
                                                                                          ]
                                                                                      ]
                                                                         },
                                              "Seprate All Video Urls Generatad from Kei":  {
                                                                                                "main":  [
                                                                                                             [
                                                                                                                 {
                                                                                                                     "node":  "Render Kie videos in json2video (full duration)",
                                                                                                                     "type":  "main",
                                                                                                                     "index":  0
                                                                                                                 }
                                                                                                             ]
                                                                                                         ]
                                                                                            }
                                          },
                          "authors":  "Shawheen Nabizadeh",
                          "name":  null,
                          "description":  null,
                          "autosaved":  false,
                          "workflowPublishHistory":  [
                                                         {
                                                             "createdAt":  "2026-01-17T04:17:27.361Z",
                                                             "id":  774,
                                                             "workflowId":  "Qo2sirL0cDI2fVNQMJ5Eq",
                                                             "versionId":  "078c0222-ab65-4af6-aefb-a9330ca4ec8b",
                                                             "event":  "activated",
                                                             "userId":  "92d3fbdb-a49c-432b-b35c-b3d875346f08"
                                                         }
                                                     ]
                      }
}
